window["AlloyEditor"]=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=42)}([function(e,t){(function(){e.exports=window[void 0]})()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=n(0),o=l(r),i=n(2),a=l(i);function l(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.className,n=void 0===t?"":t,r=e.symbol;return o.default.createElement(a.default.Consumer,null,function(e){var t=e.editor,i=t.get("nativeEditor"),a=i.config.spritemap||"",l=a+"#"+r,s=n?" "+n:"",u="ae-svg-icon"+s;return o.default.createElement("svg",{className:u,height:"18",width:"18"},o.default.createElement("use",{href:l}))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var l=i.default.createContext({});l.toProps=function(e){var t=i.default.forwardRef(function(t,n){return i.default.createElement(l.Consumer,null,function(o){return i.default.createElement(e,r({},t,{context:o,ref:n}))})});return t.key=e.key,t},t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){var e,n,r,o;a(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n=r,r.execCommand=function(e){var t=r.context.editor.get("nativeEditor");t.execCommand(r.props.command,e),t.fire("actionPerformed",r)},o=n,l(r,o)}return s(t,e),t}(e),t.contextType=o.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),i=a(o);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){return function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),r(t,[{key:"getStateClasses",value:function(){var e="";return i.default.isFunction(this.isActive)&&this.isActive()&&(e+="ae-button-pressed"),e}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isBoolean:function(e){return"boolean"===typeof e},isFunction:function(e){return"function"===typeof e},isNull:function(e){return null===e},isNumber:function(e){return"number"===typeof e&&isFinite(e)},isObject:function(e){var t="undefined"===typeof e?"undefined":r(e);return e&&("object"===t||o.isFunction(e))},isString:function(e){return"string"===typeof e},mix:function(e,t){var n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r])},toInt:function(e){return parseInt(e,10)}};t.default=o},function(e,t){(function(){e.exports=window[void 0]})()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=n(2),a=u(i),l=n(5),s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){return c(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),r(t,[{key:"componentWillMount",value:function(){s.default.isFunction(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this))&&o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this);var e=this.props.style;if(s.default.isString(e)){var n=e.split("."),r=this.context.editor.get("nativeEditor").config,i=n.shift();while(i&&s.default.isObject(r)&&s.default.isObject(r[i]))r=r[i],i=n.shift();s.default.isObject(r)&&(e=r)}this._style=new CKEDITOR.style(e)}},{key:"componentWillUnmount",value:function(){s.default.isFunction(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this))&&o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this._style=null}},{key:"getStyle",value:function(){return this._style}},{key:"isActive",value:function(){var e=this.context.editor.get("nativeEditor"),t=e.elementPath();return this.getStyle().checkActive(t,e)}}]),t}(e),t.contextType=a.default,n}},function(e,t,n){e.exports=n(47)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),i=a(o);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),r(t,[{key:"isActive",value:function(){var e=this.context.editor.get("nativeEditor"),t=e.getCommand(this.props.command);return!!t&&t.state===CKEDITOR.TRISTATE_ON}}]),t}(e),t.contextType=i.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=n(6),a=u(i),l=n(5),s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=0,h=1,m=-1,y=0,g=1,b=2;t.default=function(e){return function(e){function t(){var e,n,r,o;c(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r.focus=function(e){if((!e||r._isValidTarget(e.target))&&r._descendants&&r._descendants.length){var t=r._descendants[r._activeDescendant];document.activeElement===t||r.props.focusFirstChild||-1===r._descendants.indexOf(document.activeElement)&&t.focus(),e&&(e.stopPropagation(),e.preventDefault())}},r.handleKey=function(e){if(r._isValidTarget(e.target)&&r._descendants){var t=r._getFocusAction(e);t.type&&(e.stopPropagation(),e.preventDefault(),t.type===g&&r._moveFocus(t.direction),t.type===b&&r.props.onDismiss(t.direction))}},o=n,f(r,o)}return d(t,e),r(t,[{key:"componentDidMount",value:function(){s.default.isFunction(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this))&&o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this._refresh()}},{key:"componentDidUpdate",value:function(){s.default.isFunction(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this))&&o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this),this._refresh()}},{key:"moveFocus",value:function(e){e=s.default.isNumber(e)?e:0,this._moveFocus(e)}},{key:"_getFocusAction",value:function(e){var t={type:y};if(this.props.keys){var n=this._getFocusMoveDirection(e);n&&(t.direction=n,t.type=g);var r=this._getFocusDismissAction(e,n);r.dismiss&&(t.direction=r.direction,t.type=b)}return t}},{key:"_getFocusDismissAction",value:function(e,t){var n={direction:t,dismiss:!1};return this.props.onDismiss&&(this._isValidKey(e.keyCode,this.props.keys.dismiss)&&(n.dismiss=!0),this._isValidKey(e.keyCode,this.props.keys.dismissNext)&&(n.dismiss=!0,n.direction=h),this._isValidKey(e.keyCode,this.props.keys.dismissPrev)&&(n.dismiss=!0,n.direction=m),n.dismiss||this.props.circular||!t||(n.dismiss=t===m&&0===this._activeDescendant||t===h&&this._activeDescendant===this._descendants.length-1)),n}},{key:"_getFocusMoveDirection",value:function(e){var t=p;return this._isValidKey(e.keyCode,this.props.keys.next)&&(t=h),this._isValidKey(e.keyCode,this.props.keys.prev)&&(t=m),e.shifKey&&(t*=-1),t}},{key:"_isValidKey",value:function(e,t){return s.default.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"_isValidTarget",value:function(e){var t=e.tagName.toLowerCase();return"input"!==t&&"select"!==t&&"textarea"!==t}},{key:"_moveFocus",value:function(e){var t=this._descendants.length,n=this._descendants[this._activeDescendant];n.setAttribute("tabIndex",-1),this._activeDescendant+=e,this.props.circular?this._activeDescendant=(this._activeDescendant%t+t)%t:this._activeDescendant=Math.max(Math.min(this._activeDescendant,t-1),0),n=this._descendants[this._activeDescendant],n.setAttribute("tabIndex",0),n.focus()}},{key:"_refresh",value:function(){var e=this,t=a.default.findDOMNode(this);if(t){var n=t.querySelectorAll(this.props.descendants),r=[];this._descendants=[],Array.prototype.slice.call(n).forEach(function(t){var n=t.getAttribute("data-tabindex");n?r.push(t):e._descendants.push(t)}),r=r.sort(function(e,t){return s.default.toInt(e.getAttribute("data-tabindex"))>s.default.toInt(t.getAttribute("data-tabindex"))}),this._descendants=r.concat(this._descendants),this._activeDescendant=0,this._descendants.some(function(t,n){if("0"===t.getAttribute("tabindex"))return e._activeDescendant=n,e.focus(),!0})}}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=n(2),a=u(i),l=n(5),s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){return c(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),r(t,[{key:"componentWillMount",value:function(){s.default.isFunction(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this))&&o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this);var e=this.context.editor.get("nativeEditor"),n=this.props.keystroke,r="keystroke:"+n.name,i=e.getCommand(r);i||(i=new CKEDITOR.command(e,{exec:function(e){var t=n.fn;s.default.isString(t)?this[t].call(this,e):s.default.isFunction(t)&&t.call(this,e)}.bind(this)}),e.addCommand(r,i)),this._defaultKeystrokeCommand=e.keystrokeHandler.keystrokes[n.keys],e.setKeystroke(n.keys,r)}},{key:"componentWillUnmount",value:function(){s.default.isFunction(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this))&&o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.context.editor.get("nativeEditor").setKeystroke(this.props.keystroke.keys,this._defaultKeystrokeCommand)}}]),t}(e),t.contextType=a.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=s(o),a=n(10),l=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"ae-arrow-box ae-arrow-box-top-left ae-dropdown",onFocus:this.focus,onKeyDown:this.handleKey,tabIndex:"0"},i.default.createElement("ul",{className:"ae-listbox",role:"listbox"},this.props.children))}}]),t}(i.default.Component);d.defaultProps={circular:!1,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},d.key="dropdown",t.default=(0,l.default)(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(10),l=c(a),s=n(27),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._ref=i.default.createRef(),n}return p(t,e),r(t,[{key:"componentDidMount",value:function(){this._ref.current.focus()}},{key:"render",value:function(){return i.default.createElement("div",{className:"ae-arrow-box ae-arrow-box-top-left ae-dropdown",onFocus:this.focus,onKeyDown:this.handleKey,ref:this._ref,tabIndex:"0"},i.default.createElement("ul",{className:"ae-listbox",id:this.props.listId,role:"listbox"},this._renderActions(this.props.commands)))}},{key:"_renderActions",value:function(e){var t=void 0;return e&&e.length&&(t=e.map(function(e){return i.default.createElement("li",{key:e.command,role:"option"},i.default.createElement(u.default,{command:e.command,description:"string"===typeof e.label?e.label:e.label(),icon:e.icon}))})),t}}]),t}(i.default.Component);h.defaultProps={circular:!1,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},h.key="buttonCommandsList",t.default=(0,l.default)(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=l(r),i=n(5),a=l(i);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){var e,n,r,o;s(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n=r,r.applyStyle=function(){if(a.default.isFunction(r.isActive)&&a.default.isFunction(r.getStyle)){var e=r.context.editor.get("nativeEditor");e.getSelection().lock(),r.isActive()?e.removeStyle(r.getStyle()):e.applyStyle(r.getStyle()),e.getSelection().unlock(),e.fire("actionPerformed",r)}},o=n,u(r,o)}return c(t,e),t}(e),t.contextType=o.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=b(o),a=n(6),l=b(a),s=n(10),u=b(s),c=n(12),f=b(c),d=n(23),p=b(d),h=n(24),m=b(h),y=n(25),g=b(y);function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e){function t(){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),r(t,[{key:"componentDidMount",value:function(){l.default.findDOMNode(this).focus()}},{key:"componentWillMount",value:function(){var e=[],t=[],n=[];this.props.styles.forEach(function(r){var o=new CKEDITOR.style(r.style);o.type===CKEDITOR.STYLE_BLOCK?e.push(r):o.type===CKEDITOR.STYLE_INLINE?t.push(r):o.type===CKEDITOR.STYLE_OBJECT&&n.push(r)}),this._blockStyles=e,this._inlineStyles=t,this._objectStyles=n}},{key:"render",value:function(){var e=void 0;return this.props.showRemoveStylesItem&&(e=i.default.createElement(m.default,{onDismiss:this.props.toggleDropdown})),i.default.createElement(f.default,this.props,e,i.default.createElement(p.default,{name:AlloyEditor.Strings.blockStyles,styles:this._blockStyles}),this._renderStylesItems(this._blockStyles),i.default.createElement(p.default,{name:AlloyEditor.Strings.inlineStyles,styles:this._inlineStyles}),this._renderStylesItems(this._inlineStyles),i.default.createElement(p.default,{name:AlloyEditor.Strings.objectStyles,styles:this._objectStyles}),this._renderStylesItems(this._objectStyles))}},{key:"_renderStylesItems",value:function(e){var t=this,n=void 0;return e&&e.length&&(n=e.map(function(e){return i.default.createElement("li",{key:e.name,role:"option"},i.default.createElement(g.default,{activeStyle:t.props.activeStyle,name:e.name,style:e.style,styleFn:e.styleFn}))})),n}}]),t}(i.default.Component);O.defaultProps={circular:!1,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]},showRemoveStylesItem:!0},O.key="buttonStylesList",t.default=(0,u.default)(O)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},a=n(6),l=c(a),s=n(5),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){return function(e){function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mergeDropdownProps=function(e,t){return CKEDITOR.tools.merge(e,{expanded:n.state.itemDropdown===t,tabIndex:n.state.dropdownTrigger===t?0:-1,toggleDropdown:n.toggleDropdown.bind(n,t)})},n.toggleDropdown=function(e,t){n.setState({dropdownTrigger:e,itemDropdown:e!==n.state.itemDropdown?e:null},function(){n.state.itemDropdown||(n.moveFocus?n.moveFocus(t):l.default.findDOMNode(n).focus())})},n.state=r({},n.state,{dropdownTrigger:null,itemDropdown:null}),n}return p(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){u.default.isFunction(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this))&&i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),this.setState({dropdownTrigger:null,itemDropdown:null})}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=n(5),a=l(i);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){return function(e){function t(){var e,n,r,o;s(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r.requestExclusive=function(e){r.setState({itemExclusive:e})},o=n,u(r,o)}return c(t,e),r(t,[{key:"cancelExclusive",value:function(e){this.state.itemExclusive===e&&this.setState({itemExclusive:null})}},{key:"componentWillReceiveProps",value:function(e){a.default.isFunction(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this))&&o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),this.setState({itemExclusive:null})}},{key:"filterExclusive",value:function(e){var t=this;return e.filter(function(e){return t.state.itemExclusive?t.state.itemExclusive===e.key?e:void 0:e})}},{key:"mergeExclusiveProps",value:function(e,t){return CKEDITOR.tools.merge(e,{cancelExclusive:this.cancelExclusive.bind(this,t),renderExclusive:this.state.itemExclusive===t,requestExclusive:this.requestExclusive.bind(this,t)})}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=E(i),l=n(2),s=E(l),u=n(5),c=E(u),f=n(16),d=E(f),p=n(10),h=E(p),m=n(1),y=E(m),g=n(30),b=E(g),v=n(32),_=E(v);function E(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function C(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=function(e){function t(e){O(this,t);var n=w(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._clearLink=function(){n.setState({linkHref:""}),n._focusLinkInput()},n._handleKeyDown=function(e){if(13!==e.keyCode&&27!==e.keyCode||e.preventDefault(),13===e.keyCode)n._updateLink();else if(40===e.keyCode)n.setState({autocompleteSelected:!0});else if(27===e.keyCode){var t=n.context.editor.get("nativeEditor");new CKEDITOR.Link(t).advanceSelection(),n.context.editor.get("nativeEditor").fire("actionPerformed",n)}},n._handleLinkHrefChange=function(e){n.setState({linkHref:e.target.value}),n._focusLinkInput()},n._handleLinkTargetChange=function(e){n.setState({itemDropdown:null,linkTarget:e.target.getAttribute("data-value")}),n._focusLinkInput()},n._removeLink=function(){var e=n.context.editor.get("nativeEditor"),t=new CKEDITOR.Link(e),r=e.getSelection(),o=r.createBookmarks();t.remove(n.state.element,{advance:!0}),r.selectBookmarks(o),n.props.cancelExclusive(),e.fire("actionPerformed",n)},n._updateLink=function(){var e=n.context.editor.get("nativeEditor"),t=new CKEDITOR.Link(e,{appendProtocol:n.props.appendProtocol}),r={target:n.state.linkTarget||null},o={advance:!0};n.state.linkHref&&(n.state.element?(r.href=n.state.linkHref,t.update(r,n.state.element,o)):(n.state.linkTarget||(r={}),t.create(n.state.linkHref,r,o)),e.fire("actionPerformed",n)),n.props.cancelExclusive()},n.linkInput=a.default.createRef(),n.state=n._getInitialState(),n}return C(t,e),o(t,[{key:"componentDidMount",value:function(){(this.props.renderExclusive||this.props.manualSelection)&&this._focusLinkInput()}},{key:"componentWillReceiveProps",value:function(){this.setState(this._getInitialState())}},{key:"render",value:function(){var e={allowedTargets:this.props.allowedTargets,editor:this.context.editor,handleLinkTargetChange:this._handleLinkTargetChange,selectedTarget:this.state.linkTarget||AlloyEditor.Strings.linkTargetDefault};e=this.mergeDropdownProps(e,_.default.key);var t=void 0;if(this.props.data){var n=this.props.data;if(!c.default.isFunction(n)){var o=this.props.data;n=function(){return o}}var i={autocompleteSelected:this.state.autocompleteSelected,data:n,editor:this.context.editor,handleLinkAutocompleteClick:this._handleLinkAutocompleteClick,onDismiss:this.props.toggleDropdown,setAutocompleteState:this._setAutocompleteState,term:this.state.linkHref};i=this.mergeDropdownProps(i,b.default.key),t=a.default.createElement(b.default,i)}var l=void 0;this.state.linkHref&&(l=a.default.createElement("button",{"aria-label":AlloyEditor.Strings.clearInput,className:"ae-button ae-button-clear",onClick:this._clearLink,title:AlloyEditor.Strings.clear},a.default.createElement(y.default,{symbol:"times-circle"})));var s={};return!CKEDITOR.env.ie&&AlloyEditor.Strings&&(s.placeholder=AlloyEditor.Strings.editLink),a.default.createElement("div",{className:"ae-container-edit-link"},a.default.createElement("button",{"aria-label":AlloyEditor.Strings.removeLink,className:"ae-button",disabled:!this.state.element,onClick:this._removeLink,title:AlloyEditor.Strings.remove},a.default.createElement(y.default,{symbol:"chain-broken"})),a.default.createElement("div",{className:"ae-container-input xxl"},this.props.showTargetSelector&&a.default.createElement(_.default,e),a.default.createElement("div",{className:"ae-container-input"},a.default.createElement("input",r({className:"ae-input",onChange:this._handleLinkHrefChange,onKeyDown:this._handleKeyDown},s,{ref:this.linkInput,type:"text",value:this.state.linkHref})),t),l),a.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",disabled:!this._isValidState(),onClick:this._updateLink,title:AlloyEditor.Strings.confirm},a.default.createElement(y.default,{className:"ae-icon-svg-check",symbol:"check"})))}},{key:"_getInitialState",value:function(){var e=this.props.context.editor,t=this.props.defaultLinkTarget,n=new CKEDITOR.Link(e.get("nativeEditor")).getFromSelection(),r=n&&n.getAttribute("href")||"",o=n&&n.getAttribute("target")||t;return{autocompleteSelected:!1,element:n,initialLink:{href:r,target:o},linkHref:r,linkTarget:o}}},{key:"_focusLinkInput",value:function(){var e=this,t=function(){e.linkInput.current.focus()};window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,0)}},{key:"_handleLinkAutocompleteClick",value:function(e){this.setState({itemDropdown:null,linkHref:e.target.getAttribute("data-value")}),this._focusLinkInput()}},{key:"_isValidState",value:function(){var e=this.state.linkHref&&(this.state.linkHref!==this.state.initialLink.href||this.state.linkTarget!==this.state.initialLink.target);return e}},{key:"_setAutocompleteState",value:function(e){this.setState({autocompleteSelected:e.selected})}}]),t}(a.default.Component);k.contextType=s.default,k.defaultProps={appendProtocol:!0,autocompleteUrl:"",circular:!0,customIndexStart:!0,defaultLinkTarget:"",descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]},showTargetSelector:!0},k.key="linkEdit",t.default=s.default.toProps((0,d.default)((0,h.default)(k)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),i=a(o);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),r(t,[{key:"mergeButtonCfgProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.context.editor.get("nativeEditor"),n=t.config.buttonCfg||{};return CKEDITOR.tools.merge(e,n["linkEdit"])}}]),t}(e),t.contextType=i.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=p(i),l=n(6),s=p(l),u=n(2),c=p(u),f=n(5),d=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){return h(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),o(t,[{key:"cancelAnimation",value:function(){this._animationFrameId&&window.cancelAnimationFrame(this._animationFrameId)}},{key:"getArrowBoxClasses",value:function(){var e="ae-arrow-box";return this.getInteractionPoint().direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?e+=" ae-arrow-box-top":e+=" ae-arrow-box-bottom",e}},{key:"getConstrainedPosition",value:function(e,t){t=t||new CKEDITOR.dom.window(window).getViewPaneSize();var n=e.left,r=e.top;return e.left+e.width>t.width&&(n-=e.left+e.width-t.width),r<0&&(r=0),{x:n,y:r}}},{key:"getInteractionPoint",value:function(){var e=this.props.editorEvent?this.props.editorEvent.data:null;if(e){var t=e.selectionData,n=e.nativeEvent,r={x:e.nativeEvent.pageX,y:t.region.top},o=t.region.direction,i=t.region.endRect,a=t.region.startRect;i&&a&&a.top===i.top&&(o=CKEDITOR.SELECTION_BOTTOM_TO_TOP);var l=void 0,s=void 0;return r.x&&r.y?(l=this._getXPoint(t,r.x),s=o===CKEDITOR.SELECTION_BOTTOM_TO_TOP?Math.min(r.y,t.region.top):Math.max(r.y,this._getYPoint(t,n))):(l=t.region.left+t.region.width/2,s=o===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this._getYPoint(t,n):t.region.top),{direction:o,x:l,y:s}}}},{key:"_getXPoint",value:function(e,t){var n=e.region,r=n.startRect?n.startRect.left:n.left,o=n.endRect?n.endRect.right:n.right,i=void 0;if(r<t&&o>t)i=t;else{var a=Math.abs(r-t),l=Math.abs(o-t);i=a<l?r:o}return i}},{key:"_getYPoint",value:function(e,t){var n=0;if(e&&t){var r=new CKEDITOR.dom.element(t.target);n=r.$&&"auto"===r.getStyle("overflow")?t.target.offsetTop+t.target.offsetHeight:e.region.bottom}return n}},{key:"getWidgetXYPoint",value:function(e,t,n){var r=s.default.findDOMNode(this),o=this.props.gutter;return n===CKEDITOR.SELECTION_TOP_TO_BOTTOM||n===CKEDITOR.SELECTION_BOTTOM_TO_TOP?(e=e-o.left-r.offsetWidth/2,t=n===CKEDITOR.SELECTION_TOP_TO_BOTTOM?t+o.top:t-r.offsetHeight-o.top):n!==CKEDITOR.SELECTION_LEFT_TO_RIGHT&&n!==CKEDITOR.SELECTION_RIGHT_TO_LEFT||(e=n===CKEDITOR.SELECTION_LEFT_TO_RIGHT?e+o.left+r.offsetHeight/2:e-3*r.offsetHeight/2-o.left,t=t-o.top-r.offsetHeight/2),e<0&&(e=0),t<0&&(t=0),[e,t]}},{key:"isVisible",value:function(){var e=s.default.findDOMNode(this);if(e){var t=new CKEDITOR.dom.element(e);return t.hasClass("alloy-editor-visible")}return!1}},{key:"moveToPoint",value:function(e,t){var n=new CKEDITOR.dom.element(s.default.findDOMNode(this));n.setStyles({left:e[0]+"px",top:e[1]+"px",opacity:0,pointerEvents:"none"}),n.removeClass("alloy-editor-invisible"),this._animationFrameId=window.requestAnimationFrame(function(){n.addClass("ae-toolbar-transition"),n.addClass("alloy-editor-visible"),n.setStyles({left:t[0]+"px",top:t[1]+"px",opacity:1}),setTimeout(function(){n.setStyles({pointerEvents:""})},150)})}},{key:"show",value:function(){var e=s.default.findDOMNode(this),t=this.context.editor.get("uiNode"),n=t?t.scrollTop:0;if(!this.isVisible()&&e){var r=this.getInteractionPoint();if(r){var o=new CKEDITOR.dom.element(e),i=void 0,a=void 0,l=void 0,u=void 0;if(i=l=parseFloat(o.getStyle("left")),a=u=parseFloat(o.getStyle("top")),this.props.constrainToViewport){var c=this.getConstrainedPosition({height:parseFloat(e.offsetHeight),left:i,top:a,width:parseFloat(e.offsetWidth)});i=c.x,a=c.y}u=r.direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this.props.selectionData.region.bottom+n:this.props.selectionData.region.top+n,this.moveToPoint([l,u],[i,a])}}}},{key:"updatePosition",value:function(){var e=this.getInteractionPoint(),t=s.default.findDOMNode(this);if(e&&t){var n=this.context.editor.get("uiNode")||document.body,r=getComputedStyle(n),o=parseInt(r.getPropertyValue("margin-left"),10),i=parseInt(r.getPropertyValue("margin-right"),10),a=o+n.clientWidth+i,l="BODY"!==n.tagName?n.scrollTop:0,u=this.getWidgetXYPoint(e.x,e.y,e.direction);u[1]+=l,u[0]<0&&(u[0]=0),u[0]>a-t.offsetWidth&&(u[0]=a-t.offsetWidth),new CKEDITOR.dom.element(t).setStyles({left:u[0]+"px",top:u[1]+"px"})}}},{key:"getToolbarButtonGroups",value:function(e,t){var n=this;return d.default.isFunction(e)&&(e=e.call(this)||[]),e.reduce(function(r,o){return Array.isArray(o)?(r.push(n.getToolbarButtons(o,t)),r):n.getToolbarButtons(e,t)},[])}},{key:"getToolbarButtons",value:function(e,t){var n={},r=this.context.editor.get("nativeEditor"),o=r.config.buttonCfg||{};d.default.isFunction(e)&&(e=e.call(this)||[]);var i=this.filterExclusive(e.filter(function(e){return e&&(AlloyEditor.Buttons[e]||AlloyEditor.Buttons[e.name])}).map(function(e){return d.default.isString(e)?(n[e]=o[e],e=AlloyEditor.Buttons[e]):d.default.isString(e.name)&&(n[AlloyEditor.Buttons[e.name].key]=CKEDITOR.tools.merge(o[e],e.cfg),e=AlloyEditor.Buttons[e.name]),e})).map(function(e,r){var o=this.mergeExclusiveProps({editor:this.context.editor,key:"separator"!==e.key?e.key:e.key+"-"+r,tabKey:e.key,tabIndex:this.props.trigger&&this.props.trigger.props.tabKey===e.key?0:-1,trigger:this.props.trigger},e.key);return o=this.mergeDropdownProps(o,e.key),t&&(o=CKEDITOR.tools.merge(o,t)),o=CKEDITOR.tools.merge(o,n[e.key]),a.default.createElement(e,o)},this);return i}}]),t}(e),t.contextType=c.default,t.defaultProps=r({},e.defaultProps,{gutter:{left:0,top:10},constrainToViewport:!0}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,n,r){if(!t||!e)throw new Error("extend failed, verify dependencies");var i=t.prototype,a=Object.create(i);return e.prototype=a,a.constructor=e,e.superclass=i,t!==Object&&i.constructor===Object.prototype.constructor&&(i.constructor=t),n&&o.default.mix(a,n),r&&o.default.mix(e,r),e};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return t.getText().length===e.endOffset||t.equals(e.startContainer)&&t.equals(e.endContainer)&&e.startOffset===e.endOffset&&1===e.endOffset},o=function(e){var t=e.data.selectionData;return!(!t.element||"ae_embed"!==t.element.getAttribute("data-widget"))},i=function(e){var t=e.data.selectionData;return!(!t.element||"embedurl"!==t.element.getAttribute("data-widget"))},a=function(e){var t=["h1","h2","h3","h4","h5","h6"],n=e.editor.get("nativeEditor"),r=e.data.selectionData,o=n.isSelectionEmpty();return!(r.element||!r.region||o||n.getSelection().getCommonAncestor().isReadOnly()||!n.elementPath().contains(t))},l=function(e){var t=e.editor.get("nativeEditor"),n=t.getSelection().getRanges()[0],o=e.data.selectionData,i=new CKEDITOR.Link(t).getFromSelection(),a=t.isSelectionEmpty(),l=!o.element||"img"!==o.element.getName();return!(!(a&&l&&i&&i.getText().length!==n.endOffset&&i)||i.isReadOnly()||r(n,i))},s=function(e){var t=e.data.selectionData,n=t.element,r=!!n&&!!n.findOne("img"),o=!!n&&"img"===n.getName();return!(!n||!r&&!o)},u=function(e){var t=e.editor.get("nativeEditor"),n=t.isSelectionEmpty(),r=e.data.selectionData;return!(r.element||!r.region||n||t.getSelection().getCommonAncestor().isReadOnly())},c=function(e){var t=e.editor.get("nativeEditor"),n=new CKEDITOR.Table(t),r=n.getFromSelection();return!(!r||!n.isEditable(r))},f={embed:o,embedUrl:i,header:a,image:s,link:l,table:c,text:u};t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=a(o);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),r(t,[{key:"render",value:function(){return this.props.styles&&this.props.styles.length?i.default.createElement("span",{className:"ae-list-header"},this.props.name):null}}]),t}(i.default.Component);c.key="buttonStylesListHeader",t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=s(o),a=n(2),l=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){var e,n,r,o;u(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r._removeStyles=function(){var e=r.context.editor.get("nativeEditor");e.execCommand("removeFormat"),r.props.removeBlocks.forEach(function(t){var n=new CKEDITOR.style({element:t});e.removeStyle(n)}),e.fire("actionPerformed",r)},o=n,c(r,o)}return f(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("li",{role:"option"},i.default.createElement("button",{className:"ae-toolbar-element",onClick:this._removeStyles,tabIndex:this.props.tabIndex},AlloyEditor.Strings.normal))}}]),t}(i.default.Component);d.contextType=l.default,d.defaultProps={removeBlocks:["h1","h2","h3","h4","h5","h6","pre"]},d.key="buttonStylesListItemRemove",t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(2),l=d(a),s=n(14),u=d(s),c=n(7),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){var e,n,r,o;p(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r._onClick=function(){r.props.styleFn?r.props.styleFn():(r.context.editor.get("nativeEditor").execCommand("removeFormat"),r.applyStyle())},o=n,h(r,o)}return m(t,e),r(t,[{key:"componentWillMount",value:function(){var e={element:"span",styles:{margin:0}};e=CKEDITOR.tools.merge(e,this.props.style),this._preview=new CKEDITOR.style(e).buildPreview(this.props.name)}},{key:"render",value:function(){var e=this.props.name===this.props.activeStyle?"ae-toolbar-element active":"ae-toolbar-element";return i.default.createElement("button",{className:e,dangerouslySetInnerHTML:{__html:this._preview},onClick:this._onClick,tabIndex:this.props.tabIndex})}}]),t}(i.default.Component);y.contextType=l.default,y.key="buttonStylesListItem",t.default=(0,u.default)((0,f.default)(y))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=s(o),a=n(2),l=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.takePhoto=function(){var e=n._videoContainerRef.current,t=n._canvasContainerRef.current,r=t.getContext("2d"),o=n._videoHeight,i=n.props.videoWidth;if(i&&o){t.width=i,t.height=o,r.drawImage(e,0,0,i,o);var a=t.toDataURL("image/png"),l=CKEDITOR.dom.element.createFromHtml('<img src="'+a+'">'),s=n.context.editor.get("nativeEditor");s.insertElement(l),n.props.cancelExclusive(),s.fire("actionPerformed",n),s.fire("imageCameraAdd",l)}},n._handleStreamError=function(e){window.alert("An error occurred! "+e)},n._handleStreamSuccess=function(e){var t=n._videoContainerRef.current,r=n._canvasContainerRef.current;t.addEventListener("canplay",function(){var e=t.videoHeight/(t.videoWidth/n.props.videoWidth);isNaN(e)&&(e=n.props.videoWidth/(4/3)),t.setAttribute("width",n.props.videoWidth),t.setAttribute("height",e),r.setAttribute("width",n.props.videoWidth),r.setAttribute("height",e),n._videoHeight=e},!1),n._stream=e,navigator.mozGetUserMedia?t.mozSrcObject=e:t.srcObject=e,t.play(),n._buttonTakePhotoRef.current.disabled=!1},n._buttonTakePhotoRef=i.default.createRef(),n._canvasContainerRef=i.default.createRef(),n._videoContainerRef=i.default.createRef(),n}return f(t,e),r(t,[{key:"componentDidMount",value:function(){this._buttonTakePhotoRef.current.focus()}},{key:"componentWillUnmount",value:function(){this._stream&&(this._stream.stop?this._stream.stop():this._stream.getVideoTracks&&this._stream.getVideoTracks().forEach(function(e){e.stop()}),this._stream=null)}},{key:"render",value:function(){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e.call(navigator,{video:!0,audio:!1},this._handleStreamSuccess,this._handleStreamError),i.default.createElement("div",{className:"ae-camera"},i.default.createElement("video",{ref:this._videoContainerRef},"Video stream not available."),i.default.createElement("button",{className:"ae-camera-shoot",onClick:this.takePhoto,ref:this._buttonTakePhotoRef},"Take photo"),i.default.createElement("canvas",{className:"ae-camera-canvas",ref:this._canvasContainerRef}))}}]),t}(i.default.Component);d.contextType=l.default,d.defaultProps={videoWidth:320},d.key="cameraImage",t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=s(o),a=n(3),l=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("button",{"aria-label":this.props.description,className:this._getClassName(),onClick:this.execCommand,tabIndex:this.props.tabIndex},this.props.description)}},{key:"_getClassName",value:function(){var e="ae-container ae-toolbar-element";return e}}]),t}(i.default.Component);d.key="buttonCommandListItem",t.default=(0,l.default)(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(2),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=13,m=27,y=function(e){function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._clearLink=function(){n.setState({linkHref:""})},n._embedLink=function(){var e=n.context.editor.get("nativeEditor");e.execCommand("embedUrl",{url:n.state.linkHref}),n.props.cancelExclusive()},n._focusLinkInput=function(){n.linkInput.current.focus()},n._handleKeyDown=function(e){if(e.keyCode!==h&&e.keyCode!==m||e.preventDefault(),e.keyCode===h)n._embedLink();else if(e.keyCode===m){var t=n.context.editor.get("nativeEditor");n.props.cancelExclusive(),t.fire("actionPerformed",n)}},n._handleLinkHrefChange=function(e){n.setState({linkHref:e.target.value})},n._removeEmbed=function(){var e=n.context.editor.get("nativeEditor"),t=n.state.element.getAscendant(function(e){return e.hasClass("cke_widget_wrapper")});t.remove(),e.fire("actionPerformed",n)},n.linkInput=i.default.createRef(),n.state=n.getInitialState(),n}return p(t,e),r(t,[{key:"componentDidMount",value:function(){(this.props.renderExclusive||this.props.manualSelection)&&(window.requestAnimationFrame?window.requestAnimationFrame(this._focusLinkInput):setTimeout(this._focusLinkInput,0))}},{key:"componentWillReceiveProps",value:function(){this.setState(this.getInitialState())}},{key:"getInitialState",value:function(){var e=this.props.context.editor.get("nativeEditor"),t=void 0,n=e.getSelection();if(n){var r=n.getSelectedElement();r&&(t=r.findOne('[data-widget="ae_embed"]'))}var o=t?t.getAttribute("data-ae-embed-url"):"";return{element:t,initialLink:{href:o},linkHref:o}}},{key:"render",value:function(){var e={opacity:this.state.linkHref?1:0};return i.default.createElement("div",{className:"ae-container-edit-link"},i.default.createElement("button",{"aria-label":AlloyEditor.Strings.deleteEmbed,className:"ae-button","data-type":"button-embed-remove",disabled:!this.state.element,onClick:this._removeEmbed,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.deleteEmbed},i.default.createElement(u.default,{className:"ae-icon-svg-trash",symbol:"trash"})),i.default.createElement("div",{className:"ae-container-input xxl"},i.default.createElement("input",{className:"ae-input",onChange:this._handleLinkHrefChange,onKeyDown:this._handleKeyDown,placeholder:AlloyEditor.Strings.editLink,ref:this.linkInput,type:"text",value:this.state.linkHref}),i.default.createElement("button",{"aria-label":AlloyEditor.Strings.clearInput,className:"ae-button ae-button-clear",onClick:this._clearLink,style:e,title:AlloyEditor.Strings.clear},i.default.createElement(u.default,{symbol:"times-clear"}))),i.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",disabled:!this._isValidState(),onClick:this._embedLink,title:AlloyEditor.Strings.confirm},i.default.createElement(u.default,{className:"ae-icon-svg-check",symbol:"check"})))}},{key:"_isValidState",value:function(){var e=this.state.linkHref&&this.state.linkHref!==this.state.initialLink.href;return e}}]),t}(i.default.Component);y.contextType=l.default,y.key="embedEdit",t.default=l.default.toProps(y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(6),l=d(a),s=n(2),u=d(s),c=n(1),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=13,g=27,b=function(e){function t(e){p(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._embedVideoURL=function(){var e=n.context.editor.get("nativeEditor");e.execCommand("embedUrl",{type:"video",url:n.state.videoURL}),n.props.cancelExclusive()},n._focusVideoUrlInput=function(){l.default.findDOMNode(n.refs.linkInput).focus()},n._handleKeyDown=function(e){e.keyCode!==y&&e.keyCode!==g||e.preventDefault(),e.keyCode===y?n._embedVideoURL():e.keyCode===g&&n.props.cancelExclusive()},n._handleVideoURLChange=function(e){n.setState({videoURL:e.target.value})},n.state=n.getInitialState(),n}return m(t,e),r(t,[{key:"componentDidMount",value:function(){(this.props.renderExclusive||this.props.manualSelection)&&(window.requestAnimationFrame?window.requestAnimationFrame(this._focusVideoUrlInput):setTimeout(this._focusVideoUrlInput,0))}},{key:"componentWillReceiveProps",value:function(){var e=this.getInitialState();this.setState({all:void 0,keys:void 0,new:e,old:void 0})}},{key:"getInitialState",value:function(){var e=this.props.context.editor.get("nativeEditor"),t=void 0,n=e.getSelection();if(n){var r=n.getSelectedElement();r&&(t=r.findOne('[data-widget="videoembed"]'))}var o=t?t.getAttribute("data-embed-video-url"):"";return{element:t,initialEmbed:{videoURL:o},videoURL:o}}},{key:"render",value:function(){var e=AlloyEditor.Strings.pasteVideoLink,t={opacity:this.state.videoURL?1:0};return i.default.createElement("div",{className:"ae-container-embed-video-edit"},i.default.createElement("div",{className:"ae-container-input xxl"},i.default.createElement("input",{className:"ae-input",onChange:this._handleVideoURLChange,onKeyDown:this._handleKeyDown,placeholder:e,ref:"linkInput",type:"text",value:this.state.videoURL}),i.default.createElement("button",{"aria-label":AlloyEditor.Strings.clearInput,className:"ae-button ae-icon-remove",onClick:this._clearLink,style:t,title:AlloyEditor.Strings.clear})),i.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",disabled:!this._isValidState(),onClick:this._embedVideoURL,title:AlloyEditor.Strings.confirm},i.default.createElement(f.default,{symbol:"check"})))}},{key:"_clearLink",value:function(){this.setState({videoURL:""})}},{key:"_isValidState",value:function(){var e=this.state.videoURL&&this.state.videoURL!==this.state.initialEmbed.videoURL;return e}}]),t}(i.default.Component);b.contextType=u.default,b.key="embedVideoEdit",t.default=u.default.toProps(b)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(10),l=c(a),s=n(12),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:[]},n}return p(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){e.term&&e.term===this.props.term||(clearTimeout(this._timeout),e.term?this._timeout=setTimeout(this._updateItems,this.props.delay):this.setState({items:[]})),e.autocompleteSelected&&(setTimeout(this.focus,0),this.props.setAutocompleteState({selected:!1}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this._timeout)}},{key:"render",value:function(){return this.props.expanded&&this.state.items.length?i.default.createElement(u.default,null,this._renderAutocompleteItems(this.state.items)):null}},{key:"shouldComponentUpdate",value:function(e,t){return e.expanded!==this.props.expanded||e.term!==this.props.term||t.items!==this.state.items}},{key:"_renderAutocompleteItems",value:function(e){var t=this;e=e||[];var n=this.props.handleLinkAutocompleteClick;return e.map(function(e){var r=t.props.term===e.url?"ae-toolbar-element active":"ae-toolbar-element";return i.default.createElement("li",{key:e.url,role:"option"},i.default.createElement("button",{className:r,"data-value":e.url,onClick:n},e.title))})}},{key:"_updateItems",value:function(){var e=this;if(this.props.term){var t=Promise.resolve(this.props.data(this.props.term));t.then(function(t){t.length&&!e.props.expanded&&e.props.toggleDropdown(),e.setState({items:t})})}}}]),t}(i.default.Component);h.defaultProps={circular:!1,data:[],delay:100,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},h.key="buttonLinkAutocompleteList",t.default=(0,l.default)(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=m(i),l=n(2),s=m(l),u=n(5),c=m(u),f=n(1),d=m(f),p=n(18),h=m(p);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(e){y(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n._browseClick=function(){var e=n.context.editor.get("nativeEditor"),t=e.config.documentBrowseLinkUrl,r=e.config.documentBrowseLinkCallback,o=n.linkEditButtonRef.current?n.linkEditButtonRef.current.state.linkTarget:"",i=function(e){n._updateLink(e.value,o,e.title)};c.default.isFunction(r)&&r.apply(null,[e,t,i])},n._updateLink=function(e,t,r){var o=n.context.editor.get("nativeEditor"),i=new CKEDITOR.Link(o,{appendProtocol:!1}),a={target:t},l={advance:!0};e&&(o.plugins&&o.plugins.creole&&!r&&(e=location.origin+e),n.state.element?(a.href=e,i.update(a,n.state.element,l)):i.create(e,a,l),o.fire("actionPerformed",n))};var r=new CKEDITOR.Link(n.props.context.editor.get("nativeEditor")).getFromSelection(),o=r?r.getAttribute("href"):"";return n.linkEditButtonRef=a.default.createRef(),n.state={element:r,linkHref:o},n}return b(t,e),o(t,[{key:"render",value:function(){return a.default.createElement("div",{className:"ae-container-link-edit-browse"},a.default.createElement(h.default,r({ref:this.linkEditButtonRef},this.props)),a.default.createElement("button",{"aria-label":"Browse",className:"ae-button",onClick:this._browseClick,title:"browse"},a.default.createElement(d.default,{symbol:"folder"})))}}]),t}(a.default.Component);v.contextType=s.default,v.key="linkEditBrowse",t.default=s.default.toProps(v)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(1),l=c(a),s=n(33),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"render",value:function(){var e=this.props.handleLinkTargetChange,t=this.props.allowedTargets;return i.default.createElement("div",{className:"ae-container-dropdown ae-container-dropdown-medium ae-container-edit-link-target ae-has-dropdown",tabIndex:"0"},i.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":this.props.selectedTarget,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:this.props.selectedTarget},i.default.createElement("div",{className:"ae-container"},i.default.createElement("span",{className:"ae-container-dropdown-selected-item"},this.props.selectedTarget),i.default.createElement(l.default,{symbol:"caret-bottom"}))),this.props.expanded&&i.default.createElement(u.default,{allowedLinkTargets:t,handleLinkTargetChange:e,onDismiss:this.props.toggleDropdown,selectedTarget:this.props.selectedTarget}))}},{key:"shouldComponentUpdate",value:function(e){return e.expanded!==this.props.expanded||e.selectedTarget!==this.props.selectedTarget}}]),t}(i.default.Component);h.key="linkTargetEdit",t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(6),l=d(a),s=n(10),u=d(s),c=n(12),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),r(t,[{key:"componentDidMount",value:function(){l.default.findDOMNode(this).focus()}},{key:"render",value:function(){var e=this._renderListTargets();return i.default.createElement(f.default,this.props,e)}},{key:"_getAllowedTargetItems",value:function(){return this.props.allowedLinkTargets||[{label:AlloyEditor.Strings.linkTargetDefault,value:""},{label:AlloyEditor.Strings.linkTargetSelf,value:"_self"},{label:AlloyEditor.Strings.linkTargetBlank,value:"_blank"},{label:AlloyEditor.Strings.linkTargetParent,value:"_parent"},{label:AlloyEditor.Strings.linkTargetTop,value:"_top"}]}},{key:"_renderListTargets",value:function(){var e=this,t=this._getAllowedTargetItems(),n=this.props.handleLinkTargetChange;return t=t.map(function(t){var r=e.props.selectedTarget===t.value?"ae-toolbar-element active":"ae-toolbar-element";return i.default.createElement("li",{key:t.value,role:"option"},i.default.createElement("button",{className:r,"data-value":t.value,onClick:n},t.label))}),t}}]),t}(i.default.Component);y.defaultProps={circular:!0,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},y.key="targetList",t.default=(0,u.default)(y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=b(o),a=n(2),l=b(a),s=n(11),u=b(s),c=n(19),f=b(c),d=n(4),p=b(d),h=n(1),m=b(h),y=n(18),g=b(y);function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e){function t(){var e,n,r,o;v(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r._requestExclusive=function(){r.props.requestExclusive(t.key)},o=n,_(r,o)}return E(t,e),r(t,[{key:"isActive",value:function(){return null!==new CKEDITOR.Link(this.context.editor.get("nativeEditor")).getFromSelection()}},{key:"render",value:function(){var e="ae-button "+this.getStateClasses();if(this.props.renderExclusive){var t=this.mergeButtonCfgProps();return i.default.createElement(g.default,t)}return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.link,className:e,"data-type":"button-link",onClick:this._requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.link},i.default.createElement(m.default,{symbol:"link"}))}}]),t}(i.default.Component);O.contextType=l.default,O.defaultProps={keystroke:{fn:"_requestExclusive",keys:CKEDITOR.CTRL+76,name:"link"}},O.key="link",t.default=(0,f.default)((0,u.default)((0,p.default)(O)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(2),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=13,m=27,y=function(e){function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._createTable=function(){var e=n.context.editor.get("nativeEditor"),t=new CKEDITOR.Table(e);t.create({attrs:n.props.tableAttributes,cols:n.state.cols,rows:n.state.rows}),n.props.cancelExclusive(),e.fire("actionPerformed",n)},n._handleChange=function(e,t){var r={};r[e]=t.target.value,n.setState(r)},n._handleKeyDown=function(e){e.keyCode!==h&&e.keyCode!==m||e.preventDefault(),e.keyCode===h?n._createTable():e.keyCode===m&&n.props.cancelExclusive()},n.rowsRef=i.default.createRef(),n.colsRef=i.default.createRef(),n.state={cols:3,rows:3},n}return p(t,e),r(t,[{key:"componentDidMount",value:function(){this.rowsRef.current.focus()}},{key:"render",value:function(){var e=Date.now(),t=e+"rows",n=e+"cols";return i.default.createElement("div",{className:"ae-container-edit-table"},i.default.createElement("label",{htmlFor:t},AlloyEditor.Strings.rows),i.default.createElement("div",{className:"ae-container-input small"},i.default.createElement("input",{className:"ae-input",id:t,min:"1",onChange:this._handleChange.bind(this,"rows"),onKeyDown:this._handleKeyDown,placeholder:"Rows",ref:this.rowsRef,type:"number",value:this.state.rows})),i.default.createElement("label",{htmlFor:n},AlloyEditor.Strings.columns),i.default.createElement("div",{className:"ae-container-input small"},i.default.createElement("input",{className:"ae-input",id:n,min:"1",onChange:this._handleChange.bind(this,"cols"),onKeyDown:this._handleKeyDown,placeholder:"Colums",ref:this.colsRef,type:"number",value:this.state.cols})),i.default.createElement("button",{"aria-label":"Confirm",className:"ae-button",onClick:this._createTable},i.default.createElement(u.default,{symbol:"check"})))}}]),t}(i.default.Component);y.contextType=l.default,y.defaultProps={tableAttributes:{border:1,cellPadding:0,cellSpacing:0,style:"width: 100%"}},y.key="tableEdit",t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a={propTypes:{editorEvent:o.default.object},getInteractionPoint:function(){var e=this.props.editorEvent?this.props.editorEvent.data:null;if(e){var t=e.selectionData,n=e.nativeEvent,r={x:e.nativeEvent.pageX,y:t.region.top},o=t.region.direction,i=t.region.endRect,a=t.region.startRect;i&&a&&a.top===i.top&&(o=CKEDITOR.SELECTION_BOTTOM_TO_TOP);var l=void 0,s=void 0;return r.x&&r.y?(l=this._getXPoint(t,r.x),s=o===CKEDITOR.SELECTION_BOTTOM_TO_TOP?Math.min(r.y,t.region.top):Math.max(r.y,this._getYPoint(t,n))):(l=t.region.left+t.region.width/2,s=o===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this._getYPoint(t,n):t.region.top),{direction:o,x:l,y:s}}},_getXPoint:function(e,t){var n=e.region,r=n.startRect?n.startRect.left:n.left,o=n.endRect?n.endRect.right:n.right,i=void 0;if(r<t&&o>t)i=t;else{var a=Math.abs(r-t),l=Math.abs(o-t);i=a<l?r:o}return i},_getYPoint:function(e,t){var n=0;if(e&&t){var r=new CKEDITOR.dom.element(t.target);n=r.$&&"auto"===r.getStyle("overflow")?t.target.offsetTop+t.target.offsetHeight:e.region.bottom}return n}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e){this.__config__=e||{},this.__ATTRS__={}}l.prototype={constructor:l,get:function(e){var t=this.constructor.ATTRS[e];if(t){this._isInitialized(e)||this._init(e);var n=this.__ATTRS__[e];return t.getter&&(n=this._callStringOrFunction(t.getter,n)),n}},set:function(e,t){var n=this.constructor.ATTRS[e];n&&(this._isInitialized(e)||this._init(e),n.readOnly||n.writeOnce&&this._isInitialized(e)||n.validator&&!this._callStringOrFunction(n.validator,t)||(n.setter&&(t=this._callStringOrFunction(n.setter,t)),this.__ATTRS__[e]=t))},_callStringOrFunction:function(e,t){var n=null;return o.default.isArray(t)||(t=[t]),o.default.isString(e)&&o.default.isFunction(this[e])?n=this[e].apply(this,a(t)):o.default.isFunction(e)&&(n=e.apply(this,t)),n},_init:function(e){var t=void 0,n=this.constructor.ATTRS[e],r=Object.prototype.hasOwnProperty.call(n,"value"),o=Object.prototype.hasOwnProperty.call(this.__config__,e);if(n.valueFn)t=this._callStringOrFunction(n.valueFn,t),this.__ATTRS__[e]=t;else if(n.readOnly)t=n.value;else if(n.writeOnce)if(o)t=this.__config__[e];else{if(!r)return;t=n.value}else o?t=this.__config__[e]:r&&(t=n.value);if(n.validator&&o&&!this._callStringOrFunction(n.validator,t)){if(!r)return;t=n.value}n.setter&&o&&(t=this._callStringOrFunction(n.setter,t)),this.__ATTRS__[e]=t},_isInitialized:function(e){return Object.prototype.hasOwnProperty.call(this.__ATTRS__,e)}},t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return"ae-arrow-box ae-arrow-box-bottom"},o={table:r};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a={left:0,top:0},l=function(e,t){var n=o.default.findDOMNode(e),r=e.context.editor.get("nativeEditor"),i=r.config.uiNode||document.body,l=getComputedStyle(i),s=parseInt(l.getPropertyValue("margin-left"),10),u=parseInt(l.getPropertyValue("margin-right"),10),c=s+i.clientWidth+u,f=n.offsetWidth/2,d=new CKEDITOR.dom.window(window).getScrollPosition(),p=e.props.gutter||a,h=e.getWidgetXYPoint(t.left+t.width/2-d.x,t.top+d.y,CKEDITOR.SELECTION_BOTTOM_TO_TOP),m=[t.left+t.width/2-f-d.x,t.top-n.offsetHeight+d.y-p.top];m[0]<0?m[0]=0:m[0]>c-n.offsetWidth&&(m[0]=c-n.offsetWidth),e.moveToPoint(h,m)},s=function(e){var t=e.selectionData?e.selectionData:e.editorEvent?e.editorEvent.data.selectionData:null;if(t&&t.element){var n=e.editor.get("nativeEditor"),r=n.config.uiNode,o=r?r.scrollTop:0,i=t.element.getClientRect();return i.top+=o,l(this,i),!0}},u=function(e){var t=e.editor.get("nativeEditor"),n=t.config.uiNode,r=n?n.scrollTop:0,o=new CKEDITOR.Table(t).getFromSelection(),i=o.getClientRect();return i.top+=r,l(this,i),!0},c={image:s,table:u};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(38),o=u(r),i=n(39),a=u(i),l=n(22),s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}var c=[{name:"embed",buttons:["embedRemove","embedEdit"],test:s.default.embed},{name:"embedUrl",buttons:["embedVideo","embedVideoEdit"],test:s.default.embedUrl},{name:"link",buttons:["linkEdit"],test:s.default.link},{name:"image",buttons:["imageLeft","imageCenter","imageRight","removeImage"],setPosition:a.default.image,test:s.default.image},{name:"text",buttons:{full:[["Font","FontSize","separator","bold","italic","underline","strike","separator","link"],["paragraphAlign","separator","ul","ol","separator","h1","h2","separator","indentBlock","outdentBlock","separator","TextColor","BGColor","separator","code","quote","separator","removeFormat"]],simple:["styles","bold","italic","underline","link"]},test:s.default.text},{name:"table",buttons:["tableHeading","tableRow","tableColumn","tableCell","tableRemove"],getArrowBoxClasses:o.default.table,setPosition:a.default.table,test:s.default.table}];t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embedurl=void 0,n(119),n(120),n(121),n(122),n(123),n(124),n(125);var r=n(127),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}n(130),n(131),n(132),n(133),n(134),n(135),t.embedurl=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBridgeButton=t.regexBasePath=t.loadLanguageResources=t.implementEventTarget=t.getUrl=t.getButtons=t.getBasePath=t.editable=t.Toolbars=t.Selections=t.SelectionTest=t.SelectionSetPosition=t.SelectionGetArrowBoxClasses=t.OOP=t.Lang=t.Core=t.Compat=t.Buttons=t.Base=t.Attribute=void 0;var r=n(43),o=S(r),i=n(44),a=x(i),l=n(93),s=S(l),u=n(107),c=x(u),f=n(37),d=x(f),p=n(5),h=x(p),m=n(21),y=x(m),g=n(38),b=x(g),v=n(39),_=x(v),E=n(22),O=x(E),w=n(40),C=x(w),k=n(110),T=x(k);function x(e){return e&&e.__esModule?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n(41);var P={},I=function(e,t){return t=t||{},t.srcNode=e,AlloyEditor.implementEventTarget(),new T.default(t)},D=function(){var e=window.ALLOYEDITOR_BASEPATH||"";if(!e)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var r=t[n].src.match(AlloyEditor.regexBasePath);if(r){e=r[1];break}}if(-1===e.indexOf(":/")&&"//"!==e.slice(0,2)&&(e=0===e.indexOf("/")?location.href.match(/^.*?:\/\/[^/]*/)[0]+e:location.href.match(/^[^?]*\/(?:)/)[0]+e),!e)throw new Error('The AlloyEditor installation path could not be automatically detected. Please set the global variable "ALLOYEDITOR_BASEPATH" before creating editor instances.');return e},R=function(e){if(AlloyEditor.implementEventTarget(),h.default.isFunction(e)&&(AlloyEditor.Strings?setTimeout(e,0):AlloyEditor.once("languageResourcesLoaded",function(){setTimeout(e,0)})),!AlloyEditor._langResourceRequested){AlloyEditor._langResourceRequested=!0;var t=["af","ar","bg","bn","bs","ca","cs","cy","da","de","el","en-au","en-ca","en-gb","en","eo","es","et","eu","fa","fi","fo","fr-ca","fr","gl","gu","he","hi","hr","hu","id","is","it","ja","ka","km","ko","ku","lt","lv","mk","mn","ms","nb","nl","no","pl","pt-br","pt","ro","ru","si","sk","sl","sq","sr-latn","sr","sv","th","tr","tt","ug","uk","vi","zh-cn","zh"],n=navigator.language||navigator.userLanguage||"en",r=n.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),o=r[1],i=r[2];t.indexOf(o+"-"+i)>=0?o=o+"-"+i:-1===t.indexOf(o)&&(o="en"),CKEDITOR.scriptLoader.load(AlloyEditor.getUrl("lang/alloy-editor/"+o+".js"),function(e){e&&AlloyEditor.fire("languageResourcesLoaded")},this)}},j=function(e){var t=AlloyEditor.getBasePath();return-1===e.indexOf(":/")&&0!==e.indexOf("/")&&(e=t+e),CKEDITOR.timestamp&&"/"!==e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(e.indexOf("?")>=0?"&":"?")+"t="+CKEDITOR.timestamp),e},A=function(){AlloyEditor.fire||AlloyEditor.on||CKEDITOR.event.implementOn(AlloyEditor)},K=/(^|.*[\\/])(?:alloy-editor[^/]+|alloy-editor)\.js(?:\?.*|;.*)?$/i,M=function(e){return function(){return e.reduce(function(e,t){return t=P[t]||[t],e.concat(t)},[])}},N=function(e,t){P[t]||(P[t]=[]),P[t].push(e)},L={extend:y.default};t.Attribute=d.default,t.Base=o,t.Buttons=a.default,t.Compat=s,t.Core=T.default,t.Lang=h.default,t.OOP=L,t.SelectionGetArrowBoxClasses=b.default,t.SelectionSetPosition=_.default,t.SelectionTest=O.default,t.Selections=C.default,t.Toolbars=c.default,t.editable=I,t.getBasePath=D,t.getButtons=M,t.getUrl=j,t.implementEventTarget=A,t.loadLanguageResources=R,t.regexBasePath=K,t.registerBridgeButton=N},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14);Object.defineProperty(t,"ButtonActionStyle",{enumerable:!0,get:function(){return h(r).default}});var o=n(9);Object.defineProperty(t,"ButtonCommandActive",{enumerable:!0,get:function(){return h(o).default}});var i=n(3);Object.defineProperty(t,"ButtonCommand",{enumerable:!0,get:function(){return h(i).default}});var a=n(11);Object.defineProperty(t,"ButtonKeystroke",{enumerable:!0,get:function(){return h(a).default}});var l=n(19);Object.defineProperty(t,"ButtonProps",{enumerable:!0,get:function(){return h(l).default}});var s=n(4);Object.defineProperty(t,"ButtonStateClasses",{enumerable:!0,get:function(){return h(s).default}});var u=n(7);Object.defineProperty(t,"ButtonStyle",{enumerable:!0,get:function(){return h(u).default}});var c=n(20);Object.defineProperty(t,"ToolbarButtons",{enumerable:!0,get:function(){return h(c).default}});var f=n(16);Object.defineProperty(t,"WidgetDropdown",{enumerable:!0,get:function(){return h(f).default}});var d=n(17);Object.defineProperty(t,"WidgetExclusive",{enumerable:!0,get:function(){return h(d).default}});var p=n(10);function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"WidgetFocusManager",{enumerable:!0,get:function(){return h(p).default}})},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),i=Ot(o),a=n(46),l=Ot(a),s=n(49),u=Ot(s),c=n(26),f=Ot(c),d=n(50),p=Ot(d),h=n(51),m=Ot(h),y=n(52),g=Ot(y),b=n(27),v=Ot(b),_=n(13),E=Ot(_),O=n(12),w=Ot(O),C=n(28),k=Ot(C),T=n(29),x=Ot(T),S=n(53),P=Ot(S),I=n(54),D=Ot(I),R=n(55),j=Ot(R),A=n(56),K=Ot(A),M=n(57),N=Ot(M),L=n(58),F=Ot(L),B=n(59),z=Ot(B),H=n(60),$=Ot(H),U=n(61),W=Ot(U),q=n(62),V=Ot(q),G=n(63),Y=Ot(G),X=n(64),J=Ot(X),Z=n(65),Q=Ot(Z),ee=n(66),te=Ot(ee),ne=n(30),re=Ot(ne),oe=n(67),ie=Ot(oe),ae=n(31),le=Ot(ae),se=n(18),ue=Ot(se),ce=n(32),fe=Ot(ce),de=n(34),pe=Ot(de),he=n(68),me=Ot(he),ye=n(69),ge=Ot(ye),be=n(70),ve=Ot(be),_e=n(71),Ee=Ot(_e),Oe=n(72),we=Ot(Oe),Ce=n(73),ke=Ot(Ce),Te=n(74),xe=Ot(Te),Se=n(75),Pe=Ot(Se),Ie=n(76),De=Ot(Ie),Re=n(77),je=Ot(Re),Ae=n(78),Ke=Ot(Ae),Me=n(79),Ne=Ot(Me),Le=n(80),Fe=Ot(Le),Be=n(23),ze=Ot(Be),He=n(24),$e=Ot(He),Ue=n(25),We=Ot(Ue),qe=n(15),Ve=Ot(qe),Ge=n(81),Ye=Ot(Ge),Xe=n(82),Je=Ot(Xe),Ze=n(83),Qe=Ot(Ze),et=n(84),tt=Ot(et),nt=n(85),rt=Ot(nt),ot=n(35),it=Ot(ot),at=n(86),lt=Ot(at),st=n(87),ut=Ot(st),ct=n(88),ft=Ot(ct),dt=n(89),pt=Ot(dt),ht=n(33),mt=Ot(ht),yt=n(90),gt=Ot(yt),bt=n(91),vt=Ot(bt),_t=n(92),Et=Ot(_t);function Ot(e){return e&&e.__esModule?e:{default:e}}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=(r={},wt(r,i.default.key,i.default),wt(r,l.default.key,l.default),wt(r,u.default.key,u.default),wt(r,f.default.key,f.default),wt(r,p.default.key,p.default),wt(r,m.default.key,m.default),wt(r,g.default.key,g.default),wt(r,v.default.key,v.default),wt(r,E.default.key,E.default),wt(r,w.default.key,w.default),wt(r,k.default.key,k.default),wt(r,D.default.key,D.default),wt(r,x.default.key,x.default),wt(r,P.default.key,P.default),wt(r,j.default.key,j.default),wt(r,K.default.key,K.default),wt(r,N.default.key,N.default),wt(r,F.default.key,F.default),wt(r,z.default.key,z.default),wt(r,$.default.key,$.default),wt(r,W.default.key,W.default),wt(r,V.default.key,V.default),wt(r,Y.default.key,Y.default),wt(r,J.default.key,J.default),wt(r,Q.default.key,Q.default),wt(r,te.default.key,te.default),wt(r,re.default.key,re.default),wt(r,ie.default.key,ie.default),wt(r,le.default.key,le.default),wt(r,ue.default.key,ue.default),wt(r,fe.default.key,fe.default),wt(r,pe.default.key,pe.default),wt(r,me.default.key,me.default),wt(r,ge.default.key,ge.default),wt(r,we.default.key,we.default),wt(r,ve.default.key,ve.default),wt(r,Ee.default.key,Ee.default),wt(r,ke.default.key,ke.default),wt(r,xe.default.key,xe.default),wt(r,Pe.default.key,Pe.default),wt(r,De.default.key,De.default),wt(r,je.default.key,je.default),wt(r,Ke.default.key,Ke.default),wt(r,Ne.default.key,Ne.default),wt(r,Fe.default.key,Fe.default),wt(r,ze.default.key,ze.default),wt(r,$e.default.key,$e.default),wt(r,We.default.key,We.default),wt(r,Ve.default.key,Ve.default),wt(r,Ye.default.key,Ye.default),wt(r,Je.default.key,Je.default),wt(r,Qe.default.key,Qe.default),wt(r,tt.default.key,tt.default),wt(r,rt.default.key,rt.default),wt(r,it.default.key,it.default),wt(r,lt.default.key,lt.default),wt(r,ut.default.key,ut.default),wt(r,ft.default.key,ft.default),wt(r,pt.default.key,pt.default),wt(r,mt.default.key,mt.default),wt(r,gt.default.key,gt.default),wt(r,vt.default.key,vt.default),wt(r,Et.default.key,Et.default),r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(6),l=d(a),s=n(2),u=d(s),c=n(1),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(e){p(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));g.call(n);var r=e.context.editor.get("nativeEditor").getSelection(),o=r.getSelectedElement()||r.getStartElement();n._element=o;var i=n._element.findOne("img"),a=i?i.getAttribute("alt"):n._element.getAttribute("alt");return n.state={imageAlt:a},n}return m(t,e),r(t,[{key:"render",value:function(){return this.props.renderExclusive?i.default.createElement("div",{className:"ae-container-edit-link"},i.default.createElement("div",{className:"ae-container-input xxl"},i.default.createElement("input",{"aria-label":"alt",className:"ae-input",onChange:this._handleAltChange,onKeyDown:this._handleKeyDown,placeholder:"alt",ref:"refAltInput",title:"alt",type:"text",value:this.state.imageAlt})),i.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",onClick:this._updateImageAlt,title:AlloyEditor.Strings.confirm},i.default.createElement(f.default,{symbol:"check"}))):i.default.createElement("button",{className:"ae-button",onClick:this._requestExclusive,tabIndex:this.props.tabIndex},i.default.createElement("small",{className:"ae-icon small"},"Alt"))}},{key:"_focusAltInput",value:function(){var e=this,t=function(){l.default.findDOMNode(e.refs.refAltInput).focus()};window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,0)}}]),t}(i.default.Component);y.contextType=u.default,y.key="imageAlt";var g=function(){var e=this;this._handleAltChange=function(t){e.setState({imageAlt:t.target.value}),e._focusAltInput()},this._handleKeyDown=function(t){13===t.keyCode&&(t.preventDefault(),e._updateImageAlt())},this._requestExclusive=function(){e.props.requestExclusive(y.key)},this._updateImageAlt=function(){var t=e.context.editor.get("nativeEditor"),n=e.refs.refAltInput.value;e.setState({imageAlt:n});var r=e._element.findOne("img"),o=r||e._element;o.setAttribute("alt",n),t.fire("actionPerformed",e),e.props.cancelExclusive()}};t.default=u.default.toProps(y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),i=h(o),a=n(0),l=h(a),s=n(2),u=h(s),c=n(1),f=h(c),d=n(15),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e=this,t=AlloyEditor.Strings.normal,n="",r=this._getColors(),o={element:"span",attributes:{class:""}};r.forEach(function(r){o.attributes.class=r.styleClass,e._checkActive(o)&&(t=r.name,n=r.style.attributes.class)});var i=this.props,a=i.expanded,s=i.tabIndex,u=i.toggleDropdown,c={activeStyle:t,onDismiss:u,showRemoveStylesItem:!1,styles:r};return l.default.createElement("div",{className:"ae-container ae-has-dropdown"},l.default.createElement("button",{"aria-expanded":a,className:"ae-toolbar-element",onClick:u,role:"combobox",tabIndex:s},l.default.createElement("span",{className:n},l.default.createElement(f.default,{symbol:"textbox"}))),a&&l.default.createElement(p.default,c))}},{key:"_applyStyle",value:function(e){var t=this,n=this.context.editor.get("nativeEditor"),r={element:"span",attributes:{class:e}};n.getSelection().lock(),this._getColors().forEach(function(e){r.attributes.class=e.styleClass,t._checkActive(r)&&n.removeStyle(new CKEDITOR.style(r))}),r.attributes.class=e;var o=new CKEDITOR.style(r);n.applyStyle(o),n.getSelection().unlock(),n.fire("actionPerformed",this)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor");e=CKEDITOR.tools.merge({element:"span"},e);var n=new CKEDITOR.style(e);return n.checkActive(t.elementPath(),t)}},{key:"_getColors",value:function(){return this.props.styles||[{name:AlloyEditor.Strings.normal,style:{element:"span",attributes:{class:"text-body"}},styleClass:"",styleFn:this._applyStyle.bind(this,"")},{name:AlloyEditor.Strings.primary,style:{element:"span",attributes:{class:"text-primary"}},styleClass:"bg-primary",styleFn:this._applyStyle.bind(this,"bg-primary")},{name:AlloyEditor.Strings.disabled,style:{element:"span",attributes:{class:"text-secondary"}},styleClass:"bg-secondary",styleFn:this._applyStyle.bind(this,"bg-secondary")},{name:AlloyEditor.Strings.success,style:{element:"span",attributes:{class:"text-success"}},styleClass:"bg-success",styleFn:this._applyStyle.bind(this,"bg-success")},{name:AlloyEditor.Strings.danger,style:{element:"span",attributes:{class:"text-danger"}},styleClass:"bg-danger",styleFn:this._applyStyle.bind(this,"bg-danger")},{name:AlloyEditor.Strings.warning,style:{element:"span",attributes:{class:"text-warning"}},styleClass:"bg-warning",styleFn:this._applyStyle.bind(this,"bg-warning")},{name:AlloyEditor.Strings.info,style:{element:"span",attributes:{class:"text-info"}},styleClass:"bg-info",styleFn:this._applyStyle.bind(this,"bg-info")}]}}]),t}(l.default.Component);b.contextType=u.default,b.key="backgroundColor",b.propTypes={expanded:i.default.bool,label:i.default.string,showRemoveStylesItem:i.default.bool,styles:i.default.arrayOf(i.default.object),tabIndex:i.default.number,toggleDropdown:i.default.func},t.default=b},function(e,t,n){"use strict";var r=n(48);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=y(o),a=n(3),l=y(a),s=n(11),u=y(s),c=n(4),f=y(c),d=n(7),p=y(d),h=n(1),m=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(){return g(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),r(t,[{key:"render",value:function(){var e="ae-button  "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.bold,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-bold",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.bold},i.default.createElement(m.default,{symbol:"bold"}))}}]),t}(i.default.Component);_.defaultProps={command:"bold",keystroke:{fn:"execCommand",keys:CKEDITOR.CTRL+66,name:"bold"},style:"coreStyles_bold"},_.key="bold",t.default=(0,l.default)((0,u.default)((0,f.default)((0,p.default)(_))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(26),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"render",value:function(){if(this.props.renderExclusive)return i.default.createElement(l.default,this.props);var e=!(navigator.getUserMedia||navigator.webkitGetUserMedia&&"https"===location.protocol||navigator.mozGetUserMedia||navigator.msGetUserMedia),n=e?AlloyEditor.Strings.cameraDisabled:AlloyEditor.Strings.camera;return i.default.createElement("button",{"aria-label":n,className:"ae-button","data-type":"button-image-camera",disabled:e,onClick:this.props.requestExclusive.bind(t.key),tabIndex:this.props.tabIndex,title:n},i.default.createElement(u.default,{symbol:"camera"}))}}]),t}(i.default.Component);h.key="camera",t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(14),l=h(a),s=n(4),u=h(s),c=n(7),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.code,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-code",onClick:this.applyStyle,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.code},i.default.createElement(p.default,{symbol:"code"}))}}]),t}(i.default.Component);b.defaultProps={style:{element:"pre"}},b.key="code",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),i=h(o),a=n(0),l=h(a),s=n(2),u=h(s),c=n(1),f=h(c),d=n(15),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e=this,t=AlloyEditor.Strings.normal,n=this._getColors();n.some(function(n){e._checkActive(n.style)&&(t=n.name)});var r=this.props,o=r.expanded,i=r.tabIndex,a=r.toggleDropdown,s={activeStyle:t,onDismiss:a,showRemoveStylesItem:!1,styles:n};return l.default.createElement("div",{className:"ae-container ae-has-dropdown"},l.default.createElement("button",{"aria-expanded":o,className:"ae-toolbar-element",onClick:a,role:"combobox",tabIndex:i},l.default.createElement("span",null,l.default.createElement(f.default,{symbol:"color-picker"}))),o&&l.default.createElement(p.default,s))}},{key:"_applyStyle",value:function(e){var t=this,n=this.context.editor.get("nativeEditor"),r={element:"span",attributes:{class:e}},o=new CKEDITOR.style(r);n.getSelection().lock(),this._getColors().forEach(function(e){t._checkActive(e.style)&&n.removeStyle(new CKEDITOR.style(e.style))}),n.applyStyle(o),n.getSelection().unlock(),n.fire("actionPerformed",this)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor");e=CKEDITOR.tools.merge({element:"span"},e);var n=new CKEDITOR.style(e);return n.checkActive(t.elementPath(),t)}},{key:"_getColors",value:function(){return this.props.styles||[{name:AlloyEditor.Strings.primary,style:{element:"span",attributes:{class:"text-primary"}},styleFn:this._applyStyle.bind(this,"text-primary")},{name:AlloyEditor.Strings.success,style:{element:"span",attributes:{class:"text-success"}},styleFn:this._applyStyle.bind(this,"text-success")},{name:AlloyEditor.Strings.danger,style:{element:"span",attributes:{class:"text-danger"}},styleFn:this._applyStyle.bind(this,"text-danger")},{name:AlloyEditor.Strings.warning,style:{element:"span",attributes:{class:"text-warning"}},styleFn:this._applyStyle.bind(this,"text-warning")},{name:AlloyEditor.Strings.info,style:{element:"span",attributes:{class:"text-info"}},styleFn:this._applyStyle.bind(this,"text-info")},{name:AlloyEditor.Strings.dark,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-dark")},{name:AlloyEditor.Strings.darkGray,style:{element:"span",attributes:{class:"text-gray-dark"}},styleFn:this._applyStyle.bind(this,"text-gray-dark")},{name:AlloyEditor.Strings.secondary,style:{element:"span",attributes:{class:"text-secondary"}},styleFn:this._applyStyle.bind(this,"text-secondary")},{name:AlloyEditor.Strings.light,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-light")},{name:AlloyEditor.Strings.lighter,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-lighter")},{name:AlloyEditor.Strings.white,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-white")}]}}]),t}(l.default.Component);b.contextType=u.default,b.key="color",b.propTypes={expanded:i.default.bool,label:i.default.string,showRemoveStylesItem:i.default.bool,styles:i.default.arrayOf(i.default.object),tabIndex:i.default.number,toggleDropdown:i.default.func},t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),i=d(o),a=n(0),l=d(a),s=n(29),u=d(s),c=n(1),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),r(t,[{key:"render",value:function(){return this.props.renderExclusive?l.default.createElement(u.default,this.props):l.default.createElement("button",{"aria-label":AlloyEditor.Strings.video,className:"ae-button","data-type":"button-embed-video",onClick:this.props.requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.video},l.default.createElement(f.default,{symbol:"video"}))}}]),t}(l.default.Component);y.key="embedVideo",y.propTypes={label:i.default.string,tabIndex:i.default.number},t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(11),l=d(a),s=n(28),u=d(s),c=n(1),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){var e,n,r,o;p(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r._requestExclusive=function(){r.props.requestExclusive(t.key)},o=n,h(r,o)}return m(t,e),r(t,[{key:"render",value:function(){return this.props.renderExclusive?i.default.createElement(u.default,this.props):i.default.createElement("button",{"aria-label":AlloyEditor.Strings.link,className:"ae-button","data-type":"button-embed",onClick:this._requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.link},i.default.createElement(f.default,{symbol:"plus"}))}}]),t}(i.default.Component);y.defaultProps={keystroke:{fn:"_requestExclusive",keys:CKEDITOR.CTRL+CKEDITOR.SHIFT+76,name:"embed"}},y.key="embed",t.default=(0,l.default)(y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(14),l=h(a),s=n(4),u=h(s),c=n(7),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.h1,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-h1",onClick:this.applyStyle,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.h1},i.default.createElement(p.default,{symbol:"h1"}))}}]),t}(i.default.Component);b.defaultProps={style:{element:"h1"}},b.key="h1",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(14),l=h(a),s=n(4),u=h(s),c=n(7),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.h2,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-h2",onClick:this.applyStyle,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.h2},i.default.createElement(p.default,{symbol:"h2"}))}}]),t}(i.default.Component);b.defaultProps={style:{element:"h2"}},b.key="h2",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(3),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.horizontalrule,className:"ae-button","data-type":"button-hline",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.horizontalrule},i.default.createElement(u.default,{symbol:"hr"}))}}]),t}(i.default.Component);h.defaultProps={command:"horizontalrule"},h.key="hline",t.default=(0,l.default)(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(9),u=h(s),c=n(4),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignCenter,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-center",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignCenter},i.default.createElement(p.default,{symbol:"align-image-center"}))}}]),t}(i.default.Component);b.defaultProps={command:"justifycenter"},b.key="imageCenter",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(9),u=h(s),c=n(4),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignLeft,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-left",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignLeft},i.default.createElement(p.default,{symbol:"align-image-left"}))}}]),t}(i.default.Component);b.defaultProps={command:"justifyleft"},b.key="imageLeft",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(9),u=h(s),c=n(4),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignRight,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-right",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignRight},i.default.createElement(p.default,{symbol:"align-image-right"}))}}]),t}(i.default.Component);b.defaultProps={command:"justifyright"},b.key="imageRight",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(2),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=function(){n.fileInput.current.click()},n._onInputChange=function(){var e=n.fileInput.current;if(e.files.length){var t=new FileReader,r=e.files[0];t.onload=function(e){var t=n.context.editor.get("nativeEditor"),o=t.fire("beforeImageAdd",{imageFiles:r});if(o){var i=CKEDITOR.dom.element.createFromHtml('<img src="'+e.target.result+'">');t.insertElement(i),t.fire("actionPerformed",n);var a={el:i,file:r};t.fire("imageAdd",a)}},t.readAsDataURL(r),e.value=""}},n.fileInput=i.default.createRef(),n}return p(t,e),r(t,[{key:"render",value:function(){var e={display:"none"};return i.default.createElement("div",null,i.default.createElement("button",{"aria-label":AlloyEditor.Strings.image,className:"ae-button","data-type":"button-image",onClick:this.handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.image},i.default.createElement(u.default,{symbol:"document-image"})),i.default.createElement("input",{accept:"image/*",onChange:this._onInputChange,ref:this.fileInput,style:e,type:"file"}))}}]),t}(i.default.Component);h.contextType=l.default,h.key="imageFromFile",t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(9),u=h(s),c=n(4),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.indent,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-indent-block",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.indent},i.default.createElement(p.default,{symbol:"indent-less"}))}}]),t}(i.default.Component);b.defaultProps={command:"indent"},b.key="indentBlock",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=y(o),a=n(3),l=y(a),s=n(11),u=y(s),c=n(4),f=y(c),d=n(7),p=y(d),h=n(1),m=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(){return g(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.italic,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-italic",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.italic},i.default.createElement(m.default,{symbol:"italic"}))}}]),t}(i.default.Component);_.defaultProps={command:"italic",keystroke:{fn:"execCommand",keys:CKEDITOR.CTRL+73,name:"italic"},style:"coreStyles_italic"},_.key="italic",t.default=(0,l.default)((0,u.default)((0,f.default)((0,p.default)(_))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(3),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){var e,n,r,o;f(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r._handleClick=function(){r.execCommand(null)},o=n,d(r,o)}return p(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.audio,className:"ae-button","data-type":"button-audio",onClick:this._handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.audio},i.default.createElement(u.default,{symbol:"audio"}))}}]),t}(i.default.Component);h.defaultProps={command:"audioselector"},h.key="audio",t.default=(0,l.default)(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(3),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){var e,n,r,o;f(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r._handleClick=function(){r.execCommand(null)},o=n,d(r,o)}return p(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.image,className:"ae-button","data-type":"button-image",onClick:this._handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.image},i.default.createElement(u.default,{symbol:"picture"}))}}]),t}(i.default.Component);h.defaultProps={command:"imageselector"},h.key="image",t.default=(0,l.default)(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(3),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){var e,n,r,o;f(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r._handleClick=function(){r.execCommand(null)},o=n,d(r,o)}return p(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.video,className:"ae-button","data-type":"button-video",onClick:this._handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.video},i.default.createElement(u.default,{symbol:"video"}))}}]),t}(i.default.Component);h.defaultProps={command:"videoselector"},h.key="video",t.default=(0,l.default)(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),i=y(o),a=n(0),l=y(a),s=n(11),u=y(s),c=n(19),f=y(c),d=n(31),p=y(d),h=n(34),m=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(){return g(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),r(t,[{key:"render",value:function(){return this.props.renderExclusive?(this.props=this.mergeButtonCfgProps(),l.default.createElement(p.default,this.props)):l.default.createElement(m.default,this.props)}},{key:"_requestExclusive",value:function(){this.props.requestExclusive(t.key)}}]),t}(l.default.Component);_.defaultProps={keystroke:{fn:"_requestExclusive",keys:CKEDITOR.CTRL+76,name:"linkBrowse"}},_.key="linkBrowse",_.propTypes={label:i.default.string,tabIndex:i.default.number},t.default=(0,f.default)((0,u.default)(_))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(3),l=d(a),s=n(4),u=d(s),c=n(7),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.numberedlist,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-ol",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.numberedlist},i.default.createElement("span",null,i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:{fill:"currentColor"},width:"17",height:"17"},i.default.createElement("path",{d:"M5.495 142.993c0-6.444 3.401-9.847 9.847-9.847h17.365V79.798c0-4.834.179-9.847.179-9.847h-.359s-1.79 3.939-3.938 5.729l-1.611 1.432c-4.655 4.298-9.489 4.117-13.786-.537l-4.654-5.013c-4.475-4.654-4.297-9.486.358-13.962l22.2-20.767C34.854 33.432 38.256 32 43.268 32h10.205c6.444 0 9.846 3.4 9.846 9.846v91.301h17.544c6.444 0 9.847 3.402 9.847 9.847v7.162c0 6.443-3.402 9.846-9.847 9.846H15.341c-6.445 0-9.847-3.402-9.847-9.846v-7.163zm-1.776 163.45c0-46.482 54.405-54.757 54.405-72.891 0-8.803-7.044-12.501-13.558-12.501-5.634 0-10.387 2.993-13.381 6.163-4.402 4.225-8.98 5.986-13.733 2.112l-6.866-5.458c-4.93-3.874-6.163-8.275-2.465-13.029C14.284 202.74 26.432 192 47.384 192c20.599 0 42.96 11.796 42.96 38.559 0 39.263-50.883 46.834-52.467 63.031h44.72c6.339 0 9.684 3.346 9.684 9.684v7.044c0 6.337-3.345 9.683-9.684 9.683H14.108c-5.986 0-10.388-3.346-10.388-9.683v-3.875zm2.875 149.436l4.754-7.747c3.345-5.457 7.746-5.81 13.204-2.464 4.754 2.64 10.917 5.281 17.959 5.281 11.445 0 17.959-5.634 17.959-12.501 0-9.859-9.86-13.909-23.417-13.909h-.704c-5.634 0-8.451-1.761-10.916-6.691l-.881-1.761c-2.112-4.049-1.233-8.451 2.289-12.5l11.445-13.91c5.986-7.219 10.917-11.797 10.917-11.797v-.352s-4.049.88-11.973.88H16.805c-6.338 0-9.683-3.344-9.683-9.683v-7.043c0-6.339 3.345-9.683 9.683-9.683h60.039c6.338 0 9.684 3.344 9.684 9.507v2.817c0 4.93-1.233 8.276-4.402 11.973l-21.128 24.298c18.663 4.049 30.459 18.838 30.459 36.445C91.458 458.52 76.316 480 44.8 480c-17.078 0-29.051-5.986-36.094-10.739-4.93-3.522-5.281-8.276-2.112-13.382zM512 108V84a6 6 0 0 0-6-6H134a6 6 0 0 0-6 6v24a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6zm0 160v-24a6 6 0 0 0-6-6H134a6 6 0 0 0-6 6v24a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6zm0 160v-24a6 6 0 0 0-6-6H134a6 6 0 0 0-6 6v24a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6z"}))))}}]),t}(i.default.Component);y.defaultProps={command:"numberedlist",style:{element:"ol"}},y.key="ol",t.default=(0,l.default)((0,u.default)((0,f.default)(y)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(9),u=h(s),c=n(4),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.outdent,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-outdent-block",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.outdent},i.default.createElement(p.default,{symbol:"indent-more"}))}}]),t}(i.default.Component);b.defaultProps={command:"outdent"},b.key="outdentBlock",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(9),u=h(s),c=n(4),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignLeft,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-align-left",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignLeft},i.default.createElement(p.default,{symbol:"align-left"}))}}]),t}(i.default.Component);b.defaultProps={command:"justifyleft"},b.key="paragraphLeft",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(9),u=h(s),c=n(4),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignRight,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-align-right",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignRight},i.default.createElement(p.default,{symbol:"align-right"}))}}]),t}(i.default.Component);b.defaultProps={command:"justifyright"},b.key="paragraphRight",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(2),l=d(a),s=n(13),u=d(s),c=n(1),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),r(t,[{key:"render",value:function(){var e=void 0,n=void 0;this.props.expanded&&(n=t.key+"List",e=i.default.createElement(u.default,{commands:this._getCommands(),inlineIcons:!1,listId:n,onDismiss:this.props.toggleDropdown}));var r=this.context.editor.get("nativeEditor"),o=this._getCommands().filter(function(e){var t=r.getCommand(e.command);return!!t&&t.state===CKEDITOR.TRISTATE_ON}).pop(),a=o.icon;return i.default.createElement("div",{className:"ae-container-dropdown ae-container-dropdown-xsmall ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":o.label,"aria-owns":n,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.row},i.default.createElement("div",{className:"ae-container"},i.default.createElement(f.default,{symbol:a}),i.default.createElement(f.default,{symbol:"caret-bottom"}))),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"justifyleft",icon:"align-left",label:AlloyEditor.Strings.alignLeft},{command:"justifycenter",icon:"align-center",label:AlloyEditor.Strings.alignCenter},{command:"justifyright",icon:"align-right",label:AlloyEditor.Strings.alignRight},{command:"justifyblock",icon:"align-justify",label:AlloyEditor.Strings.alignJustify}]}}]),t}(i.default.Component);y.contextType=l.default,y.key="paragraphAlign",t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(9),u=h(s),c=n(4),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignCenter,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-center",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignCenter},i.default.createElement(p.default,{symbol:"align-center"}))}}]),t}(i.default.Component);b.defaultProps={command:"justifycenter"},b.key="paragraphCenter",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(9),u=h(s),c=n(4),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignJustify,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-justify",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignJustify},i.default.createElement(p.default,{symbol:"align-justify"}))}}]),t}(i.default.Component);b.defaultProps={command:"justifyblock"},b.key="paragraphJustify",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(4),u=h(s),c=n(7),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.quote,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-quote",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.quote},i.default.createElement(p.default,{symbol:"quote-right"}))}}]),t}(i.default.Component);b.defaultProps={command:"blockquote",style:{element:"blockquote"}},b.key="quote",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(3),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.removeformat,className:"ae-button","data-type":"button-removeformat",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.removeformat},i.default.createElement(u.default,{symbol:"remove-style"}))}}]),t}(i.default.Component);h.defaultProps={command:"removeFormat"},h.key="removeFormat",t.default=(0,l.default)(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(3),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.removeImage,"aria-pressed":!1,className:"ae-button",onClick:this.execCommand,title:AlloyEditor.Strings.removeImage},i.default.createElement(u.default,{symbol:"times-circle"}))}}]),t}(i.default.Component);h.defaultProps={command:"removeImage"},h.key="removeImage",t.default=(0,l.default)(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return o.default.createElement("span",{className:"ae-separator"})}a.key="separator",t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),i=h(o),a=n(0),l=h(a),s=n(2),u=h(s),c=n(1),f=h(c),d=n(15),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e=this,t="1.0x",n=this._getSpacings();n.forEach(function(n){e._checkActive(n.style)&&(t=n.name)});var r=this.props,o=r.editor,i=r.expanded,a=r.tabIndex,s=r.toggleDropdown,u={activeStyle:t,editor:o,onDismiss:s,showRemoveStylesItem:!1,styles:n};return l.default.createElement("div",{className:"ae-container ae-container-dropdown-small ae-has-dropdown"},l.default.createElement("button",{"aria-expanded":i,className:"ae-toolbar-element",onClick:s,role:"combobox",tabIndex:a},l.default.createElement("span",null,l.default.createElement(f.default,{symbol:"separator"}),"",t)),i&&l.default.createElement(p.default,u))}},{key:"_applyStyle",value:function(e){var t=this,n=this.context.editor.get("nativeEditor"),r={element:"div",attributes:{class:e}},o=new CKEDITOR.style(r);n.getSelection().lock(),this._getSpacings().forEach(function(e){t._checkActive(e.style)&&n.removeStyle(new CKEDITOR.style(e.style))}),n.applyStyle(o),n.getSelection().unlock(),n.fire("actionPerformed",this)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor"),n=!0,r=t.elementPath();return r&&r.lastElement?e.attributes.class.split(" ").forEach(function(e){n=n&&r.lastElement.hasClass(e)}):n=!1,n}},{key:"_getSpacings",value:function(){return this.props.styles||[{name:"1.0x",style:{element:"div",attributes:{class:""},type:1},styleFn:this._applyStyle.bind(this,"")},{name:"1.5x",style:{element:"div",attributes:{class:"mt-1 mb-1"},type:1},styleFn:this._applyStyle.bind(this,"mt-1 mb-1")},{name:"2.0x",style:{element:"div",attributes:{class:"mt-2 mb-2"},type:1},styleFn:this._applyStyle.bind(this,"mt-2 mb-2")},{name:"3.0x",style:{element:"div",attributes:{class:"mt-3 mb-3"},type:1},styleFn:this._applyStyle.bind(this,"mt-3 mb-3")},{name:"4.0x",style:{element:"div",attributes:{class:"mt-4 mb-4"},type:1},styleFn:this._applyStyle.bind(this,"mt-4 mb-4")},{name:"5.0x",style:{element:"div",attributes:{class:"mt-5 mb-5"},type:1},styleFn:this._applyStyle.bind(this,"mt-5 mb-5")}]}}]),t}(l.default.Component);b.contextType=u.default,b.key="spacing",b.propTypes={expanded:i.default.bool,label:i.default.string,showRemoveStylesItem:i.default.bool,styles:i.default.arrayOf(i.default.object),tabIndex:i.default.number,toggleDropdown:i.default.func},t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(4),u=h(s),c=n(7),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.strike,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-strike",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.strike},i.default.createElement(p.default,{symbol:"strikethrough"}))}}]),t}(i.default.Component);b.defaultProps={command:"strike",style:"coreStyles_strike"},b.key="strike",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(2),l=d(a),s=n(1),u=d(s),c=n(15),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),r(t,[{key:"render",value:function(){var e=this,t=AlloyEditor.Strings.normal,n=this._getStyles();n.forEach(function(n){e._checkActive(n.style)&&(t=n.name)});var r=void 0;return this.props.expanded&&(r=i.default.createElement(f.default,{activeStyle:t,onDismiss:this.props.toggleDropdown,showRemoveStylesItem:this.props.showRemoveStylesItem,styles:n})),i.default.createElement("div",{className:"ae-container-dropdown ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.styles+" "+t,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.styles+" "+t},i.default.createElement("div",{className:"ae-container"},i.default.createElement("span",{className:"ae-container-dropdown-selected-item"},t),i.default.createElement(u.default,{symbol:"caret-bottom"}))),r)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor");e=CKEDITOR.tools.merge({element:"span"},e);var n=new CKEDITOR.style(e);return n.checkActive(t.elementPath(),t)}},{key:"_getStyles",value:function(){return this.props.styles||[{name:AlloyEditor.Strings.h1,style:{element:"h1"}},{name:AlloyEditor.Strings.h2,style:{element:"h2"}},{name:AlloyEditor.Strings.formatted,style:{element:"pre"}},{name:AlloyEditor.Strings.cite,style:{element:"cite"}},{name:AlloyEditor.Strings.code,style:{element:"code"}}]}}]),t}(i.default.Component);y.contextType=l.default,y.key="styles",t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(4),u=h(s),c=n(7),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.subscript,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-subscript",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.subscript},i.default.createElement(p.default,{symbol:"subscript"}))}}]),t}(i.default.Component);b.defaultProps={command:"subscript",style:"coreStyles_subscript"},b.key="subscript",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=h(o),a=n(3),l=h(a),s=n(4),u=h(s),c=n(7),f=h(c),d=n(1),p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.superscript,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-superscript",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.superscript},i.default.createElement(p.default,{symbol:"superscript"}))}}]),t}(i.default.Component);b.defaultProps={command:"superscript",style:"coreStyles_superscript"},b.key="superscript",t.default=(0,l.default)((0,u.default)((0,f.default)(b)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(13),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"render",value:function(){var e=void 0,n=void 0;return this.props.expanded&&(n=t.key+"List",e=i.default.createElement(l.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown})),i.default.createElement("div",{className:"ae-container ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.cell,"aria-owns":n,className:"ae-button",onClick:this.props.toggleDropdown,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.cell},i.default.createElement(u.default,{symbol:"add-cell"})),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"cellInsertBefore",label:AlloyEditor.Strings.cellInsertBefore},{command:"cellInsertAfter",label:AlloyEditor.Strings.cellInsertAfter},{command:"cellDelete",label:AlloyEditor.Strings.cellDelete},{command:"cellMerge",label:AlloyEditor.Strings.cellMerge},{command:"cellMergeDown",label:AlloyEditor.Strings.cellMergeDown},{command:"cellMergeRight",label:AlloyEditor.Strings.cellMergeRight},{command:"cellHorizontalSplit",label:AlloyEditor.Strings.cellSplitHorizontal},{command:"cellVerticalSplit",label:AlloyEditor.Strings.cellSplitVertical}]}}]),t}(i.default.Component);h.key="tableCell",t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(13),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"render",value:function(){var e=void 0,n=void 0;return this.props.expanded&&(n=t.key+"List",e=i.default.createElement(l.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown})),i.default.createElement("div",{className:"ae-container ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.column,"aria-owns":n,className:"ae-button",onClick:this.props.toggleDropdown,role:"listbox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.column},i.default.createElement(u.default,{symbol:"add-column"})),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"columnInsertBefore",label:AlloyEditor.Strings.columnInsertBefore},{command:"columnInsertAfter",label:AlloyEditor.Strings.columnInsertAfter},{command:"columnDelete",label:AlloyEditor.Strings.columnDelete}]}}]),t}(i.default.Component);h.key="tableColumn",t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(2),l=d(a),s=n(13),u=d(s),c=n(1),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),r(t,[{key:"render",value:function(){var e=void 0,n=void 0;this.props.expanded&&(n=t.key+"List",e=i.default.createElement(u.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown}));var r=new CKEDITOR.Table(this.context.editor.get("nativeEditor")).getHeading(),o=AlloyEditor.Strings.headers+":",a=AlloyEditor.Strings["headers"+r];return i.default.createElement("div",{className:"ae-container-dropdown-xl ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":"",className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:""},i.default.createElement("div",{className:"ae-container"},i.default.createElement("span",{className:"ae-container-dropdown-selected-item"},o," ",i.default.createElement("strong",null,a)),i.default.createElement(f.default,{symbol:"caret-bottom"}))),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"tableHeadingNone",label:AlloyEditor.Strings.headersNone},{command:"tableHeadingRow",label:AlloyEditor.Strings.headersRow},{command:"tableHeadingColumn",label:AlloyEditor.Strings.headersColumn},{command:"tableHeadingBoth",label:AlloyEditor.Strings.headersBoth}]}}]),t}(i.default.Component);y.contextType=l.default,y.key="tableHeading",t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(2),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){var e,n,r,o;f(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r._removeTable=function(){var e=r.context.editor.get("nativeEditor"),t=new CKEDITOR.Table(e);t.remove(),e.fire("actionPerformed",r)},o=n,d(r,o)}return p(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.deleteTable,className:"ae-button","data-type":"button-table-remove",onClick:this._removeTable,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.deleteTable},i.default.createElement(u.default,{symbol:"trash"}))}}]),t}(i.default.Component);h.contextType=l.default,h.key="tableRemove",t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(13),l=c(a),s=n(1),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"render",value:function(){var e=void 0,n=void 0;return this.props.expanded&&(n=t.key+"List",e=i.default.createElement(l.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown})),i.default.createElement("div",{className:"ae-container ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.row,"aria-owns":n,className:"ae-button",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.row},i.default.createElement(u.default,{symbol:"add-row"})),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"rowInsertBefore",label:AlloyEditor.Strings.rowInsertBefore},{command:"rowInsertAfter",label:AlloyEditor.Strings.rowInsertAfter},{command:"rowDelete",label:AlloyEditor.Strings.rowDelete}]}}]),t}(i.default.Component);h.key="tableRow",t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(1),l=c(a),s=n(35),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"render",value:function(){return this.props.renderExclusive?i.default.createElement(u.default,this.props):i.default.createElement("button",{"aria-label":AlloyEditor.Strings.table,className:"ae-button","data-type":"button-table",onClick:this.props.requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.table},i.default.createElement(l.default,{symbol:"table"}))}}]),t}(i.default.Component);h.key="table",t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(2),l=d(a),s=n(4),u=d(s),c=n(1),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=280,g=function(e){function t(){var e,n,r,o;p(this,t);for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=r,r.handleClick=function(){var e=r.context.editor.get("nativeEditor"),t=new CKEDITOR.Link(e);r.isActive()?t.remove(t.getFromSelection()):t.create(r._getHref(),{class:"ae-twitter-link",target:"_blank"}),e.fire("actionPerformed",r)},o=n,h(r,o)}return m(t,e),r(t,[{key:"isActive",value:function(){var e=new CKEDITOR.Link(this.context.editor.get("nativeEditor")).getFromSelection();return e&&-1!==e.getAttribute("href").indexOf("twitter.com/intent/tweet")}},{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.twitter,className:e,"data-type":"button-twitter",onClick:this.handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.twitter},i.default.createElement(f.default,{symbol:"twitter"}))}},{key:"_getHref",value:function(){var e=this.context.editor.get("nativeEditor"),t=e.getSelection().getSelectedText().substring(0,y),n=this.props.url,r=this.props.via,o="https://twitter.com/intent/tweet?text="+t;return n&&(o+="&url="+n),r&&(o+="&via="+r),o}}]),t}(i.default.Component);g.contextType=l.default,g.key="twitter",t.default=(0,u.default)(g)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(3),l=d(a),s=n(4),u=d(s),c=n(7),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.bulletedlist,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-ul",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.bulletedlist},i.default.createElement("span",null,i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:{fill:"currentColor"},width:"17",height:"17"},i.default.createElement("path",{d:"M506 114H134a6 6 0 0 1-6-6V84a6 6 0 0 1 6-6h372a6 6 0 0 1 6 6v24a6 6 0 0 1-6 6zm6 154v-24a6 6 0 0 0-6-6H134a6 6 0 0 0-6 6v24a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6zm0 160v-24a6 6 0 0 0-6-6H134a6 6 0 0 0-6 6v24a6 6 0 0 0 6 6h372a6 6 0 0 0 6-6zM48 60c-19.882 0-36 16.118-36 36s16.118 36 36 36 36-16.118 36-36-16.118-36-36-36zm0 160c-19.882 0-36 16.118-36 36s16.118 36 36 36 36-16.118 36-36-16.118-36-36-36zm0 160c-19.882 0-36 16.118-36 36s16.118 36 36 36 36-16.118 36-36-16.118-36-36-36z"}))))}}]),t}(i.default.Component);y.defaultProps={command:"bulletedlist",style:{element:"ul"}},y.key="ul",t.default=(0,l.default)((0,u.default)((0,f.default)(y)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=y(o),a=n(3),l=y(a),s=n(11),u=y(s),c=n(4),f=y(c),d=n(7),p=y(d),h=n(1),m=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(){return g(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),r(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return i.default.createElement("button",{"aria-label":AlloyEditor.Strings.underline,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-underline",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.underline},i.default.createElement(m.default,{symbol:"underline"}))}}]),t}(i.default.Component);_.defaultProps={command:"underline",keystroke:{fn:"execCommand",keys:CKEDITOR.CTRL+85,name:"underline"},style:"coreStyles_underline"},_.key="underline",t.default=(0,l.default)((0,u.default)((0,f.default)((0,p.default)(_))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(94);Object.defineProperty(t,"ButtonActionStyle",{enumerable:!0,get:function(){return g(r).default}});var o=n(95);Object.defineProperty(t,"ButtonCommandActive",{enumerable:!0,get:function(){return g(o).default}});var i=n(96);Object.defineProperty(t,"ButtonCommand",{enumerable:!0,get:function(){return g(i).default}});var a=n(97);Object.defineProperty(t,"ButtonKeystroke",{enumerable:!0,get:function(){return g(a).default}});var l=n(98);Object.defineProperty(t,"ButtonProps",{enumerable:!0,get:function(){return g(l).default}});var s=n(99);Object.defineProperty(t,"ButtonStateClasses",{enumerable:!0,get:function(){return g(s).default}});var u=n(100);Object.defineProperty(t,"ButtonStyle",{enumerable:!0,get:function(){return g(u).default}});var c=n(101);Object.defineProperty(t,"ToolbarButtons",{enumerable:!0,get:function(){return g(c).default}});var f=n(102);Object.defineProperty(t,"WidgetArrowBox",{enumerable:!0,get:function(){return g(f).default}});var d=n(103);Object.defineProperty(t,"WidgetDropdown",{enumerable:!0,get:function(){return g(d).default}});var p=n(104);Object.defineProperty(t,"WidgetExclusive",{enumerable:!0,get:function(){return g(p).default}});var h=n(105);Object.defineProperty(t,"WidgetFocusManager",{enumerable:!0,get:function(){return g(h).default}});var m=n(36);Object.defineProperty(t,"WidgetInteractionPoint",{enumerable:!0,get:function(){return g(m).default}});var y=n(106);function g(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"WidgetPosition",{enumerable:!0,get:function(){return g(y).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a={applyStyle:function(){if(o.default.isFunction(this.isActive)&&o.default.isFunction(this.getStyle)){var e=this.props.editor.get("nativeEditor");e.getSelection().lock(),this.isActive()?e.removeStyle(this.getStyle()):e.applyStyle(this.getStyle()),e.getSelection().unlock(),e.fire("actionPerformed",this)}}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={isActive:function(){var e=this.props.editor.get("nativeEditor"),t=e.getCommand(this.props.command);return!!t&&t.state===CKEDITOR.TRISTATE_ON}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a={propTypes:{command:o.default.string.isRequired,modifiesSelection:o.default.bool},execCommand:function(e){var t=this.props.editor.get("nativeEditor");t.execCommand(this.props.command,e),this.props.modifiesSelection&&t.selectionChange(!0),t.fire("actionPerformed",this)}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=l(r),i=n(5),a=l(i);function l(e){return e&&e.__esModule?e:{default:e}}var s={propTypes:{keystroke:o.default.object.isRequired},componentWillMount:function(){var e=this.props.editor.get("nativeEditor"),t=this.props.keystroke,n=t.name||(1e9*Math.random()>>>0).toString(),r=e.getCommand(n);r||(r=new CKEDITOR.command(e,{exec:function(e){var n=t.fn;a.default.isString(n)?this[n].call(this,e):a.default.isFunction(n)&&n.call(this,e)}.bind(this)}),e.addCommand(n,r)),this._defaultKeystrokeCommand=e.keystrokeHandler.keystrokes[t.keys],e.setKeystroke(t.keys,n)},componentWillUnmount:function(){this.props.editor.get("nativeEditor").setKeystroke(this.props.keystroke.keys,this._defaultKeystrokeCommand)}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=l(r),i=n(18),a=l(i);function l(e){return e&&e.__esModule?e:{default:e}}var s={propTypes:{editor:o.default.object.isRequired},mergeButtonCfgProps:function(e){e=e||this.props;var t=this.props.editor.get("nativeEditor"),n=t.config.buttonCfg||{},r=CKEDITOR.tools.merge(e,n[a.default.key]);return r}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a={getStateClasses:function(){var e="";return o.default.isFunction(this.isActive)&&this.isActive()&&(e+="ae-button-pressed"),o.default.isFunction(this.isDisabled)&&this.isDisabled()&&(e+=" ae-button-disabled"),e}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=l(r),i=n(5),a=l(i);function l(e){return e&&e.__esModule?e:{default:e}}var s={propTypes:{style:o.default.oneOfType([o.default.object,o.default.string]),styleFn:o.default.func},componentWillMount:function(){var e=this.props.style;if(a.default.isString(e)){var t=e.split("."),n=this.props.editor.get("nativeEditor").config,r=t.shift();while(r&&a.default.isObject(n)&&a.default.isObject(n[r]))n=n[r],r=t.shift();a.default.isObject(n)&&(e=n)}this._style=new CKEDITOR.style(e)},componentWillUnmount:function(){this._style=null},getStyle:function(){return this._style},isActive:function(){var e=this.props.editor.get("nativeEditor"),t=e.elementPath();return this.getStyle().checkActive(t,e)}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=l(r),i=n(5),a=l(i);function l(e){return e&&e.__esModule?e:{default:e}}var s={getToolbarButtonGroups:function(e,t){var n=this;return a.default.isFunction(e)&&(e=e.call(this)||[]),e.reduce(function(r,o){return Array.isArray(o)?(r.push(n.getToolbarButtons(o,t)),r):n.getToolbarButtons(e,t)},[])},getToolbarButtons:function(e,t){var n={},r=this.props.editor.get("nativeEditor"),i=r.config.buttonCfg||{};a.default.isFunction(e)&&(e=e.call(this)||[]);var l=this.filterExclusive(e.filter(function(e){return e&&(AlloyEditor.Buttons[e]||AlloyEditor.Buttons[e.name])}).map(function(e){return a.default.isString(e)?(n[e]=i[e],e=AlloyEditor.Buttons[e]):a.default.isString(e.name)&&(n[AlloyEditor.Buttons[e.name].key]=CKEDITOR.tools.merge(i[e],e.cfg),e=AlloyEditor.Buttons[e.name]),e})).map(function(e,r){var i=this.mergeExclusiveProps({editor:this.props.editor,key:"separator"!==e.key?e.key:e.key+"-"+r,tabKey:e.key,tabIndex:this.props.trigger&&this.props.trigger.props.tabKey===e.key?0:-1,trigger:this.props.trigger},e.key);return i=this.mergeDropdownProps(i,e.key),t&&(i=CKEDITOR.tools.merge(i,t)),i=CKEDITOR.tools.merge(i,n[e.key]),o.default.createElement(e,i)},this);return l}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a={getArrowBoxClasses:function(){var e="ae-arrow-box";return o.default.isFunction(this.getInteractionPoint)&&this.getInteractionPoint()&&(this.getInteractionPoint().direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?e+=" ae-arrow-box-top":e+=" ae-arrow-box-bottom"),e}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var a={componentWillReceiveProps:function(e){this.setState({dropdownTrigger:null,itemDropdown:null})},getInitialState:function(){return{dropdownTrigger:null,itemDropdown:null}},mergeDropdownProps:function(e,t){return CKEDITOR.tools.merge(e,{expanded:this.state.itemDropdown===t,tabIndex:this.state.dropdownTrigger===t?0:-1,toggleDropdown:this.toggleDropdown.bind(this,t)})},toggleDropdown:function(e,t){this.setState({dropdownTrigger:e,itemDropdown:e!==this.state.itemDropdown?e:null},function(){this.state.itemDropdown||(this.moveFocus?this.moveFocus(t):o.default.findDOMNode(this).focus())})}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={cancelExclusive:function(e){this.state.itemExclusive===e&&this.setState({itemExclusive:null})},componentWillReceiveProps:function(e){this.setState({itemExclusive:null})},filterExclusive:function(e){var t=this;return e.filter(function(e){return t.state.itemExclusive?t.state.itemExclusive===e.key?e:void 0:e})},mergeExclusiveProps:function(e,t){return CKEDITOR.tools.merge(e,{cancelExclusive:this.cancelExclusive.bind(this,t),renderExclusive:this.state.itemExclusive===t,requestExclusive:this.requestExclusive.bind(this,t)})},requestExclusive:function(e){this.setState({itemExclusive:e})}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=u(r),i=n(6),a=u(i),l=n(5),s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}var c=0,f=1,d=-1,p=0,h=1,m=2,y={propTypes:{onDismiss:o.default.func,circular:o.default.bool.isRequired,focusFirstChild:o.default.bool,descendants:o.default.string.isRequired,keys:o.default.object.isRequired},componentDidMount:function(){this._refresh()},componentDidUpdate:function(){this._refresh()},focus:function(e){if((!e||this._isValidTarget(e.target))&&this._descendants&&this._descendants.length){var t=this._descendants[this._activeDescendant];document.activeElement===t||this.props.focusFirstChild||-1===this._descendants.indexOf(document.activeElement)&&t.focus(),e&&(e.stopPropagation(),e.preventDefault())}},handleKey:function(e){if(this._isValidTarget(e.target)&&this._descendants){var t=this._getFocusAction(e);t.type&&(e.stopPropagation(),e.preventDefault(),t.type===h&&this._moveFocus(t.direction),t.type===m&&this.props.onDismiss(t.direction))}},moveFocus:function(e){e=s.default.isNumber(e)?e:0,this._moveFocus(e)},_getFocusAction:function(e){var t={type:p};if(this.props.keys){var n=this._getFocusMoveDirection(e);n&&(t.direction=n,t.type=h);var r=this._getFocusDismissAction(e,n);r.dismiss&&(t.direction=r.direction,t.type=m)}return t},_getFocusDismissAction:function(e,t){var n={direction:t,dismiss:!1};return this.props.onDismiss&&(this._isValidKey(e.keyCode,this.props.keys.dismiss)&&(n.dismiss=!0),this._isValidKey(e.keyCode,this.props.keys.dismissNext)&&(n.dismiss=!0,n.direction=f),this._isValidKey(e.keyCode,this.props.keys.dismissPrev)&&(n.dismiss=!0,n.direction=d),n.dismiss||this.props.circular||!t||(n.dismiss=t===d&&0===this._activeDescendant||t===f&&this._activeDescendant===this._descendants.length-1)),n},_getFocusMoveDirection:function(e){var t=c;return this._isValidKey(e.keyCode,this.props.keys.next)&&(t=f),this._isValidKey(e.keyCode,this.props.keys.prev)&&(t=d),e.shifKey&&(t*=-1),t},_isValidKey:function(e,t){return s.default.isArray(t)?-1!==t.indexOf(e):e===t},_isValidTarget:function(e){var t=e.tagName.toLowerCase();return"input"!==t&&"select"!==t&&"textarea"!==t},_moveFocus:function(e){var t=this._descendants.length,n=this._descendants[this._activeDescendant];n.setAttribute("tabIndex",-1),this._activeDescendant+=e,this.props.circular?this._activeDescendant=(this._activeDescendant%t+t)%t:this._activeDescendant=Math.max(Math.min(this._activeDescendant,t-1),0),n=this._descendants[this._activeDescendant],n.setAttribute("tabIndex",0),n.focus()},_refresh:function(){var e=this,t=a.default.findDOMNode(this);if(t){var n=t.querySelectorAll(this.props.descendants),r=[];this._descendants=[],Array.prototype.slice.call(n).forEach(function(t){var n=t.getAttribute("data-tabindex");n?r.push(t):e._descendants.push(t)}),r=r.sort(function(e,t){return s.default.toInt(e.getAttribute("data-tabindex"))>s.default.toInt(t.getAttribute("data-tabindex"))}),this._descendants=r.concat(this._descendants),this._activeDescendant=0,this._descendants.some(function(t,n){if("0"===t.getAttribute("tabindex"))return e._activeDescendant=n,e.focus(),!0})}}};t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=u(r),i=n(6),a=u(i),l=n(36),s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}var c={mixins:[s.default],propTypes:{constrainToViewport:o.default.bool,gutter:o.default.object},getDefaultProps:function(){return{gutter:{left:0,top:10},constrainToViewport:!0}},cancelAnimation:function(){window.cancelAnimationFrame&&window.cancelAnimationFrame(this._animationFrameId)},getConstrainedPosition:function(e,t){t=t||new CKEDITOR.dom.window(window).getViewPaneSize();var n=e.left,r=e.top;return e.left+e.width>t.width&&(n-=e.left+e.width-t.width),r<0&&(r=0),{x:n,y:r}},getWidgetXYPoint:function(e,t,n){var r=a.default.findDOMNode(this),o=this.props.gutter,i=r.offsetWidth,l=i/2;return n===CKEDITOR.SELECTION_TOP_TO_BOTTOM||n===CKEDITOR.SELECTION_BOTTOM_TO_TOP?(e=e-o.left-l,t=n===CKEDITOR.SELECTION_TOP_TO_BOTTOM?t+o.top:t-r.offsetHeight-o.top):n!==CKEDITOR.SELECTION_LEFT_TO_RIGHT&&n!==CKEDITOR.SELECTION_RIGHT_TO_LEFT||(e=n===CKEDITOR.SELECTION_LEFT_TO_RIGHT?e+o.left+r.offsetHeight/2:e-3*r.offsetHeight/2-o.left,t=t-o.top-r.offsetHeight/2),e<0&&(e=0),e>document.body.offsetWidth-l&&(e=document.body.offsetWidth-l),t<0&&(t=0),[e,t]},isVisible:function(){var e=a.default.findDOMNode(this);if(e){var t=new CKEDITOR.dom.element(e);return t.hasClass("alloy-editor-visible")}return!1},moveToPoint:function(e,t){var n=new CKEDITOR.dom.element(a.default.findDOMNode(this));n.setStyles({left:e[0]+"px",top:e[1]+"px",opacity:0,pointerEvents:"none"}),n.removeClass("alloy-editor-invisible"),this._animate(function(){n.addClass("ae-toolbar-transition"),n.addClass("alloy-editor-visible"),n.setStyles({left:t[0]+"px",top:t[1]+"px",opacity:1}),setTimeout(function(){n.setStyles({pointerEvents:""})},150)})},show:function(){var e=a.default.findDOMNode(this),t=this.props.editor.get("uiNode"),n=t?t.scrollTop:0;if(!this.isVisible()&&e){var r=this.getInteractionPoint();if(r){var o=new CKEDITOR.dom.element(e),i=void 0,l=void 0,s=void 0,u=void 0;if(i=s=parseFloat(o.getStyle("left")),l=u=parseFloat(o.getStyle("top")),this.props.constrainToViewport){var c=this.getConstrainedPosition({height:parseFloat(e.offsetHeight),left:i,top:l,width:parseFloat(e.offsetWidth)});i=c.x,l=c.y}u=r.direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this.props.selectionData.region.bottom+n:this.props.selectionData.region.top+n,this.moveToPoint([s,u],[i,l])}}},updatePosition:function(){var e=this.getInteractionPoint(),t=a.default.findDOMNode(this);if(e&&t){var n=this.props.editor.get("uiNode")||document.body,r=getComputedStyle(n),o=parseInt(r.getPropertyValue("margin-left"),10),i=parseInt(r.getPropertyValue("margin-right"),10),l=o+n.clientWidth+i,s="BODY"!==n.tagName?n.scrollTop:0,u=this.getWidgetXYPoint(e.x,e.y,e.direction);u[1]+=s,u[0]<0&&(u[0]=0),u[0]>l-t.offsetWidth&&(u[0]=l-t.offsetWidth),new CKEDITOR.dom.element(t).setStyles({left:u[0]+"px",top:u[1]+"px"})}},_animate:function(e){window.requestAnimationFrame?this._animationFrameId=window.requestAnimationFrame(e):e()}};t.default=c},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(108),i=s(o),a=n(109),l=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=(r={},u(r,i.default.key,i.default),u(r,l.default.key,l.default),r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=_(o),a=n(6),l=_(a),s=n(2),u=_(s),c=n(20),f=_(c),d=n(16),p=_(d),h=n(17),m=_(h),y=n(10),g=_(y),b=n(1),v=_(b);function _(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=1,k=2,T=function(e){function t(e){E(this,t);var n=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return w(t,e),r(t,[{key:"componentDidMount",value:function(){this._updatePosition()}},{key:"componentDidUpdate",value:function(e,t){this._updatePosition(),this.props.renderExclusive&&this.focus()}},{key:"render",value:function(){if(!this.state.itemExclusive&&this.props.editorEvent&&this.props.editorEvent.data.nativeEvent.target&&!this.props.editorEvent.data.nativeEvent.target.isContentEditable)return null;var e=this._getButtons(),t=this._getToolbarClassName();return i.default.createElement("div",{"aria-label":AlloyEditor.Strings.add,className:t,"data-tabindex":this.props.config.tabIndex||0,onFocus:this.focus.bind(this),onKeyDown:this.handleKey.bind(this),role:"toolbar",tabIndex:"-1"},i.default.createElement("div",{className:"ae-container"},e))}},{key:"_getButtons",value:function(){var e=void 0;return this.props.renderExclusive?e=this.getToolbarButtons(this.props.config.buttons):this.props.selectionData&&this.props.selectionData.region&&(e=i.default.createElement("button",{"aria-label":AlloyEditor.Strings.add,className:"ae-button ae-button-add",onClick:this.props.requestExclusive.bind(this,t.key),title:AlloyEditor.Strings.add},i.default.createElement(v.default,{symbol:"plus"}))),e}},{key:"_getToolbarClassName",value:function(){var e="ae-toolbar-add";return this.props.renderExclusive&&(e="ae-toolbar "+this.getArrowBoxClasses()),e}},{key:"_updatePosition",value:function(){var e=void 0;if(l.default.findDOMNode(this))if(this.props.renderExclusive)this.updatePosition(),this.show();else if(this.props.selectionData&&(e=this.props.selectionData.region),e){var t=l.default.findDOMNode(this),n=new CKEDITOR.dom.element(t),r=e.startRect||e,o=this.context.editor.get("nativeEditor"),i=o.editable().getClientRect(),a=void 0,s=this.props.config.position||this.props.position;a=s===C?i.left-t.offsetWidth-this.props.gutterExclusive.left+"px":i.right+this.props.gutterExclusive.left+"px",t.style.left=a,t.style.top=Math.floor((e.bottom+e.top)/2)+"px";var u=this.context.editor.get("uiNode"),c=u?u.scrollTop:0;"auto"!==o.element.getStyle("overflow")?t.style.top=Math.floor(e.top-t.offsetHeight/2+r.height/2+c)+"px":t.style.top=Math.floor(o.element.$.offsetTop+r.height/2-t.offsetHeight/2)+"px",t.style.opacity=1,n.removeClass("ae-arrow-box"),this.cancelAnimation()}}}]),t}(i.default.Component);T.contextType=u.default,T.key="add",T.left=C,T.right=k,T.defaultProps={circular:!0,descendants:".ae-button",gutterExclusive:{left:10,top:0},keys:{dismiss:[27],next:[39,40],prev:[37,38]},position:C},t.default=(0,p.default)((0,m.default)((0,g.default)((0,f.default)(T))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=E(i),l=n(6),s=E(l),u=n(2),c=E(u),f=n(5),d=E(f),p=n(20),h=E(p),m=n(16),y=E(m),g=n(17),b=E(g),v=n(10),_=E(v);function E(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function C(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=function(e){function t(e){O(this,t);var n=w(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return C(t,e),o(t,[{key:"componentDidMount",value:function(){this._updatePosition()}},{key:"componentDidUpdate",value:function(e,t){this._updatePosition()}},{key:"render",value:function(){var e=this._getCurrentSelection();if(e){var t=this._getSelectionFunction(e.getArrowBoxClasses),n=void 0;n=t?t():this.getArrowBoxClasses();var o="ae-toolbar-styles "+n,i=e.buttons;"object"!==("undefined"===typeof i?"undefined":r(i))||Array.isArray(i)||(i=i[this.context.editor.get("mode")]||i["simple"]);var l=this.getToolbarButtonGroups(i,{manualSelection:this.props.editorEvent?this.props.editorEvent.data.manualSelection:null,selectionType:e.name}),s=l.filter(function(e){return Array.isArray(e)}).length>0,u="ae-container";return s&&(u+=" ae-container-column"),a.default.createElement("div",{"aria-label":AlloyEditor.Strings.styles,className:o,"data-tabindex":this.props.config.tabIndex||0,onFocus:this.focus.bind(this),onKeyDown:this.handleKey.bind(this),role:"toolbar",tabIndex:"-1"},a.default.createElement("div",{className:u},l.map(function(e,t){return Array.isArray(e)?a.default.createElement("div",{className:"ae-row",key:t},e.map(function(e){return e})):e})))}return null}},{key:"_getSelectionFunction",value:function(e){var t=void 0;if(d.default.isFunction(e))t=e;else if(d.default.isString(e)){var n=e.split("."),r=window,o=n.shift();while(o&&d.default.isObject(r)&&d.default.isObject(r[o]))r=r[o],o=n.shift();d.default.isFunction(r)&&(t=r)}return t}},{key:"_getCurrentSelection",value:function(){var e=this.props.editorEvent?this.props.editorEvent.data:null,t=void 0;return e&&this.props.config.selections.some(function(n){var r=this._getSelectionFunction(n.test),o=void 0;return r&&(o=e.manualSelection===n.name||r({data:e,editor:this.context.editor})),o&&(t=n),o},this),t}},{key:"_updatePosition",value:function(){if(s.default.findDOMNode(this)){var e=this._getCurrentSelection(),t=void 0;if(e){var n=this._getSelectionFunction(e.setPosition);n&&(t=n.call(this,{editor:this.context.editor,editorEvent:this.props.editorEvent,selectionData:this.props.selectionData}))}t||(this.updatePosition(),this.show())}}}]),t}(a.default.Component);k.contextType=c.default,k.defaultProps={circular:!0,descendants:".ae-input, .ae-button:not([disabled]), .ae-toolbar-element",keys:{dismiss:[27],next:[39,40],prev:[37,38]}},k.key="styles",t.default=(0,y.default)((0,b.default)((0,_.default)((0,h.default)(k))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(111),n(41),n(136);var r=n(0),o=_(r),i=n(6),a=_(i),l=n(143),s=n(145),u=_(s),c=n(146),f=_(c),d=n(5),p=_(d),h=n(21),m=_(h),y=n(40),g=_(y),b=n(2),v=_(b);function _(e){return e&&e.__esModule?e:{default:e}}var E=560,O=315;function w(e){w.superclass.constructor.call(this,e)}(0,m.default)(w,f.default,{initializer:function(e){var t=this,n=this.get("srcNode");this.get("enableContentEditable")&&n.setAttribute("contenteditable","true");var r=CKEDITOR.inline(n);if(r.config.allowedContent=this.get("allowedContent"),r.config.toolbars=this.get("toolbars"),r.config.removePlugins=this.get("removePlugins"),r.config.extraPlugins=this.get("extraPlugins"),r.config.embedProviders=this.get("embedProviders"),r.config.placeholderClass=this.get("placeholderClass"),r.config.pasteFromWordRemoveStyles=!1,r.config.pasteFromWordRemoveFontStyles=!1,r.config.selectionKeystrokes=this.get("selectionKeystrokes"),r.config.spritemap=this.get("spritemap"),p.default.mix(r.config,e),CKEDITOR.env.ie&&!CKEDITOR.env.edge){var o=11===CKEDITOR.env.version?"ae_dragresize_ie11":"ae_dragresize_ie";r.config.extraPlugins=r.config.extraPlugins.replace("ae_dragresize",o),r.config.removePlugins=r.config.removePlugins.replace("ae_dragresize",o)}r.once("contentDom",function(){t._addReadOnlyLinkClickListener(r);for(var e=r.editable(),n=t.get("extraCommands"),o=Object.keys(n),i=0;i<o.length;i++){var a=o[i];r.commands[a]||r.addCommand(a,n[a])}e.addClass("ae-editable")}),this._editor=r,AlloyEditor.loadLanguageResources(this._renderUI.bind(this))},destructor:function(){this._destroyed=!0,this._editorUIElement&&(a.default.unmountComponentAtNode(this._editorUIElement),this._editorUIElement.parentNode.removeChild(this._editorUIElement));var e=this.get("nativeEditor");if(e){var t=e.editable();t&&(t.removeClass("ae-editable"),this.get("enableContentEditable")&&this.get("srcNode").setAttribute("contenteditable","false")),this._clearSelections(),e.destroy()}},_clearSelections:function(){var e=this.get("nativeEditor"),t="function"!=typeof window.getSelection;t?e.document.$.selection.empty():e.document.getWindow().$.getSelection().removeAllRanges()},_addReadOnlyLinkClickListener:function(e){e.editable().on("click",this._defaultReadOnlyClickFn,this,{editor:e})},_defaultReadOnlyClickFn:function(e){var t=e.data.$,n=t.ctrlKey||t.metaKey,r=this._editor.config.readOnly||n;if(t.preventDefault(),r&&!1!==e.listenerData.editor.editable().editor.fire("readOnlyClick",e.data)){var o=new CKEDITOR.dom.elementPath(e.data.getTarget(),this),i=o.lastElement;if(i){var a=i.$.attributes.href?i.$.attributes.href.value:null,l=n?"_blank":i.$.attributes.target?i.$.attributes.target.value:null;this._redirectLink(a,l)}}},_getNativeEditor:function(){return this._editor},_redirectLink:function(e,t){t&&e?window.open(e,t):e&&(window.location.href=e)},_renderUI:function(){var e=this;if(!this._destroyed){var t=document.createElement("div");t.className="ae-ui";var n=this.get("uiNode")||document.body;n.appendChild(t);var r=function(t){!e._mainUI&&t&&(e._mainUI=t,e.get("nativeEditor").fire("uiReady"))};a.default.render(o.default.createElement(v.default.Provider,{value:{editor:this}},o.default.createElement(u.default,{eventsDelay:this.get("eventsDelay"),ref:r,toolbars:this.get("toolbars")})),t),this._editorUIElement=t}},_toElement:function(e){return p.default.isString(e)&&(e=document.getElementById(e)),e},_validateAllowedContent:function(e){return p.default.isString(e)||p.default.isObject(e)||p.default.isBoolean(e)},_validateToolbars:function(e){return p.default.isObject(e)||p.default.isNull(e)}},{ATTRS:{allowedContent:{validator:"_validateAllowedContent",value:!0,writeOnce:!0},documentBrowseLinkCallback:{validator:p.default.isFunction,value:void 0},documentBrowseLinkUrl:{validator:p.default.isString,value:void 0},embedProviders:{validator:p.default.isArray,value:[{id:"facebook",tpl:'<iframe allowFullScreen="true" allowTransparency="true"\n\t\t\t\t\t\t\t\t\t\t\t\t frameborder="0" height="'+O+'"\n\t\t\t\t\t\t\t\t\t\t\t\t src="https://www.facebook.com/plugins/video.php?href={embedId}\'\n\t\t\t\t\t\t\t\t\t\t\t\t &show_text=0&width='+E+"&height="+O+'" scrolling="no"\n\t\t\t\t\t\t\t\t\t\t\t\t style="border:none;overflow:hidden" width="'+E+'}"></iframe>',type:"video",urlSchemes:["(https?:\\/\\/(?:www\\.)?facebook.com\\/\\S*\\/videos\\/\\S*)"]},{id:"twitch",tpl:'<iframe allowfullscreen="true" frameborder="0"\n\t\t\t\t\t\t\t\t\t\t\t\t height="'+O+'"\n\t\t\t\t\t\t\t\t\t\t\t\t src="https://player.twitch.tv/?autoplay=false&video={embedId}"\n\t\t\t\t\t\t\t\t\t\t\t\t scrolling="no" width="'+E+'"></iframe>',type:"video",urlSchemes:["https?:\\/\\/(?:www\\.)?twitch.tv\\/videos\\/(\\S*)$"]},{id:"vimeo",tpl:'<iframe allowfullscreen frameborder="0" height="'+O+'"\n\t\t\t\t\t\t\t\t\t\t\t\t mozallowfullscreen src="https://player.vimeo.com/video/{embedId}"\n\t\t\t\t\t\t\t\t\t\t\t\t webkitallowfullscreen width="'+E+'"></iframe>',type:"video",urlSchemes:["https?:\\/\\/(?:www\\.)?vimeo\\.com\\/album\\/.*\\/video\\/(\\S*)","https?:\\/\\/(?:www\\.)?vimeo\\.com\\/channels\\/.*\\/(\\S*)","https?:\\/\\/(?:www\\.)?vimeo\\.com\\/groups\\/.*\\/videos\\/(\\S*)","https?:\\/\\/(?:www\\.)?vimeo\\.com\\/(\\S*)$"]},{id:"youtube",tpl:'<iframe allow="autoplay; encrypted-media" allowfullscreen\n\t\t\t\t\t\t\t\t\t\t\t\t height="'+O+'" frameborder="0"\n\t\t\t\t\t\t\t\t\t\t\t\t src="https://www.youtube.com/embed/{embedId}?rel=0"\n\t\t\t\t\t\t\t\t\t\t\t\t width="'+E+'"></iframe>',type:"video",urlSchemes:["https?:\\/\\/(?:www\\.)?youtube.com\\/watch\\?v=(\\S*)$"]}]},enableContentEditable:{validator:p.default.isBoolean,value:!0,writeOnce:!0},eventsDelay:{validator:p.default.isNumber,value:100},extraCommands:{validator:p.default.isObject,value:{removeImage:l.removeImageCommand},writeOnce:!0},extraPlugins:{validator:p.default.isString,value:"ae_uicore,ae_selectionregion,ae_selectionkeystrokes,ae_imagealignment,ae_addimages,ae_placeholder,ae_tabletools,ae_tableresize,ae_autolink,ae_embed,ae_autolist,ae_dragresize,ae_uibridge,ae_richcombobridge,ae_panelmenubuttonbridge,ae_menubridge,ae_menubuttonbridge,ae_buttonbridge,font,colorbutton",writeOnce:!0},mode:{validator:p.default.isString,value:"simple"},nativeEditor:{getter:"_getNativeEditor",readOnly:!0},placeholderClass:{validator:p.default.isString,value:"ae-placeholder",writeOnce:!0},removePlugins:{validator:p.default.isString,value:"contextmenu,toolbar,elementspath,resize,liststyle,link",writeOnce:!0},selectionKeystrokes:{validator:p.default.isArray,value:[{keys:CKEDITOR.CTRL+76,selection:"link"},{keys:CKEDITOR.CTRL+CKEDITOR.SHIFT+76,selection:"embed"}]},spritemap:{validator:p.default.isString,value:"/third-party/alloy-editor/dist/alloy-editor/assets/icons/icons.svg",writeOnce:!0},srcNode:{setter:"_toElement",writeOnce:!0},toolbars:{validator:"_validateToolbars",value:{add:{buttons:["imageFromFile","embed","camera","hline","table"],tabIndex:2},styles:{selections:g.default,tabIndex:1}}},uiNode:{setter:"_toElement",writeOnce:!0}}}),CKEDITOR.event.implementOn(w),t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0;var r=n(112),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}n(113),n(114),n(115),n(116),n(117),n(118),t.debounce=o.default},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=void 0,a=function(){for(var a=arguments.length,l=Array(a),s=0;s<a;s++)l[s]=arguments[s];var u=n||this;clearTimeout(i),i=setTimeout(function(){e.apply(u,[].concat(l,r(o)))},t)};return a.detach=function(){clearTimeout(i)},a}Object.defineProperty(t,"__esModule",{value:!0}),CKEDITOR.tools.debounce=CKEDITOR.tools.debounce||o,t.default=o},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=/^#.*/i,i=/^[a-z0-9\u0430-\u044F._-]+@/i,a=/^(?:[a-z][a-z0-9+\-.]*):|^\//i;function l(e,t){this._editor=e,this.appendProtocol=!t||!1!==t.appendProtocol}l.prototype={constructor:l,advanceSelection:function(e){e=e||this.getFromSelection();var t=this._editor.getSelection().getRanges()[0];if(e){t.moveToElementEditEnd(e);var n=t.getNextEditableNode();if(n&&!this._editor.element.equals(n.getCommonAncestor(e))){var r=/\s/.exec(n.getText()),o=r?r.index+1:0;t.setStart(n,o),t.setEnd(n,o)}}this._editor.getSelection().selectRanges([t])},create:function(e,t,n){var r=this._editor.getSelection(),o=r.getRanges()[0];if(o.collapsed){var i=new CKEDITOR.dom.text(e,this._editor.document);o.insertNode(i),o.selectNodeContents(i)}e=this._getCompleteURI(e);var a=CKEDITOR.tools.merge({"data-cke-saved-href":e,href:e},t),l=new CKEDITOR.style({attributes:a,element:"a"});l.type=CKEDITOR.STYLE_INLINE,l.applyToRange(o,this._editor),n&&n.advance?this.advanceSelection():o.select()},getFromSelection:function(){var e=this._editor.getSelection(),t=e.getSelectedElement();if(t&&t.is("a"))return t;if(t&&CKEDITOR.env.ie)for(var n=t.getChildren(),r=n.count(),o=0;o<r;o++){var i=n.getItem(o);if(i.is("a"))return i}var a=e.getRanges()[0];return a?(a.shrink(CKEDITOR.SHRINK_TEXT),this._editor.elementPath(a.getCommonAncestor()).contains("a",1)):null},remove:function(e,t){var n=this._editor;if(e)t&&t.advance&&this.advanceSelection(),e.remove(n);else{var r=new CKEDITOR.style({alwaysRemoveElement:1,element:"a",type:CKEDITOR.STYLE_INLINE}),o=n.getSelection();o.selectElement(o.getStartElement()),n.removeStyle(r)}},update:function(e,t,n){var o=this;if(t=t||this.getFromSelection(),"string"===typeof e){var i=o._getCompleteURI(e);t.setAttributes({"data-cke-saved-href":i,href:i})}else if("object"===("undefined"===typeof e?"undefined":r(e))){var a=[],l={};Object.keys(e).forEach(function(t){if(null===e[t])"href"===t&&a.push("data-cke-saved-href"),a.push(t);else if("href"===t){var n=o._getCompleteURI(e[t]);l["data-cke-saved-href"]=n,l[t]=n}else l[t]=e[t]}),t.removeAttributes(a),t.setAttributes(l)}n&&n.advance&&this.advanceSelection(t)},_getCompleteURI:function(e){return o.test(e)?e:(i.test(e)?e="mailto:"+e:a.test(e)||(e=this.appendProtocol?"http://"+e:e),e)}},CKEDITOR.Link=CKEDITOR.Link||l},function(e,t,n){"use strict";var r=function(e){var t=["beforeInit","init","afterInit"];t.forEach(function(t){e[t]&&(e[t]=CKEDITOR.tools.override(e[t],function(n){var r={phase:t,plugin:e};return function(e){e.__processingPlugin__=r,n.call(this,e),e.__processingPlugin__=null}}))})},o=function(e){return"string"===typeof e&&(e=e.split(",")),e.filter(function(e){return"toolbar"!==e})};CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){return function(t,n,i){e.call(this,t,function(e){n&&(Object.keys(e).forEach(function(t){var n=e[t];n.requires&&(n.requires=o(n.requires)),r(n)}),n.call(i,e))})}})},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_selectionregion")){function r(){}CKEDITOR.SELECTION_TOP_TO_BOTTOM=0,CKEDITOR.SELECTION_BOTTOM_TO_TOP=1,CKEDITOR.SELECTION_LEFT_TO_RIGHT=2,CKEDITOR.SELECTION_RIGHT_TO_LEFT=3,r.prototype={constructor:r,createSelectionFromPoint:function(e,t){this.createSelectionFromRange(e,t,e,t)},createSelectionFromRange:function(e,t,n,r){var o=void 0,i=void 0,a=void 0,l=void 0,s=void 0,u=void 0,c=void 0;if("function"===typeof document.caretPositionFromPoint?(s=document.caretPositionFromPoint(e,t),o=document.caretPositionFromPoint(n,r),u=s.offsetNode,i=o.offsetNode,c=s.offset,a=o.offset,l=this.createRange()):"function"===typeof document.caretRangeFromPoint&&(s=document.caretRangeFromPoint(e,t),o=document.caretRangeFromPoint(n,r),u=s.startContainer,i=o.startContainer,c=s.startOffset,a=o.startOffset,l=this.createRange()),l&&document.getSelection)l.setStart(new CKEDITOR.dom.node(u),c),l.setEnd(new CKEDITOR.dom.node(i),a),this.getSelection().selectRanges([l]);else if("function"===typeof document.body.createTextRange){var f=this.getSelection();f.unlock(),l=document.body.createTextRange(),l.moveToPoint(e,t);var d=l.duplicate();d.moveToPoint(n,r),l.setEndPoint("EndToEnd",d),l.select(),this.getSelection().lock()}},getCaretRegion:function(){var e=this.getSelection(),t={bottom:0,left:0,right:0,top:0},n=e.createBookmarks();if(!n.length)return t;var r=n[0].startNode.$;r.style.display="inline-block",t=new CKEDITOR.dom.element(r).getClientRect(),r.parentNode.removeChild(r);var o=new CKEDITOR.dom.window(window).getScrollPosition();return t.bottom=o.y+t.bottom,t.left=o.x+t.left,t.right=o.x+t.right,t.top=o.y+t.top,t},getSelectionData:function(){var e=this.getSelection();if(!e.getNative())return null;var t={element:e.getSelectedElement(),text:e.getSelectedText()};return t.region=this.getSelectionRegion(e),t},getSelectionRegion:function(){var e=this.getClientRectsRegion();return e.direction=this.getSelectionDirection(),e.height=e.bottom-e.top,e.width=e.right-e.left,e},isSelectionEmpty:function(){var e=this.getSelection();if(e.getType()===CKEDITOR.SELECTION_NONE)return!0;var t=e.getRanges();return t&&1===t.length&&t[0].collapsed},getClientRectsRegion:function(){var e=this.getSelection(),t=e.getNative(),n={bottom:0,height:0,left:0,right:0,top:0,width:0},r={bottom:0,endRect:n,left:0,right:0,top:0,startRect:n};if(!t)return r;var o=0,i=void 0,a=1/0,l=-1/0,s=1/0;if(i=t.createRange?t.createRange().getClientRects():t.rangeCount>0?t.getRangeAt(0).getClientRects():[],0===i.length)r=this.getCaretRegion();else{for(var u=0,c=i.length;u<c;u++){var f=i[u];f.left<a&&(a=f.left),f.right>l&&(l=f.right),f.top<s&&(s=f.top),f.bottom>o&&(o=f.bottom)}var d=new CKEDITOR.dom.window(window).getScrollPosition();if(r.bottom=d.y+o,r.left=d.x+a,r.right=d.x+l,r.top=d.y+s,i.length){var p=i[i.length-1],h=i[0];r.endRect={bottom:d.y+p.bottom,height:p.height,left:d.x+p.left,right:d.x+p.right,top:d.y+p.top,width:p.width},r.startRect={bottom:d.y+h.bottom,height:h.height,left:d.x+h.left,right:d.x+h.right,top:d.y+h.top,width:h.width}}}return r},getSelectionDirection:function(){var e=CKEDITOR.SELECTION_TOP_TO_BOTTOM,t=this.getSelection(),n=t.getNative();if(!n)return e;var r=void 0;if((r=n.anchorNode)&&r.compareDocumentPosition){var o=r.compareDocumentPosition(n.focusNode);(!o&&n.anchorOffset>n.focusOffset||o===Node.DOCUMENT_POSITION_PRECEDING)&&(e=CKEDITOR.SELECTION_BOTTOM_TO_TOP)}return e}},CKEDITOR.plugins.add("ae_selectionregion",{init:function(e){var t=void 0,n=Object.prototype.hasOwnProperty;for(t in r.prototype)n.call(r.prototype,t)&&"undefined"===typeof e[t]&&(e[t]=r.prototype[t])}})}},function(e,t,n){"use strict";var r={table:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1};function o(e){this._editor=e}o.HEADING_BOTH="Both",o.HEADING_COL="Column",o.HEADING_NONE="None",o.HEADING_ROW="Row",o.prototype={constructor:o,create:function(e){var t=this._editor,n=this._createElement("table");e=e||{};for(var r=n.append(this._createElement("tbody")),o=e.rows||1,i=e.cols||1,a=0;a<o;a++)for(var l=r.append(this._createElement("tr")),s=0;s<i;s++){var u=l.append(this._createElement("td"));u.appendBogus()}this.setAttributes(n,e.attrs),this.setHeading(n,e.heading),t.insertElement(n);var c=new CKEDITOR.dom.element(n.$.rows[0].cells[0]),f=t.createRange();return f.moveToPosition(c,CKEDITOR.POSITION_AFTER_START),f.select(),n},getFromSelection:function(){var e=void 0,t=this._editor.getSelection(),n=t.getSelectedElement();if(n&&n.is("table"))e=n;else{var r=t.getRanges();r.length>0&&(CKEDITOR.env.webkit&&r[0].shrink(CKEDITOR.NODE_ELEMENT),e=this._editor.elementPath(r[0].getCommonAncestor(!0)).contains("table",1))}return e},isEditable:function(e){return CKEDITOR.env.ie&&e.is(r)?e.hasAttribute("contenteditable")?"false"!==e.getAttribute("contenteditable"):this.isEditable(e.getParent()):!e.isReadOnly()},getHeading:function(e){if(e=e||this.getFromSelection(),!e)return null;for(var t=null!==e.$.tHead,n=!0,r=0;r<e.$.rows.length;r++){var i=e.$.rows[r].cells[0];if(i&&"th"!==i.nodeName.toLowerCase()){n=!1;break}}var a=o.HEADING_NONE;return t&&(a=o.HEADING_ROW),n&&(a=a===o.HEADING_ROW?o.HEADING_BOTH:o.HEADING_COL),a},remove:function(e){var t=this._editor;if(e)e.remove();else if(e=t.elementPath().contains("table",1),e){var n=e.getParent(),r=t.editable();1!==n.getChildCount()||n.is("td","th")||n.equals(r)||(e=n);var o=t.createRange();o.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove()}},setAttributes:function(e,t){t&&Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})},setHeading:function(e,t){e=e||this.getFromSelection();var n=void 0,r=void 0,i=void 0,a=e.getElementsByTag("tbody").getItem(0),l=this.getHeading(e),s=l===o.HEADING_COL||l===o.HEADING_BOTH,u=t===o.HEADING_COL||t===o.HEADING_BOTH,c=t===o.HEADING_ROW||t===o.HEADING_BOTH;if(!e.$.tHead&&c){var f=a.getElementsByTag("tr").getItem(0),d=f.getChildCount();for(n=0;n<d;n++){var p=f.getChild(n);p.type!==CKEDITOR.NODE_ELEMENT||p.data("cke-bookmark")||(p.renameNode("th"),p.setAttribute("scope","col"))}i=this._createElement(e.$.createTHead()),i.append(f.remove())}if(null!==e.$.tHead&&!c){i=this._createElement(e.$.tHead);var h=a.getFirst();while(i.getChildCount()>0){var m=i.getFirst(),y=m.getChildCount();for(n=0;n<y;n++)r=m.getChild(n),r.type===CKEDITOR.NODE_ELEMENT&&(r.renameNode("td"),r.removeAttribute("scope"));m.insertBefore(h)}i.remove()}l=this.getHeading(e);var g=l===o.HEADING_COL||l===o.HEADING_BOTH;if(!g&&u)for(n=0;n<e.$.rows.length;n++)"th"!==e.$.rows[n].cells[0].nodeName.toLowerCase()&&(r=new CKEDITOR.dom.element(e.$.rows[n].cells[0]),r.renameNode("th"),r.setAttribute("scope","row"));if(s&&!u)for(n=0;n<e.$.rows.length;n++){var b=new CKEDITOR.dom.element(e.$.rows[n]);"tbody"===b.getParent().getName()&&(r=new CKEDITOR.dom.element(b.$.cells[0]),r.renameNode("td"),r.removeAttribute("scope"))}},_createElement:function(e){return new CKEDITOR.dom.element(e,this._editor.document)}},CKEDITOR.on("instanceReady",function(e){var t=[o.HEADING_NONE,o.HEADING_ROW,o.HEADING_COL,o.HEADING_BOTH],n=new o(e.editor);t.forEach(function(t){e.editor.addCommand("tableHeading"+t,{exec:function(e){n.setHeading(null,t)}})})}),CKEDITOR.Table=CKEDITOR.Table||o},function(e,t,n){"use strict";CKEDITOR.tools.jsonp=function(e,t,n,r){var o=CKEDITOR.tools.getNextNumber();t=t||{},t.callback="CKEDITOR._.jsonpCallbacks["+o+"]",CKEDITOR._.jsonpCallbacks||(CKEDITOR._.jsonpCallbacks={}),CKEDITOR._.jsonpCallbacks[o]=function(e){setTimeout(function(){a(),n(e)})};var i=new CKEDITOR.dom.element("script");function a(){i&&(i.remove(),delete CKEDITOR._.jsonpCallbacks[o],i=null)}return i.setAttribute("src",e.output(t)),i.on("error",function(){a(),r&&r()}),CKEDITOR.document.getBody().append(i),{cancel:a,id:o}},CKEDITOR.tools.merge=CKEDITOR.tools.merge||function(){for(var e={},t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0;o<n.length;++o){var i=n[o];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},CKEDITOR.tools.simulate=function(e,t){var n=document.createEvent("Events");n.initEvent(t,!0,!1),e.dispatchEvent(n)}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_uicore")||CKEDITOR.plugins.add("ae_uicore",{init:function(e){var t=[],n=this._createAriaElement(e.id),r=e.config.uicore?e.config.uicore.timeout:50,o=CKEDITOR.tools.debounce(function(n){if(t=[],"keyup"!==n.name||27!==n.data.$.keyCode||e.config.allowEsc){var r=e.getSelectionData();r&&e.fire("editorInteraction",{nativeEvent:n.data.$,selectionData:r})}},r),i=CKEDITOR.tools.debounce(function(e){n.innerHTML=t.join(". ")},r),a=CKEDITOR.tools.debounce(function(e){for(var t=document.querySelectorAll(".ae-ui"),n=void 0,r=0;r<t.length;r++)if(t[r].contains(e.data.$.relatedTarget)){n=!0;break}n||o(e)},r);e.on("ariaUpdate",function(e){t.push(e.data.message),i()}),e.once("contentDom",function(){var t=e.editable(),n=t.attachListener(t,"focus",function(e){n.removeListener(),t.attachListener(t,"keyup",o),t.attachListener(t,"mouseup",o),t.attachListener(t,"mouseleave",a),o(e)})}),e.on("destroy",function(e){n.parentNode.removeChild(n),o.detach()})},_createAriaElement:function(e){var t=document.createElement("div");return t.className="ae-sr-only",t.setAttribute("aria-live","polite"),t.setAttribute("role","status"),t.setAttribute("id",e+"LiveRegion"),document.body.appendChild(t),t}})},function(e,t,n){"use strict";var r=CKEDITOR.env.ie;CKEDITOR.plugins.get("ae_addimages")||CKEDITOR.plugins.add("ae_addimages",{init:function(e){var t=this;e.once("contentDom",function(){var n=e.editable();n.attachListener(n,"dragenter",t._onDragEnter,t,{editor:e}),n.attachListener(n,"dragover",t._onDragOver,t,{editor:e}),n.attachListener(n,"drop",t._onDragDrop,t,{editor:e}),n.attachListener(n,"paste",t._onPaste,t,{editor:e})})},_handleFiles:function(e,t){var n=void 0,r=void 0,o=[];for(r=0;r<e.length;r++)n=e[r],0===n.type.indexOf("image")&&o.push(n);var i=t.fire("beforeImageAdd",{imageFiles:o});if(i)for(r=0;r<o.length;r++)n=o[r],this._processFile(n,t);return!1},_onDragDrop:function(e){var t=e.data.$,n=t.dataTransfer.files;if(n.length>0){new CKEDITOR.dom.event(t).preventDefault();var r=e.listenerData.editor;e.listenerData.editor.createSelectionFromPoint(t.clientX,t.clientY),this._handleFiles(n,r)}},_onDragEnter:function(e){r&&this._preventEvent(e)},_onDragOver:function(e){r&&this._preventEvent(e)},_onPaste:function(e){if(e.data&&e.data.$&&e.data.$.clipboardData&&e.data.$.clipboardData.items&&e.data.$.clipboardData.items.length>0){var t=e.data.$.clipboardData.items[0];if(0===t.type.indexOf("image")){var n=t.getAsFile();this._processFile(n,e.listenerData.editor)}}},_preventEvent:function(e){e=new CKEDITOR.dom.event(e.data.$),e.preventDefault(),e.stopPropagation()},_processFile:function(e,t){var n=new FileReader;n.addEventListener("loadend",function(){var r=n.result,o=CKEDITOR.dom.element.createFromHtml('<img src="'+r+'">');t.insertElement(o);var i={el:o,file:e};t.fire("imageAdd",i)}),n.readAsDataURL(e)}})},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_autolink")){/MSIE ([^;]*)|Trident.*; rv:([0-9.]+)/.test(navigator.userAgent)&&document.execCommand("AutoUrlDetect",!1,!1);var r=8,o=188,i=13,a=186,l=32,s=[o,i,a,l],u=/[^\s]+/gim,c="^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$",f=/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}/i;CKEDITOR.plugins.add("ae_autolink",{init:function(e){var t=this;e.once("contentDom",function(){var n=e.editable();n.attachListener(n,"keyup",t._onKeyUp,t,{editor:e})}),e.on("paste",function(e){if("paste"===e.data.method){if(e.data.dataValue.indexOf("<")>-1||e.data.dataValue.indexOf("&lt;")>-1)return void(e.data.dataValue.indexOf('<u><font color="')>-1&&(e.data.dataValue=e.data.dataValue.replace(/<u><font color="#(.*?)">|<\/font><\/u>/g,"")));var n=t;e.data.dataValue=e.data.dataValue.replace(RegExp(c,"gim"),function(e){if(n._isValidURL(e))return n._isValidEmail(e)?'<a href="mailto:'+e+'">'+e+"</a>":'<a href="'+e+'">'+e+"</a>"})}})},_getLastWord:function(e){var t=e.getSelection().getRanges()[0];if(t){var n=t.startOffset,r="";if(this._currentKeyCode===i){var o=t.startContainer.getPrevious(),a=void 0;if(o){while(!o.getLast)o=o.getPrevious();a=o.getLast();while(a&&!a.getText())a=a.getPrevious()}a&&a.$.href||(this._startContainer=a,r=a?a.getText():"",this._offset=r.length)}else this._startContainer=t.startContainer,r=this._startContainer.getText().substring(0,n-1),this._offset=n-1;var l="",s=r.match(u);return s&&(l=s.pop()),l}},_isValidEmail:function(e){return f.test(e)},_isValidURL:function(e){return RegExp(c,"i").test(e)},_onKeyDown:function(e){var t=e.data.$,n=e.listenerData.editor,o=n.editable();o.removeListener("keydown",this._onKeyDown),t.keyCode===r&&(e.cancel(),e.data.preventDefault(),this._removeLink(n)),this._ckLink=null},_onKeyUp:function(e){var t=e.data.$;if(this._currentKeyCode=t.keyCode,-1!==s.indexOf(this._currentKeyCode)){var n=e.listenerData.editor,r=this._getLastWord(n);this._isValidURL(r)&&this._replaceContentByLink(n,r)}},_replaceContentByLink:function(e,t){var n=e.createRange(),r=CKEDITOR.dom.element.get(this._startContainer),o=this._offset;n.setStart(r,o-t.length),n.setEnd(r,o),n.select();var a=new CKEDITOR.Link(e);a.create(t),this._ckLink=a;var l=a.getFromSelection();if(e.fire("autolinkAdd",l),this._subscribeToKeyEvent(e),n=e.getSelection().getRanges()[0],this._currentKeyCode===i){var s=n.getNextEditableNode();n.setStart(s,0),n.setEnd(s,0)}else{var u=n.getEnclosedNode();n.setStart(u,0),n.setEnd(u,0)}n.select()},_removeLink:function(e){var t=e.getSelection().getRanges()[0],n=t.startOffset,r=this._startContainer.getNext()||this._startContainer,o=e.createRange();o.setStart(r,0),o.setEndAfter(r),o.select(),this._ckLink.remove(),t.setEnd(t.startContainer,n),t.setStart(t.startContainer,n),t.select()},_subscribeToKeyEvent:function(e){var t=e.editable();t.attachListener(t,"keydown",this._onKeyDown,this,{editor:e},1)}})}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_autolist")){var r=8,o=32,i=[{regex:/^\*$/,type:"bulletedlist"},{regex:/^1\.$/,type:"numberedlist"}];CKEDITOR.plugins.add("ae_autolist",{init:function(e){var t=this;e.once("contentDom",function(){var n=e.editable();n.attachListener(n,"keydown",t._onKeyDown,t,{editor:e})})},_checkForBackspaceAndUndo:function(e){var t=e.listenerData.editor,n=e.data.$,o=t.editable();o.removeListener("keydown",this._checkForBackspaceAndUndo),n.keyCode===r&&(t.execCommand("undo"),t.insertHtml(e.listenerData.bullet+"&nbsp;"),e.data.preventDefault())},_getListConfig:function(e){var t=e.config.autolist||i,n=e.getSelection().getRanges()[0],r=n.endContainer.getText(),o=r.substring(0,n.startOffset),a=r.substring(n.startOffset,r.length),l=0,s=t.length,u=null;while(!u&&s>l){var c=t[l];if(c.regex.test(o)){u={bullet:o,editor:e,text:a,type:c.type};break}l++}return u},_createList:function(e){var t=e.editor,n=t.getSelection().getRanges()[0];n.endContainer.setText(e.text),t.execCommand(e.type);var r=t.editable();r.attachListener(r,"keydown",this._checkForBackspaceAndUndo,this,{editor:t,bullet:e.bullet},1)},_onKeyDown:function(e){var t=e.data.$;if(t.keyCode===o){var n=this._getListConfig(e.listenerData.editor);n&&(e.data.preventDefault(),this._createList(n))}}})}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_dragresize")){var r={both:["tl","tm","tr","lm","rm","bl","bm","br"],height:["tl","tm","tr","bl","bm","br"],scale:["tl","tr","bl","br"],width:["tl","tr","lm","rm","bl","br"]},o={bl:function(e,t,n,r){h(e,-3+t,r.height-4+n)},bm:function(e,t,n,r){h(e,Math.round(r.width/2)-3+t,r.height-4+n)},br:function(e,t,n,r){h(e,r.width-4+t,r.height-4+n)},lm:function(e,t,n,r){h(e,-3+t,Math.round(r.height/2)-3+n)},tl:function(e,t,n,r){h(e,t-3,n-3)},tm:function(e,t,n,r){h(e,Math.round(r.width/2)-3+t,-3+n)},tr:function(e,t,n,r){h(e,r.width-4+t,-3+n)},rm:function(e,t,n,r){h(e,r.width-4+t,Math.round(r.height/2)-3+n)}},i=7,a="MozAppearance"in document.documentElement.style,l="WebkitAppearance"in document.documentElement.style,s=l||a;function u(e){var t=e.window.$,n=e.document.$;a&&n.execCommand("enableObjectResizing",!1,!1);var r="undefined"===typeof i?null:i;e.config.imageScaleResize=e.config.imageScaleResize||"both";var o=new c(e,{imageScaleResize:e.config.imageScaleResize,snapToSize:r}),l=function(e){o.isHandle(e.target)&&o.initDrag(e)};function s(){var n=e.getSelection();n&&(n.getType()!==CKEDITOR.SELECTION_NONE&&n.getStartElement().is("img")?t.event&&t.event.button&&0!==t.event.button||o.show(n.getStartElement().$):o.hide())}n.addEventListener("mousedown",l,!1),e.on("selectionChange",s),e.on("getData",function(e){var t=e.data.dataValue||"";t=t.replace(/<div id="ckimgrsz"([\s\S]*?)<\/div>/i,""),t=t.replace(/\b(ckimgrsz)\b/g,""),e.data.dataValue=t}),e.on("beforeUndoImage",function(){o.hide()}),e.on("afterUndoImage",function(){s()}),e.on("blur",function(){o.hide()}),e.on("beforeModeUnload",function t(){e.removeListener("beforeModeUnload",t),o.hide()}),e.on("destroy",function(){var e=n.getElementById("ckimgrsz");e&&e.remove(),a&&n.execCommand("enableObjectResizing",!1,!0),n.removeEventListener("mousedown",l)});var u=void 0;e.window.on("resize",function(){clearTimeout(u),u=setTimeout(s,50)})}function c(e,t){this.editor=e,this.window=e.window.$,this.document=e.document.$,this.cfg=t||{},this.init()}function f(e,t){this.window=e,this.document=t,this.events={mousemove:p(this.mousemove,this),keydown:p(this.keydown,this),mouseup:p(this.mouseup,this)}}function d(e){for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return n}function p(e,t){return e.bind?e.bind(t):function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];e.apply(t,r)}}function h(e,t,n){e.style.left=String(t)+"px",e.style.top=String(n)+"px"}function m(e,t,n){var r=this.editor.config.imageScaleResize;"both"===r?(e.style.width=String(t)+"px",e.style.height=String(n)+"px"):"width"===r||"scale"===r?(e.style.height="auto",e.style.width=String(t)+"px"):"height"===r&&(e.style.height=String(n)+"px",e.style.width="auto")}function y(e,t){var n=t.getBoundingClientRect();return{left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:n.width,height:n.height}}s&&CKEDITOR.addCss("img::selection{color:rgba(0,0,0,0)}img.ckimgrsz{outline:1px dashed #000}#ckimgrsz{position:absolute;width:0;height:0;cursor:default;z-index:10001}#ckimgrsz span{display:none;position:absolute;top:0;left:0;width:0;height:0;background-size:100% 100%;opacity:.65;outline:1px dashed #000}#ckimgrsz i{position:absolute;display:block;width:5px;height:5px;background:#fff;border:1px solid #000}#ckimgrsz i.active,#ckimgrsz i:hover{background:#000}#ckimgrsz i.br,#ckimgrsz i.tl{cursor:nwse-resize}#ckimgrsz i.bm,#ckimgrsz i.tm{cursor:ns-resize}#ckimgrsz i.bl,#ckimgrsz i.tr{cursor:nesw-resize}#ckimgrsz i.lm,#ckimgrsz i.rm{cursor:ew-resize}body.dragging-br,body.dragging-br *,body.dragging-tl,body.dragging-tl *{cursor:nwse-resize!important}body.dragging-bm,body.dragging-bm *,body.dragging-tm,body.dragging-tm *{cursor:ns-resize!important}body.dragging-bl,body.dragging-bl *,body.dragging-tr,body.dragging-tr *{cursor:nesw-resize!important}body.dragging-lm,body.dragging-lm *,body.dragging-rm,body.dragging-rm *{cursor:ew-resize!important}"),CKEDITOR.plugins.add("ae_dragresize",{onLoad:function(){},init:function(e){s&&e.once("contentDom",function(t){u(e)})}}),c.prototype={init:function(){var e=this,t=this.container=this.document.createElement("div");t.id="ckimgrsz",this.preview=this.document.createElement("span"),t.appendChild(this.preview);var n=this.handles={};for(var o in r[this.cfg.imageScaleResize].forEach(function(t){n[t]=e.handles[t]=e.createHandle(t)}),n)Object.prototype.hasOwnProperty.call(n,o)&&t.appendChild(n[o])},createHandle:function(e){var t=this.document.createElement("i");return t.classList.add(e),t},isHandle:function(e){var t=this.handles;for(var n in t)if(t[n]===e)return!0;return!1},show:function(e){var t=this.editor.config.uiNode,n=t?t.scrollTop:0;this.el=e,this.cfg.snapToSize&&(this.otherImages=d(this.document.getElementsByTagName("img")),this.otherImages.splice(this.otherImages.indexOf(e),1));var r=this.box=y(this.window,e);h(this.container,r.left,r.top+n),t=t||document.body,t.appendChild(this.container),this.el.classList.add("ckimgrsz"),this.showHandles()},hide:function(){for(var e=this.document.getElementsByClassName("ckimgrsz"),t=0;t<e.length;++t)e[t].classList.remove("ckimgrsz");this.hideHandles(),this.container.parentNode&&this.container.parentNode.removeChild(this.container)},initDrag:function(e){if(0===e.button){var t=this,n=new f(this.window,this.document);n.onStart=function(){t.showPreview(),t.isDragging=!0,t.editor.getSelection().lock()},n.onDrag=function(){t.calculateSize(this),t.updatePreview();var e=t.previewBox;t.updateHandles(e,e.left,e.top)},n.onRelease=function(){t.isDragging=!1,t.hidePreview(),t.hide(),t.editor.getSelection().unlock(),t.editor.fire("saveSnapshot")},n.onComplete=function(){t.resizeComplete(),t.editor.fire("saveSnapshot")},n.start(e)}},updateHandles:function(e,t,n){t=t||0,n=n||0;var r=this.handles;for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&o[i](r[i],t,n,e)},showHandles:function(){var e=this.handles;for(var t in this.updateHandles(this.box),e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].style.display="block")},hideHandles:function(){var e=this.handles;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].style.display="none")},showPreview:function(){this.preview.style.backgroundImage='url("'+this.el.src+'")',this.calculateSize(),this.updatePreview(),this.preview.style.display="block"},updatePreview:function(){var e=this.previewBox;h(this.preview,e.left,e.top),this.preview.style.width=this.previewBox.width+"px",this.preview.style.height=this.previewBox.height+"px"},hidePreview:function(){var e=y(this.window,this.preview);this.result={width:e.width,height:e.height},this.preview.style.display="none"},calculateSize:function(e){var t=this.previewBox={top:0,left:0,width:this.box.width,height:this.box.height};if(e){var n=e.target.className;if(~n.indexOf("r")&&(t.width=Math.max(32,this.box.width+e.delta.x)),~n.indexOf("b")&&(t.height=Math.max(32,this.box.height+e.delta.y)),~n.indexOf("l")&&(t.width=Math.max(32,this.box.width-e.delta.x)),~n.indexOf("t")&&(t.height=Math.max(32,this.box.height-e.delta.y)),n.indexOf("m")<0&&!e.keys.shift){var r=this.box.width/this.box.height;t.width/t.height>r?t.height=Math.round(t.width/r):t.width=Math.round(t.height*r)}var o=this.cfg.snapToSize;if(o)for(var i=this.otherImages,a=0;a<i.length;a++){var l=y(this.window,i[a]);if(Math.abs(t.width-l.width)<=o&&Math.abs(t.height-l.height)<=o){t.width=l.width,t.height=l.height;break}}~n.indexOf("l")&&(t.left=this.box.width-t.width),~n.indexOf("t")&&(t.top=this.box.height-t.height)}},resizeComplete:function(){m.call(this,this.el,this.result.width,this.result.height)}},f.prototype={start:function(e){e.preventDefault(),e.stopPropagation(),this.target=e.target,this.attr=e.target.className,this.startPos={x:e.clientX,y:e.clientY},this.update(e);var t=this.events;this.document.addEventListener("mousemove",t.mousemove,!1),this.document.addEventListener("keydown",t.keydown,!1),this.document.addEventListener("mouseup",t.mouseup,!1),this.document.body.classList.add("dragging-"+this.attr),this.onStart&&this.onStart()},update:function(e){this.currentPos={x:e.clientX,y:e.clientY},this.delta={x:e.clientX-this.startPos.x,y:e.clientY-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey}},mousemove:function(e){this.update(e),this.onDrag&&this.onDrag(),0===e.which&&this.mouseup(e)},keydown:function(e){27===e.keyCode&&this.release()},mouseup:function(e){this.update(e),this.release(),this.onComplete&&this.onComplete()},release:function(){this.document.body.classList.remove("dragging-"+this.attr);var e=this.events;this.document.removeEventListener("mousemove",e.mousemove,!1),this.document.removeEventListener("keydown",e.keydown,!1),this.document.removeEventListener("mouseup",e.mouseup,!1),this.onRelease&&this.onRelease()}}}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_dragresize_ie")){var r={center:1,left:0,right:2},o={both:"nwse-resize",height:"ns-resize",scale:"nwse-resize",width:"ew-resize"},i=/^\s*(\d+%)\s*$/i,a='<img alt="" src="" />';function l(e){e.config.imageScaleResize=e.config.imageScaleResize||"both",e.on("imageAdd",function(t){e.widgets.initOn(t.data.el,"image")});var t=e.config.image2_alignClasses,n=e.config.image2_captionedClass;return{init:function(){var n=CKEDITOR.plugins.image2,o=this.parts.image,i={alt:o.getAttribute("alt")||"",hasCaption:!!this.parts.caption,height:o.getAttribute("height")||"",lock:!this.ready||n.checkHasNaturalRatio(o),src:o.getAttribute("src"),width:o.getAttribute("width")||""},a=o.getAscendant("a");if(a&&this.wrapper.contains(a)&&(this.parts.link=a),!i.align){var l=i.hasCaption?this.element:o;t?(l.hasClass(t[0])?i.align="left":l.hasClass(t[2])&&(i.align="right"),i.align?l.removeClass(t[r[i.align]]):i.align="none"):(i.align=l.getStyle("float")||"none",l.removeStyle("float"))}this.wrapper[(i.hasCaption?"remove":"add")+"Class"]("cke_image_nocaption"),this.setData(i),!0!==e.config.image2_disableResizer&&p(this)},addClass:function(e){y(this).addClass(e)},allowedContent:h(e),contentTransformations:[["img[width]: sizeToAttribute"]],data:function(){var t=this.features;if(this.data.hasCaption&&!e.filter.checkFeature(t.caption)&&(this.data.hasCaption=!1),"none"==this.data.align||e.filter.checkFeature(t.align)||(this.data.align="none"),this.data.link?this.parts.link||(this.parts.link=this.parts.image.getParent()):this.parts.link&&delete this.parts.link,this.parts.image.setAttributes({alt:this.data.alt,contenteditable:!this.parts.image.getAttribute("contenteditable")||this.parts.image.getAttribute("contenteditable"),"data-cke-saved-src":this.data.src,src:this.data.src}),this.oldData&&!this.oldData.hasCaption&&this.data.hasCaption)for(var n in this.data.classes)Object.prototype.hasOwnProperty.call(this.data.classes,n)&&this.parts.image.removeClass(n);e.filter.checkFeature(t.dimension)&&d(this),this.oldData=CKEDITOR.tools.extend({},this.data)},downcast:u(e),draggable:!1,editables:{caption:{selector:"figcaption",allowedContent:"br em strong sub sup u s; a[!href,target]"}},features:m(e),getClasses:function(){var e=new RegExp("^("+[].concat(n,t).join("|")+")$");return function(){var t=this.repository.parseElementClasses(y(this).getAttribute("class"));for(var n in t)e.test(n)&&delete t[n];return t}}(),getLabel:function(){var e=(this.data.alt||"")+" "+this.pathName;return e},hasClass:function(e){return y(this).hasClass(e)},parts:{caption:"figcaption",image:"img"},removeClass:function(e){y(this).removeClass(e)},requiredContent:"img[src,alt]",styleableElements:"img figure",template:a,upcast:s(e)}}function s(e){var t=c(e),n=e.config.image2_captionedClass;return function(e,r){var o={height:1,width:1},a=e.name,l=void 0;if(!e.attributes["data-cke-realelement"]){if(t(e)){if("div"==a){var s=e.getFirst("figure");s&&(e.replaceWith(s),e=s)}r.align="center",l=e.getFirst("img")||e.getFirst("a").getFirst("img")}else"figure"==a&&e.hasClass(n)?l=e.getFirst("img")||e.getFirst("a").getFirst("img"):f(e)&&(l="a"==e.name?e.children[0]:e);if(l){for(var u in o)if(Object.prototype.hasOwnProperty.call(o,u)){var c=l.attributes[u];c&&c.match(i)&&delete l.attributes[u]}return e}}}}function u(e){var t=e.config.image2_alignClasses;return function(e){var n="a"==e.name?e.getFirst():e;delete n.attributes.contenteditable;var o=n.attributes,i=this.data.align;if(!this.inline){var a=e.getFirst("span");a&&a.replaceWith(a.getFirst({a:1,img:1}))}if(i&&"none"!=i){var l=CKEDITOR.tools.parseCssText(o.style||"");"center"==i&&"figure"==e.name?e=e.wrapWith(new CKEDITOR.htmlParser.element("div",t?{class:t[1]}:{style:"text-align:center"})):i in{left:1,right:1}&&(t?n.addClass(t[r[i]]):l["float"]=i),t||CKEDITOR.tools.isEmpty(l)||(o.style=CKEDITOR.tools.writeCssText(l))}return e}}function c(e){var t=e.config.image2_captionedClass,n=e.config.image2_alignClasses,r={a:1,figure:1,img:1};return function(o){if(!(o.name in{div:1,p:1}))return!1;var i=o.children;if(1!==i.length)return!1;var a=i[0];if(!(a.name in r))return!1;if("p"==o.name){if(!f(a))return!1}else if("figure"==a.name){if(!a.hasClass(t))return!1}else{if(e.enterMode==CKEDITOR.ENTER_P)return!1;if(!f(a))return!1}return!(n?!o.hasClass(n[1]):"center"!=CKEDITOR.tools.parseCssText(o.attributes.style||"",!0)["text-align"])}}function f(e){return"img"==e.name||"a"==e.name&&(1==e.children.length&&e.getFirst("img"))}function d(e){var t=e.data,n={height:t.height,width:t.width},r=e.parts.image;for(var o in n)n[o]?r.setAttribute(o,n[o]):r.removeAttribute(o)}function p(e){var t=e.editor,n=t.editable(),r=t.document,i=e.resizer=r.createElement("span");if(i.addClass("cke_image_resizer"),i.addClass("cke_image_resizer_"+o[t.config.imageScaleResize]),i.append(new CKEDITOR.dom.text("",r)),e.inline)e.wrapper.append(i);else{var a=e.parts.link||e.parts.image,l=a.getParent(),s=r.createElement("span");s.addClass("cke_image_resizer_wrapper"),s.append(a),s.append(i),e.element.append(s,!0),l.is("span")&&l.remove()}i.on("mousedown",function(o){var a=e.parts.image,l="right"==e.data.align?-1:1,s=o.data.$.screenX,u=o.data.$.screenY,c=a.$.clientWidth,f=a.$.clientHeight,d=[],p="cke_image_s"+(~l?"e":"w"),h=void 0,m=void 0,y=void 0,g=void 0,b=void 0,v=void 0;function _(e,t,n){var o=CKEDITOR.document,i=[];if(r.equals(o)||i.push(o.on(e,t)),i.push(r.on(e,t)),n)for(var a=i.length;a--;)n.push(i.pop())}function E(e){var n=t.config.imageScaleResize;h=e.data.$,b=h.screenX-s,v=u-h.screenY,"width"!==n&&"both"!==n&&"scale"!==n||(m=c+l*b),"height"!==n&&"both"!==n||(y=f-v),"scale"===n&&(y="auto"),m=m||c,y=y||f,m>=15&&(y>=15||"auto"===y)?(a.$.style.width=m+"px",a.$.style.height=y+"px",g=!0):g=!1}function O(){var r=void 0;while(r=d.pop())r.removeListener();n.removeClass(p),i.removeClass("cke_image_resizing"),g&&(e.setData({height:y,width:m}),t.fire("saveSnapshot")),g=!1}t.fire("saveSnapshot"),_("mousemove",E,d),_("mouseup",O,d),n.addClass(p),i.addClass("cke_image_resizing")}),e.on("data",function(){i["right"==e.data.align?"addClass":"removeClass"]("cke_image_resizer_left")}),e.parts.image.on("click",function(){var e=t.getSelection();if(e){var n=e.getStartElement();if(n){var r=n.findOne("img");if(r){var o=n.getClientRect(),i=new CKEDITOR.dom.window(window).getScrollPosition();o.left-=i.x,o.top+=i.y,o.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,t.fire("editorInteraction",{nativeEvent:event,selectionData:{element:r,region:o}})}}}})}function h(e){var t={figcaption:!0,figure:{classes:"!"+e.config.image2_captionedClass},img:{attributes:"!src,alt,width,height"}};return t}function m(e){var t=e.config.image2_alignClasses,n={align:{requiredContent:"img"+(t?"("+t[0]+")":"{float}")},caption:{requiredContent:"figcaption"},dimension:{requiredContent:"img[width,height]"}};return n}function y(e){return e.data.hasCaption?e.element:e.parts.image}CKEDITOR.plugins.add("ae_dragresize_ie",{hidpi:!0,icons:"image",init:function(e){var t=l(e);e.widgets.add("image",t)},onLoad:function(){CKEDITOR.addCss(".cke_image_resizer_nwse-resize{cursor: nwse-resize;}.cke_image_resizer_ns-resize{cursor: ns-resize;}.cke_image_resizer_nwse-resize{cursor: nwse-resize;}.cke_image_resizer_ew-resize{cursor: ew-resize;}.cke_image_nocaption{line-height:0}.cke_image_resizer{display:none;position:absolute;width:10px;height:10px;bottom:-5px;right:-5px;background:#000;outline:1px solid #fff;line-height:0;cursor:nwse-resize;}.cke_image_resizer_wrapper{position:relative;display:inline-block;line-height:0;}.cke_widget_wrapper:hover .cke_image_resizer,.cke_image_resizer.cke_image_resizing{display:block}")},requires:"widget"}),CKEDITOR.plugins.image2={checkHasNaturalRatio:function(e){var t=e.$,n=this.getNatural(e);return Math.round(t.clientWidth/n.width*n.height)==t.clientHeight||Math.round(t.clientHeight/n.height*n.width)==t.clientWidth},getNatural:function(e){var t=void 0;if(e.$.naturalWidth)t={height:e.$.naturalHeigh,width:e.$.naturalWidth};else{var n=new Image;n.src=e.getAttribute("src"),t={height:n.heigh,width:n.width}}return t}}}CKEDITOR.config.image2_captionedClass="image"},function(e,t,n){"use strict";(function(){if(!CKEDITOR.plugins.get("ae_dragresize_ie11")){var e='<img alt="" src="" />',t=new CKEDITOR.template('<figure class="{captionedClass}">'+e+"<figcaption>{captionPlaceholder}</figcaption></figure>"),n={left:0,center:1,right:2},r=/^\s*(\d+%)\s*$/i;CKEDITOR.plugins.add("ae_dragresize_ie11",{requires:"widget",onLoad:function(){CKEDITOR.addCss(".cke_image_nocaption{line-height:0}.cke_editable.cke_image_ne, .cke_editable.cke_image_ne *{cursor:ne-resize !important}.cke_editable.cke_image_nw, .cke_editable.cke_image_nw *{cursor:nw-resize !important}.cke_editable.cke_image_sw, .cke_editable.cke_image_sw *{cursor:sw-resize !important}.cke_editable.cke_image_se, .cke_editable.cke_image_se *{cursor:se-resize !important}.cke_image_resizer{display:none;position:absolute;width:10px;height:10px;background:#000;outline:1px solid #fff;line-height:0;cursor:se-resize;}.cke_image_resizer_wrapper{position:relative;display:inline-block;line-height:0;}.cke_image_resizer.cke_image_resizer_ne{cursor:ne-resize;left:auto;right:-5px;top:-5px;}.cke_image_resizer.cke_image_resizer_nw{cursor:nw-resize;left:-5px;right:auto;top:-5px;}.cke_image_resizer.cke_image_resizer_se{bottom:-5px;cursor:se-resize;left:auto;right:-5px;}.cke_image_resizer.cke_image_resizer_sw{bottom:-5px;cursor:sw-resize;left:-5px;right:auto;}.cke_widget_wrapper:hover .cke_image_resizer,.cke_image_resizing>.cke_image_resizer{display:block}.cke_widget_wrapper>a{display:inline-block}")},init:function(e){var t=i(e);e.widgets.add("image",t),e.on("selectionChange",function(t){var n=e.getSelection();if(n){var r=n.getSelectedElement();if(r){var o=r.findOne("img");if(o){var i=r.getClientRect(),a=new CKEDITOR.dom.window(window).getScrollPosition();i.left-=a.x,i.top+=a.y,i.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,e.fire("editorInteraction",{nativeEvent:{},selectionData:{element:o,region:i}})}}}})},afterInit:function(e){var t={left:1,right:1,center:1,block:1},n=p(e);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n(r)}}),CKEDITOR.plugins.ae_dragresize_ie11={stateShifter:function(e){var n=e.document,r=e.config.ae_dragresize_ie11_alignClasses,o=e.config.ae_dragresize_ie11_captionedClass,i=e.editable(),a=["hasCaption","align","link"],l={align:function(t,n,o){var i=t.element;t.changed.align||"auto"===i.$.style.marginLeft&&"auto"===i.$.style.marginRight?t.newData.hasCaption||(("center"==o||"auto"===i.$.style.marginLeft&&"auto"===i.$.style.marginRight)&&(t.deflate(),t.element=s(e,i)),t.changed.hasCaption||"center"!=n||"center"==o||(t.deflate(),t.element=u(i))):"center"==o&&t.changed.hasCaption&&!t.newData.hasCaption&&(t.deflate(),t.element=s(e,i)),!r&&i.is("figure")&&("center"==o?i.setStyle("display","inline-block"):i.removeStyle("display"))},hasCaption:function(r,i,a){if(r.changed.hasCaption){var l=void 0;if(l=r.element.is({img:1,a:1})?r.element:r.element.findOne("a,img"),r.deflate(),a){var s=CKEDITOR.dom.element.createFromHtml(t.output({captionedClass:o,captionPlaceholder:e.lang.ae_dragresize_ie11.captionPlaceholder}),n);d(s,r.element),l.replace(s.findOne("img")),r.element=s}else l.replace(r.element),r.element=l}},link:function(t,n,r){if(t.changed.link){var o=t.element.is("img")?t.element:t.element.findOne("img"),i=t.element.is("a")?t.element:t.element.findOne("a"),a=t.element.is("a")&&!r||t.element.is("img")&&r,l=void 0;if(a&&t.deflate(),r){n||(l=c(o,t.newData.link));var s=CKEDITOR.plugins.ae_dragresize_ie11.getLinkAttributesGetter()(e,r);CKEDITOR.tools.isEmpty(s.set)||(l||i).setAttributes(s.set),s.removed.length&&(l||i).removeAttributes(s.removed)}else l=f(i);a&&(t.element=l)}}};function s(e,t){var o={};r?o.attributes={class:r[1]}:o.styles={"text-align":"center"};var i=n.createElement(e.activeEnterMode==CKEDITOR.ENTER_P?"p":"div",o);return d(i,t),t.move(i),i}function u(e){var t=e.findOne("a,img");return t.replace(e),t}function c(e,t){var r=n.createElement("a",{attributes:{href:t.url}});return r.replace(e),e.move(r),r}function f(e){var t=e.findOne("img");return t.replace(e),t}function d(t,n){if(n.getParent()){var r=e.createRange();r.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n.remove(),i.insertElementIntoRange(t,r)}else t.replace(n)}return function(e){var t=void 0,n=void 0;for(e.changed={},n=0;n<a.length;n++)t=a[n],e.changed[t]=!!e.oldData&&e.oldData[t]!==e.newData[t];for(n=0;n<a.length;n++)t=a[n],l[t](e,e.oldData?e.oldData[t]:null,e.newData[t]);e.inflate()}},checkHasNaturalRatio:function(e){var t=e.$,n=this.getNatural(e);return Math.round(t.clientWidth/n.width*n.height)==t.clientHeight||Math.round(t.clientHeight/n.height*n.width)==t.clientWidth},getNatural:function(e){var t=void 0;if(e.$.naturalWidth)t={width:e.$.naturalWidth,height:e.$.naturalHeight};else{var n=new Image;n.src=e.getAttribute("src"),t={width:n.width,height:n.height}}return t},getLinkAttributesGetter:function(){return CKEDITOR.plugins.link.getLinkAttributes},getLinkAttributesParser:function(){return CKEDITOR.plugins.link.parseLinkAttributes}};var o=function(e,t){"left"===t||"right"===t?e.wrapper.removeStyle("float"):"center"===t&&(e.editor.execCommand("justifyleft"),e.editor.execCommand("justifyleft"))}}function i(t){var r=t.config.ae_dragresize_ie11_alignClasses,o=t.config.ae_dragresize_ie11_captionedClass;function i(){this.deflated||(t.widgets.focused==this.widget&&(this.focused=!0),t.widgets.destroy(this.widget),this.deflated=!0)}function u(){var e=t.editable(),n=t.document;if(this.deflated){if(this.widget=t.widgets.initOn(this.element,"image",this.widget.data),this.widget.inline&&!new CKEDITOR.dom.elementPath(this.widget.wrapper,e).block){var o=n.createElement(t.activeEnterMode==CKEDITOR.ENTER_P?"p":"div");o.replace(this.widget.wrapper),this.widget.wrapper.move(o)}this.focused&&(this.widget.focus(),delete this.focused),delete this.deflated}else a(this.widget,r)}return{allowedContent:m(t),requiredContent:"img[src,alt]",features:y(t),styleableElements:"img figure",contentTransformations:[["img[width]: sizeToAttribute"]],editables:{caption:{selector:"figcaption",allowedContent:"br em strong sub sup u s; a[!href,target]"}},parts:{image:"img",caption:"figcaption"},template:e,data:function(){var e=this.features;if(this.data.hasCaption&&!t.filter.checkFeature(e.caption)&&(this.data.hasCaption=!1),"none"==this.data.align||t.filter.checkFeature(e.align)||(this.data.align="none"),this.shiftState({widget:this,element:this.element,oldData:this.oldData,newData:this.data,deflate:i,inflate:u}),this.data.link?this.parts.link||(this.parts.link=this.parts.image.getParent()):this.parts.link&&delete this.parts.link,this.parts.image.setAttributes({src:this.data.src,"data-cke-saved-src":this.data.src,alt:this.data.alt}),this.oldData&&!this.oldData.hasCaption&&this.data.hasCaption)for(var n in this.data.classes)Object.prototype.hasOwnProperty.call(this.data.classes,n)&&this.parts.image.removeClass(n);t.filter.checkFeature(e.dimension)&&f(this),this.oldData=CKEDITOR.tools.extend({},this.data)},init:function(){var e=CKEDITOR.plugins.ae_dragresize_ie11,o=this.parts.image,i={hasCaption:!!this.parts.caption,src:o.getAttribute("src"),alt:o.getAttribute("alt")||"",width:o.getAttribute("width")||"",height:o.getAttribute("height")||"",lock:!this.ready||e.checkHasNaturalRatio(o)},a=o.getAscendant("a");if(a&&this.wrapper.contains(a)&&(this.parts.link=a),!i.align){var l=i.hasCaption?this.element:o;r?(l.hasClass(r[0])?i.align="left":l.hasClass(r[2])&&(i.align="right"),i.align?l.removeClass(r[n[i.align]]):i.align="none"):(i.align=l.getStyle("float")||"none",l.removeStyle("float"))}if(t.plugins.link&&this.parts.link){i.link=e.getLinkAttributesParser()(t,this.parts.link);var s=i.link.advanced;s&&s.advCSSClasses&&(s.advCSSClasses=CKEDITOR.tools.trim(s.advCSSClasses.replace(/cke_\S+/,"")))}this.wrapper[(i.hasCaption?"remove":"add")+"Class"]("cke_image_nocaption"),this.setData(i),t.filter.checkFeature(this.features.dimension)&&!0!==t.config.ae_dragresize_ie11_disableResizer&&d(this);var u=this.dragHandlerContainer.$.style;u.setAttribute("backgroundColor","rgba(255, 255, 255, 1"),u.setAttribute("opacity","1"),this.shiftState=e.stateShifter(this.editor),this.on("contextMenu",function(e){e.data.image=CKEDITOR.TRISTATE_OFF,(this.parts.link||this.wrapper.getAscendant("a"))&&(e.data.link=e.data.unlink=CKEDITOR.TRISTATE_OFF)})},addClass:function(e){g(this).addClass(e)},hasClass:function(e){return g(this).hasClass(e)},removeClass:function(e){g(this).removeClass(e)},getClasses:function(){var e=new RegExp("^("+[].concat(o,r).join("|")+")$");return function(){var t=this.repository.parseElementClasses(g(this).getAttribute("class"));for(var n in t)e.test(n)&&delete t[n];return t}}(),upcast:l(t),downcast:s(t),getLabel:function(){var e=(this.data.alt||"")+" "+this.pathName;return this.editor.lang.widget.label.replace(/%1/,e)}}}function a(e,t){var r=e.wrapper,o=e.data.align,i=e.data.hasCaption;if(t){for(var a=3;a--;)r.removeClass(t[a]);"center"==o?i&&r.addClass(t[1]):"none"!=o&&r.addClass(t[n[o]])}else{"center"==o?(i?r.setStyle("text-align","center"):r.removeStyle("text-align"),r.removeStyle("float")):("none"==o?r.removeStyle("float"):r.setStyle("float",o),r.removeStyle("text-align"));var l=r.$.querySelector("img"),s=l.getAttribute("style");if(s){var u="",c=/(height:.+?;)/.exec(s);c&&(u+=c[0]);var f=/(width:.+?;)/.exec(s);f&&(u+=f[0]),l.setAttribute("style",u)}}}function l(e){var t=u(e),n=e.config.ae_dragresize_ie11_captionedClass;return function(e,o){var i={width:1,height:1},a=e.name,l=void 0;if(!e.attributes["data-cke-realelement"]){if(t(e)){if("div"==a){var s=e.getFirst("figure");s&&(e.replaceWith(s),e=s)}o.align="center",l=e.getFirst("img")||e.getFirst("a").getFirst("img")}else"figure"==a&&e.hasClass(n)?l=e.getFirst("img")||e.getFirst("a").getFirst("img"):c(e)&&(l="a"==e.name?e.children[0]:e);if(l){for(var u in i)if(Object.prototype.hasOwnProperty.call(i,u)){var f=l.attributes[u];f&&f.match(r)&&delete l.attributes[u]}return e}}}}function s(e){var t=e.config.ae_dragresize_ie11_alignClasses;return function(e){var r="a"==e.name?e.getFirst():e,o=r.attributes,i=this.data.align;if(!this.inline){var a=e.getFirst("span");a&&a.replaceWith(a.getFirst({img:1,a:1}))}if(i&&"none"!=i){var l=CKEDITOR.tools.parseCssText(o.style||"");"center"==i&&"figure"==e.name?e=e.wrapWith(new CKEDITOR.htmlParser.element("div",t?{class:t[1]}:{style:"text-align:center"})):i in{left:1,right:1}&&(t?r.addClass(t[n[i]]):l["float"]=i),t||CKEDITOR.tools.isEmpty(l)||(o.style=CKEDITOR.tools.writeCssText(l)+";")}return e}}function u(e){var t=e.config.ae_dragresize_ie11_captionedClass,n=e.config.ae_dragresize_ie11_alignClasses,r={figure:1,a:1,img:1};return function(o){if(!(o.name in{div:1,p:1}))return!1;var i=o.children;if(1!==i.length)return!1;var a=i[0];if(!(a.name in r))return!1;if("p"==o.name){if(!c(a))return!1}else if("figure"==a.name){if(!a.hasClass(t))return!1}else{if(e.enterMode==CKEDITOR.ENTER_P)return!1;if(!c(a))return!1}return!(n?!o.hasClass(n[1]):"center"!=CKEDITOR.tools.parseCssText(o.attributes.style||"",!0)["text-align"])}}function c(e){return"img"==e.name||"a"==e.name&&(1==e.children.length&&e.getFirst("img"))}function f(e){var t=e.data,n={width:t.width,height:t.height},r=e.parts.image;for(var o in n)n[o]?r.setAttribute(o,n[o]):r.removeAttribute(o)}function d(e){var t=e.editor,n=t.editable(),r=t.document,o=e.resizer=r.createElement("span"),i=r.createElement("span"),a=r.createElement("span"),l=r.createElement("span"),s=r.createElement("span");if(i.addClass("cke_image_resizer"),i.addClass("cke_image_resizer_ne"),a.addClass("cke_image_resizer"),a.addClass("cke_image_resizer_nw"),l.addClass("cke_image_resizer"),l.addClass("cke_image_resizer_se"),s.addClass("cke_image_resizer"),s.addClass("cke_image_resizer_sw"),o.append(i),o.append(a),o.append(l),o.append(s),o.append(new CKEDITOR.dom.text("",r)),e.inline)e.wrapper.append(o);else{var u=e.parts.link||e.parts.image,c=u.getParent(),f=r.createElement("span");f.addClass("cke_image_resizer_wrapper"),f.append(u),f.append(o),e.element.append(f,!0),c.is("span")&&c.remove()}o.on("mousedown",function(i){var a=e.parts.image,l=i.data.$.screenX,s=i.data.$.screenY,u=a.$.clientWidth,c=a.$.clientHeight,f=u/c,d=[],p=i.data.getTarget(),h=void 0,m=void 0,y=void 0,g=void 0,b=void 0,v=void 0,_=void 0,E=void 0;p.hasClass("cke_image_resizer_ne")?(h=1,m=1):p.hasClass("cke_image_resizer_nw")?(h=-1,m=1):p.hasClass("cke_image_resizer_se")?(h=1,m=-1):p.hasClass("cke_image_resizer_sw")&&(h=-1,m=-1);var O="cke_image_"+(~m?"n":"s")+(~h?"e":"w");function w(e,t,n){var o=CKEDITOR.document,i=[];if(r.equals(o)||i.push(o.on(e,t)),i.push(r.on(e,t)),n)for(var a=i.length;a--;)n.push(i.pop())}function C(){_=u+h*y,v=Math.round(_/f)}function k(){v=c+m*g,_=Math.round(v*f)}function T(e){b=e.data.$,y=b.screenX-l,g=s-b.screenY,1==h?y<=0?k():C():y<=0?C():k(),_>=15&&v>=15?(a.$.style.width=_+"px",a.$.style.height=v+"px",E=!0):E=!1}function x(){var r=void 0;while(r=d.pop())r.removeListener();n.removeClass(O),o.removeClass("cke_image_resizing"),E&&(e.setData({height:v,width:_}),t.fire("saveSnapshot")),E=!1}t.fire("saveSnapshot"),w("mousemove",T,d),w("mouseup",x,d),n.addClass(O),o.addClass("cke_image_resizing")})}function p(e){var t=[],n=void 0;return function(r){var i=e.getCommand("justify"+r);i&&(t.push(function(){i.refresh(e,e.elementPath())}),r in{right:1,left:1,center:1}&&i.on("exec",function(n){var i=h(e);if(i){i.data.align===r?(o(i,r),delete i.data.align):i.setData("align",r);for(var a=t.length;a--;)t[a]();n.cancel()}}),i.on("refresh",function(t){var o=h(e),i={right:1,left:1,center:1};o&&(void 0===n&&(n=e.filter.checkFeature(e.widgets.registered.image.features.align)),n?this.setState(o.data.align==r?CKEDITOR.TRISTATE_ON:r in i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED):this.setState(CKEDITOR.TRISTATE_DISABLED),t.cancel())}))}}function h(e){var t=e.widgets.focused;return t&&"image"==t.name?t:null}function m(e){var t=e.config.ae_dragresize_ie11_alignClasses,n={div:{match:u(e)},p:{match:u(e)},img:{attributes:"!src,alt,width,height"},figure:{classes:"!"+e.config.ae_dragresize_ie11_captionedClass},figcaption:!0};return t?(n.div.classes=t[1],n.p.classes=n.div.classes,n.img.classes=t[0]+","+t[2],n.figure.classes+=","+n.img.classes):(n.div.styles="text-align",n.p.styles="text-align",n.img.styles="float",n.figure.styles="float,display"),n}function y(e){var t=e.config.ae_dragresize_ie11_alignClasses,n={dimension:{requiredContent:"img[width,height]"},align:{requiredContent:"img"+(t?"("+t[0]+")":"{float}")},caption:{requiredContent:"figcaption"}};return n}function g(e){return e.data.hasCaption?e.element:e.parts.image}})(),CKEDITOR.config.ae_dragresize_ie11_captionedClass="image"},function(e,t,n){"use strict";var r=n(126);if(!CKEDITOR.plugins.get("ae_embed")){var o=/^https?/,i=/<a href=/;CKEDITOR.DEFAULT_AE_EMBED_URL_TPL="http://alloy.iframe.ly/api/oembed?url={url}&callback={callback}",CKEDITOR.DEFAULT_AE_EMBED_WIDGET_TPL='<div data-ae-embed-url="{url}"></div>',CKEDITOR.DEFAULT_AE_EMBED_DEFAULT_LINK_TPL='<a href="{url}">{url}</a>',CKEDITOR.plugins.add("ae_embed",{requires:"widget",init:function(e){var t=new CKEDITOR.template(e.config.embedUrlTemplate||CKEDITOR.DEFAULT_AE_EMBED_URL_TPL),n=new CKEDITOR.template(e.config.embedWidgetTpl||CKEDITOR.DEFAULT_AE_EMBED_WIDGET_TPL),a=new CKEDITOR.template(e.config.embedLinkDefaultTpl||CKEDITOR.DEFAULT_AE_EMBED_DEFAULT_LINK_TPL),l=function(e,t){if("div"===e.name&&e.attributes["data-ae-embed-url"])return t.url=e.attributes["data-ae-embed-url"],!0};e.addCommand("embedUrl",{exec:function(e,t){e.insertHtml(n.output({url:t.url}))}}),e.widgets.add("ae_embed",{mask:!0,requiredContent:"div[data-ae-embed-url]",data:function(e){var n=this,r=e.data.url;r&&CKEDITOR.tools.jsonp(t,{url:encodeURIComponent(r)},function(e){e.html?i.test(e.html)?n.createATag(r):n.element.setHtml(e.html):n.createATag(r)},function(e){n.createATag(r)})},createATag:function(e){this.editor.execCommand("undo");var t=a.output({url:e});this.editor.insertHtml(t),this.editor.fire("actionPerformed",this)},upcast:function(t,n){var r=e.config.embedWidgetUpcastFn||l;return r(t,n)}}),e.once("contentDom",function(){e.on("paste",function(t){var n=t.data.dataValue;o.test(n)&&(t.stop(),e.execCommand("embedUrl",{url:t.data.dataValue}))},null,null,r.HIGH_PRIORITY)}),e.on("selectionChange",function(t){var n=e.getSelection();if(n){var r=n.getSelectedElement();if(r){var o=r.findOne('[data-widget="ae_embed"]');if(o){var i=r.getClientRect(),a=new CKEDITOR.dom.window(window).getScrollPosition();i.left-=a.x,i.top+=a.y,i.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,e.fire("editorInteraction",{nativeEvent:{},selectionData:{element:o,region:i}})}}}}),e.filter.addElementCallback(function(e){if("data-ae-embed-url"in e.attributes)return CKEDITOR.FILTER_SKIP_TREE})}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DEFAULT_PRIORITY=10,t.HIGH_PRIORITY=5},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(128),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}if(!CKEDITOR.plugins.get("embedurl")){var a=/^https?/;CKEDITOR.DEFAULT_LFR_EMBED_WIDGET_TPL='<div data-embed-url="{url}" class="embed-responsive embed-responsive-16by9">{content}<div class="embed-help-message">{helpMessageIcon}<span> {helpMessage}</span></div></div><br>';var l={CENTER:"center",LEFT:"left",RIGHT:"right"},s=[l.CENTER,l.LEFT,l.RIGHT],u=[{name:"display",value:"block"},{name:"margin-left",value:"auto"},{name:"margin-right",value:"auto"}],c=function(e){var t=e.getStyle("float");if(t&&"inherit"!==t&&"none"!==t||(t=e.getAttribute("align")),!t){var n=u.every(function(t){var n=e.getStyle(t.name)===t.value;return!n&&t.vendorPrefixes&&(n=t.vendorPrefixes.some(function(n){return e.getStyle(n+t.name)===t.value})),n});t=n?l.CENTER:null}return t},f=function(e,t){t===l.LEFT||t===l.RIGHT?(e.removeStyle("float"),t===c(e)&&e.removeAttribute("align")):t===l.CENTER&&u.forEach(function(t){e.removeStyle(t.name),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(n){return e.removeStyle(n+t.name)})})},d=function(e,t){f(e,c(e)),t===l.LEFT||t===l.RIGHT?e.setStyle("float",t):t===l.CENTER&&u.forEach(function(t){e.setStyle(t.name,t.value),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(n){return e.setStyle(n+t.name,t.value)})})},p=function(e){var t={alignment:null,element:null},n=e.getSelection();if(n){var r=n.getSelectedElement();r&&r.getAttribute("data-cke-widget-wrapper")&&(t.alignment=c(r),t.element=r)}return t},h=function(e,t,n){var r=e.parentElement;if(r&&t>0&&n>0){var o=r.getBoundingClientRect(),i=t>=o.width?100:Math.floor(t/o.width*100),a="width:"+i+"%;";r.setAttribute("style",a);var l=r.querySelector('[data-widget="embedurl"]');if(l){var s=JSON.parse(l.getAttribute("data-styles"))||{};s.width=t+"px",s.height=n+"px",l.setAttribute("data-styles",JSON.stringify(s));var u=l.querySelector("iframe");u&&(u.setAttribute("width",t),u.setAttribute("height",n))}}},m=function(e){setTimeout(function(){var t=e.getSelection();if(t){var n=t.root.find("[data-cke-widget-wrapper]");if(n){var r=n.$;if(r.length>0){var o=new CKEDITOR.dom.element(r[r.length-1]),i=o.findOne("img"),a=o.findOne('[data-widget="embedurl"]');if(i&&a){var l=e.createRange();l.setStart(a,0),l.setEnd(i,1),t.selectRanges([l]),t.selectElement(o)}}}}},0)},y=null,g=null,b=null;CKEDITOR.plugins.add("embedurl",{requires:"widget",init:function(e){var t=new CKEDITOR.template(e.config.embedWidgetTpl||CKEDITOR.DEFAULT_LFR_EMBED_WIDGET_TPL),n=e.config.embedProviders||[];n=n.map(function(e){return{id:e.id,tpl:new CKEDITOR.template('<div data-embed-id="{embedId}">'+e.tpl+"</div>"),type:e.type,urlSchemes:e.urlSchemes.map(function(e){return new RegExp(e)})}});var r=function(e,n){return t.output({content:n,helpMessage:AlloyEditor.Strings.videoPlaybackDisabled,helpMessageIcon:Liferay.Util.getLexiconIconTpl("info-circle"),url:e})},i=function(e,t){var n=!1;if("div"===e.name&&e.attributes["data-embed-url"])t.url=e.attributes["data-embed-url"],n=!0;else if("div"===e.name&&e.attributes["data-embed-id"]){var o=e.children[0];t.url=o.attributes.src,delete e.attributes.style;var i=r(t.url,e.getOuterHtml()),a=new CKEDITOR.htmlParser.fragment.fromHtml(i);n=a.children[0],n.attributes["data-styles"]=e.attributes["data-styles"],n.removeClass("embed-responsive"),n.removeClass("embed-responsive-16by9"),e.replaceWith(n)}return n},l=function(t){e.fire("error",t),setTimeout(function(){e.getSelection().removeAllRanges(),e.focus(),b.hide()},0)};e.addCommand("embedUrl",{exec:function(e,t){var o=t.type,i=t.url,s=void 0;if(a.test(i)){var u=n.filter(function(e){return!o||e.type===o}).some(function(e){var t=e.urlSchemes.find(function(e){return e.test(i)});if(t){var n=t.exec(i)[1];s=e.tpl.output({embedId:n})}return t});if(u){e._selectEmbedWidget=i;var c=r(i,s);e.insertHtml(c)}else l(AlloyEditor.Strings.platformNotSupported)}else l(AlloyEditor.Strings.enterValidUrl)}}),e.widgets.add("embedurl",{draggable:!1,mask:!0,requiredContent:"div[data-embed-url]",data:function(t){var n=this,r=null,o=n.element.getAttribute("data-styles");if(o)try{r=JSON.parse(o)}catch(e){r=null}if(!r){var i=n.wrapper.findOne("iframe"),a=n.wrapper.$.getBoundingClientRect(),l=i.getAttribute("width"),s=l>=a.width?100:Math.round(l/a.width*100);r={width:s+"%"}}n.wrapper.setAttribute("style",CKEDITOR.tools.writeCssText(r)),e._selectEmbedWidget===t.data.url&&m(e)},downcast:function(e){var t=e.children[0];return t.attributes.class="embed-responsive embed-responsive-16by9",t.attributes["data-styles"]=JSON.stringify(CKEDITOR.tools.parseCssText(e.parent.attributes.style)),t.attributes.style=e.parent.attributes.style,t},upcast:function(t,n){var r=e.config.embedWidgetUpcastFn||i;return r(t,n)}}),window.addEventListener("resize",function(){b.hide(),m(e)},!1),e.on("selectionChange",function(t){var n=e.getSelection();if(n){var r=n.getSelectedElement();if(r){var o=r.findOne('[data-widget="embedurl"]');if(o){var i=new CKEDITOR.dom.window(window).getScrollPosition(),a=r.getClientRect();a.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,a.left-=i.x,a.top+=i.y,e.fire("editorInteraction",{nativeEvent:{},selectionData:{element:o,region:a}})}var l=r.findOne("img.cke_widget_mask");l&&b.show(l.$)}else b.hide()}}),e.on("destroy",function(){var e=document.getElementById("ckimgrsz");e&&e.remove(),document.removeEventListener("mousedown",s)}),e.on("blur",function(){b.hide()}),e.filter.addElementCallback(function(e){if("data-embed-url"in e.attributes)return CKEDITOR.FILTER_SKIP_TREE});var s=function(t){var n=p(e);y=n.alignment,g=n.element,b.isHandle(t.target)&&b.initDrag(t)};b=new o.default(e,{onComplete:function(t,n,r){h(t,n,r),y&&g&&d(g,y),m(e)}}),document.addEventListener("mousedown",s,!1)},afterInit:function(e){s.forEach(function(t){var n=e.getCommand("justify"+t);n&&(n.on("exec",function(n){var r=e.getSelection().getSelectedElement();if(r&&r.getAttribute("data-cke-widget-wrapper")){var o=r.findOne('[data-widget="embedurl"] [data-embed-id]');if(o){var i=c(r);i===t?f(r,t):d(r,t),g=r,y=c(r);var a=r.findOne("img");a&&b.show(a.$),n.cancel();var l=new CKEDITOR.dom.elementPath(r);s.forEach(function(t){var n=e.getCommand("justify"+t);n&&n.refresh(e,l)})}}}),n.on("refresh",function(e){var n=e.data.path.lastElement;if(n&&n.getAttribute("data-cke-widget-wrapper")&&n.findOne("[data-widget] [data-embed-id]")){var r=c(n);e.sender.setState(r===t?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.cancel()}}))})}})}t.default=CKEDITOR.plugins.get("embedurl")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resizer=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(129),i=a(o);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=["tl","tr","bl","br"],u={bl:function(e,t,n,r){c(e,-3+t,r.height-4+n)},br:function(e,t,n,r){c(e,r.width-4+t,r.height-4+n)},rm:function(e,t,n,r){c(e,r.width-4+t,Math.round(r.height/2)-3+n)},tl:function(e,t,n,r){c(e,t-3,n-3)},tr:function(e,t,n,r){c(e,r.width-4+t,-3+n)}},c=function(e,t,n){e.style.left=t+"px",e.style.top=n+"px"},f=function(e,t){var n=t.getBoundingClientRect();return{height:n.height,left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:n.width}},d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.cfg=n,this.editor=t,this.document=t.document?t.document.$:document,this.window=t.window?t.window.$:window,this.box=null,this.container=null,this.handles={},this.preview=null,this.previewBox=null,this.result=null,this.init()}return r(e,[{key:"init",value:function(){var e=this;this.container=this.document.createElement("div"),this.container.id="ckimgrsz",this.preview=this.document.createElement("span"),this.container.appendChild(this.preview),this.handles={},s.forEach(function(t){e.handles[t]=e.createHandle(t)});for(var t=Object.keys(this.handles),n=0;n<t.length;n++)this.container.appendChild(this.handles[t[n]])}},{key:"createHandle",value:function(e){var t=this.document.createElement("i");return t.classList.add(e),t}},{key:"isHandle",value:function(e){for(var t=Object.keys(this.handles),n=!1,r=0;r<t.length;r++)this.handles[t[r]]===e&&(n=!0);return n}},{key:"show",value:function(e){var t=this.editor.config.uiNode||document.body;this.el=e,this.box=f(this.window,this.el),c(this.container,this.box.left,this.box.top+t.scrollTop),t.appendChild(this.container),this.el.classList.add("ckimgrsz"),this.showHandles()}},{key:"hide",value:function(){for(var e=this.document.getElementsByClassName("ckimgrsz"),t=0;t<e.length;t++)e[t].classList.remove("ckimgrsz");this.hideHandles(),this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"initDrag",value:function(e){var t=this;if(0===e.button){var n=new i.default(this.window,this.document);n.onStart=function(){t.showPreview(),t.isDragging=!0,t.editor.getSelection().lock()},n.onDrag=function(){t.calculateSize(n);var e=t.editor.element.$.getBoundingClientRect();if(!(t.previewBox.width>=e.width)){t.updatePreview();var r=t.previewBox;t.updateHandles(r,r.left,r.top)}},n.onRelease=function(){t.hidePreview(),t.isDragging=!1,t.hide(),t.editor.getSelection().unlock(),t.editor.fire("saveSnapshot")},n.onComplete=function(){t.resizeComplete(),t.editor.fire("saveSnapshot")},n.start(e)}}},{key:"updateHandles",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object.keys(this.handles),o=0;o<r.length;o++)u[r[o]](this.handles[r[o]],t,n,e)}},{key:"showHandles",value:function(){this.updateHandles(this.box);for(var e=Object.keys(this.handles),t=0;t<e.length;t++)this.handles[e[t]].style.display="block"}},{key:"hideHandles",value:function(){for(var e=Object.keys(this.handles),t=0;t<e.length;t++)this.handles[e[t]].style.display="none"}},{key:"showPreview",value:function(){this.calculateSize(),this.updatePreview(),this.preview.style.display="block"}},{key:"updatePreview",value:function(){c(this.preview,this.previewBox.left,this.previewBox.top),this.preview.style.height=this.previewBox.height+"px",this.preview.style.width=this.previewBox.width+"px"}},{key:"hidePreview",value:function(){var e=f(this.window,this.preview);this.result={height:e.height,width:e.width},this.preview.style.display="none"}},{key:"calculateSize",value:function(e){if(this.previewBox={height:this.box.height,left:0,top:0,width:this.box.width},e){var t=e.target.className;if(t.indexOf("r")>=0&&(this.previewBox.width=Math.max(32,this.box.width+e.delta.x)),t.indexOf("b")>=0&&(this.previewBox.height=Math.max(32,this.box.height+e.delta.y)),t.indexOf("l")>=0&&(this.previewBox.width=Math.max(32,this.box.width-e.delta.x)),t.indexOf("t")>=0&&(this.previewBox.height=Math.max(32,this.box.height-e.delta.y)),t.indexOf("m")<0&&!e.keys.shift){var n=this.box.width/this.box.height;this.previewBox.width/this.previewBox.height>n?this.previewBox.height=Math.round(this.previewBox.width/n):this.previewBox.width=Math.round(this.previewBox.height*n)}t.indexOf("l")>=0&&(this.previewBox.left=this.box.width-this.previewBox.width),t.indexOf("t")>=0&&(this.previewBox.top=this.box.height-this.previewBox.height)}}},{key:"resizeComplete",value:function(){this.cfg.onComplete(this.el,this.result.width,this.result.height)}}]),e}();t.Resizer=d,t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t,n){o(this,e),this.document=n,this.window=t,this.events={keydown:this.keydown.bind(this),mousemove:this.mousemove.bind(this),mouseup:this.mouseup.bind(this)}}return r(e,[{key:"start",value:function(e){e.preventDefault(),e.stopPropagation(),this.target=e.target,this.className=this.target.className,this.startPos={x:e.clientX,y:e.clientY},this.update(e),this.document.addEventListener("keydown",this.events.keydown,!1),this.document.addEventListener("mousemove",this.events.mousemove,!1),this.document.addEventListener("mouseup",this.events.mouseup,!1),this.document.body.classList.add("dragging-"+this.className),"function"===typeof this.onStart&&this.onStart()}},{key:"update",value:function(e){this.currentPos={x:e.clientX,y:e.clientY},this.delta={x:e.clientX-this.startPos.x,y:e.clientY-this.startPos.y},this.keys={alt:e.altKey,ctrl:e.ctrlKey,shift:e.shiftKey}}},{key:"mousemove",value:function(e){this.update(e),"function"===typeof this.onDrag&&this.onDrag(),0===e.which&&this.mouseup(e)}},{key:"keydown",value:function(e){27===e.keyCode&&this.release()}},{key:"mouseup",value:function(e){this.update(e),this.release(),"function"===typeof this.onComplete&&this.onComplete()}},{key:"release",value:function(){this.document.body.classList.remove("dragging-"+this.className),this.document.removeEventListener("keydown",this.events.keydown,!1),this.document.removeEventListener("mousemove",this.events.mousemove,!1),this.document.removeEventListener("mouseup",this.events.mouseup,!1),"function"===typeof this.onRelease&&this.onRelease()}}]),e}();t.DragEvent=i,t.default=i},function(e,t,n){"use strict";var r=n(22),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}if(!CKEDITOR.plugins.get("ae_imagealignment")){var l,s={CENTER:"center",LEFT:"left",RIGHT:"right"},u=[s.LEFT,s.RIGHT,s.CENTER],c=(l={},a(l,s.LEFT,[{name:"display",value:"inline-block"},{name:"float",value:"left"},{name:"margin-right",value:"1.2rem"}]),a(l,s.CENTER,[{name:"display",value:"block"},{name:"margin-left",value:"auto"},{name:"margin-right",value:"auto"}]),a(l,s.RIGHT,[{name:"display",value:"inline-block"},{name:"float",value:"right"},{name:"margin-left",value:"1.2rem"}]),l),f=function(e){var t=e.getStyle("float");if(t&&"inherit"!==t&&"none"!==t||(t=e.getAttribute("align")),!t){var n=c[s.CENTER].every(function(t){var n=e.getStyle(t.name)===t.value;return!n&&t.vendorPrefixes&&(n=t.vendorPrefixes.some(function(n){return e.getStyle(n+t.name)===t.value})),n});if(!t){var r=e.$.parentNode;r.style.textAlign==s.CENTER&&(c[s.CENTER].forEach(function(t){e.setStyle(t.name,t.value),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(n){e.setStyle(n+t.name,t.value)})}),n=!0,r.style.textAlign="")}t=n?s.CENTER:null}if(!CKEDITOR.env.edge&&CKEDITOR.env.ie){var o=e.findOne("p");o&&(t=o.getStyle("text-align"))}return t},d=function(e,t){if(t===s.LEFT||t===s.RIGHT)t===f(e)&&e.removeAttribute("align");else if(t===s.CENTER){var n=e.$.parentNode;n.style.textAlign==s.CENTER&&(n.style.textAlign="")}var r=c[t];r&&r.forEach(function(t){e.removeStyle(t.name),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(n){e.removeStyle(n+t.name)})})},p=function(e,t){d(e,f(e));var n=c[t];n&&n.forEach(function(t){e.setStyle(t.name,t.value),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(n){e.setStyle(n+t.name,t.value)})})};CKEDITOR.plugins.add("ae_imagealignment",{afterInit:function(e){var t=this;u.forEach(function(n){var r=e.getCommand("justify"+n);r&&(r.on("exec",function(r){var i=e.getSelectionData();if(i&&o.default.image({data:{selectionData:i}})){var a=i.element,l=f(a);l===n?d(a,n):p(a,n),r.cancel(),t.refreshCommands(e,new CKEDITOR.dom.elementPath(a))}}),r.on("refresh",function(e){var t={element:e.data.path.lastElement};if(o.default.image({data:{selectionData:t}})){var r=f(t.element);this.setState(r===n?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.cancel()}}))})},refreshCommands:function(e,t){u.forEach(function(n){var r=e.getCommand("justify"+n);r&&r.refresh(e,t)})}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_pasteimages")||CKEDITOR.plugins.add("ae_pasteimages",{init:function(e){var t=this;e.once("contentDom",function(){var n=e.editable();n.attachListener(n,"paste",t._onPaste,t,{editor:e})})},_onPaste:function(e){if(e.data.$.clipboardData){var t=e.data.$.clipboardData.items[0],n=e.listenerData.editor;if(0===t.type.indexOf("image")){var r=new FileReader,o=t.getAsFile();r.onload=function(e){var t=n.fire("beforeImageAdd",{imageFiles:o});if(t){var r=CKEDITOR.dom.element.createFromHtml('<img src="'+e.target.result+'">');n.insertElement(r);var i={el:r,file:o};n.fire("imageAdd",i)}},r.readAsDataURL(o)}}}})},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_placeholder")){var r=CKEDITOR.env.needsBrFiller?"<br>":"",o={1:["<p>"+r+"</p>"],2:[""," ",r],3:["<div>"+r+"</div>"]};CKEDITOR.plugins.add("ae_placeholder",{init:function(e){e.on("blur",this._checkEmptyData,this),e.on("change",this._checkEmptyData,this),e.on("focus",this._removePlaceholderClass,this),e.once("contentDom",this._checkEmptyData,this)},_checkEmptyData:function(e){var t=e.editor,n=t.editable(),r=n.$.innerHTML.trim(),i=o[t.config.enterMode].some(function(e){return r===e});i?n.addClass(t.config.placeholderClass):n.removeClass(t.config.placeholderClass)},_removePlaceholderClass:function(e){var t=e.editor,n=new CKEDITOR.dom.element(t.element.$);n.removeClass(t.config.placeholderClass)}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_selectionkeystrokes")||CKEDITOR.plugins.add("ae_selectionkeystrokes",{requires:"ae_selectionregion",init:function(e){e.config.selectionKeystrokes&&e.config.selectionKeystrokes.forEach(function(t){var n=new CKEDITOR.command(e,{exec:function(e){e.fire("editorInteraction",{manualSelection:t.selection,nativeEvent:{},selectionData:e.getSelectionData()})}}),r="selectionKeystroke"+t.selection;e.addCommand(r,n),e.setKeystroke(t.keys,r)})}})},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_tableresize")){var r=CKEDITOR.tools.cssLength;function o(e){return CKEDITOR.env.ie?e.$.clientWidth:parseInt(e.getComputedStyle("width"),10)}function i(e,t){var n=e.getComputedStyle("border-"+t+"-width"),r={thin:"0px",medium:"1px",thick:"2px"};return n.indexOf("px")<0&&(n=n in r&&"none"!=e.getComputedStyle("border-style")?r[n]:0),parseInt(n,10)}function a(e){for(var t=e.$.rows,n=0,r=void 0,o=void 0,i=void 0,a=0,l=t.length;a<l;a++)i=t[a],r=i.cells.length,r>n&&(n=r,o=i);return o}function l(e){for(var t=[],n=-1,r="rtl"===e.getComputedStyle("direction"),o=a(e),l=new CKEDITOR.dom.element(e.$.tBodies[0]),s=l.getDocumentPosition(),u=0,c=o.cells.length;u<c;u++){var f=new CKEDITOR.dom.element(o.cells[u]),d=o.cells[u+1]&&new CKEDITOR.dom.element(o.cells[u+1]);n+=f.$.colSpan||1;var p=void 0,h=void 0,m=f.getDocumentPosition().x;r?h=m+i(f,"left"):p=m+f.$.offsetWidth-i(f,"right"),d?(m=d.getDocumentPosition().x,r?p=m+d.$.offsetWidth-i(d,"right"):h=m+i(d,"left")):(m=e.getDocumentPosition().x,r?p=m:h=m+e.$.offsetWidth);var y=Math.max(h-p,4);t.push({table:e,index:n,x:p,y:s.y,width:y,height:l.$.offsetHeight,rtl:r})}return t}function s(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t>=o.x&&t<=o.x+o.width)return o}return null}function u(e){(e.data||e).preventDefault()}function c(e,t){var n=void 0,a=void 0,l=void 0,s=void 0,c=void 0,f=void 0,d=void 0,p=e.document,h=CKEDITOR.dom.element.createFromHtml('<div data-cke-temp=1 contenteditable=false unselectable=on style="position:absolute;cursor:col-resize;filter:alpha(opacity=0);opacity:0;padding:0;background-color:#004;background-image:none;border:0px none;z-index:10"></div>',p),m=this.isResizing=function(){return s},y=this.move=function(e){var t=e-Math.round(h.$.offsetWidth/2);if(m){if(t===a||t===c)return;t=Math.max(t,a),t=Math.min(t,c),n=t-d}h.setStyle("left",r(t))};function g(){h.removeListener("mouseup",O),h.removeListener("mousedown",E),h.removeListener("mousemove",w)}function b(){for(var e=t.index,r=CKEDITOR.tools.buildTableMap(t.table),i=[],m=[],y=Number.MAX_VALUE,g=y,b=t.rtl,v=0,_=r.length;v<_;v++){var E=r[v],O=E[e+(b?1:0)],C=E[e+(b?0:1)];O=O&&new CKEDITOR.dom.element(O),C=C&&new CKEDITOR.dom.element(C),O&&C&&O.equals(C)||(O&&(y=Math.min(y,o(O))),C&&(g=Math.min(g,o(C))),i.push(O),m.push(C))}l=i,f=m,a=t.x-y,c=t.x+g,h.setOpacity(.5),d=parseInt(h.getStyle("left"),10),n=0,s=1,h.on("mousemove",w),p.on("dragstart",u)}function v(){s=0,h.setOpacity(0),n&&_();var e=t.table;setTimeout(function(){e.removeCustomData("_cke_table_pillars")},0),p.removeListener("dragstart",u)}function _(){for(var e=this,a=t.rtl,s=a?f.length:l.length,u=function(s){var u=l[s],c=f[s],d=t.table;CKEDITOR.tools.setTimeout(function(e,t,n,o,i,l){e&&e.setStyle("width",r(Math.max(t+l,1))),n&&n.setStyle("width",r(Math.max(o-l,1))),i&&d.setStyle("width",r(i+l*(a?-1:1)))},0,e,[u,u&&o(u),c,c&&o(c),(!u||!c)&&o(d)+i(d,"left")+i(d,"right"),n])},c=0;c<s;c++)u(c)}function E(e){u(e),b(),p.on("mouseup",O,this)}function O(e){e.removeListener(),v()}function w(e){y(e.data.getPageOffset().x)}e.on("destroy",function(){g(),h.remove()}),p.getDocumentElement().append(h),h.setStyles({width:r(t.width),height:r(t.height),left:r(t.x),top:r(t.y)}),h.on("mousedown",E,this),p.getBody().setStyle("cursor","col-resize"),h.show(),this.destroy=function(){g(),p.getBody().setStyle("cursor","auto"),h.remove()}}function f(e){var t=e.data.getTarget();if("mouseout"===e.name){if(!t.is("table"))return;var n=new CKEDITOR.dom.element(e.data.$.relatedTarget||e.data.$.toElement);while(n&&n.$&&!n.equals(t)&&!n.is("body"))n=n.getParent();if(!n||n.equals(t))return}t.getAscendant("table",1).removeCustomData("_cke_table_pillars"),e.removeListener()}CKEDITOR.plugins.add("ae_tableresize",{requires:"ae_tabletools",init:function(e){e.on("contentDom",function(){var t=void 0,n=e.editable();n.attachListener(n.isInline()?n:e.document,"mousemove",function(n){n=n.data;var r=n.getTarget();if(r.type===CKEDITOR.NODE_ELEMENT){var o=n.getPageOffset().x;if(t){if(t.isResizing())return t.move(o),void u(n);t.destroy(),t=null}var i=void 0;if(r.is("table")||r.getAscendant("tbody",1)){var a=r.getAscendant("table",1);if(e.editable().contains(a)){(i=a.getCustomData("_cke_table_pillars"))||(a.setCustomData("_cke_table_pillars",i=l(a)),a.on("mouseout",f),a.on("mousedown",f));var d=s(i,o);d&&(t=new c(e,d))}}}})})}})}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_tabletools")){var r=/^(?:td|th)$/;function o(e){var t=e.getRanges(),n=[],o={};function i(e){n.length>0||e.type==CKEDITOR.NODE_ELEMENT&&r.test(e.getName())&&!e.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(o,e,"selected_cell",!0),n.push(e))}for(var a=0;a<t.length;a++){var l=t[a];if(l.collapsed){var s=l.getCommonAncestor(),u=s.getAscendant("td",!0)||s.getAscendant("th",!0);u&&n.push(u)}else{var c=new CKEDITOR.dom.walker(l),f=void 0;c.guard=i;while(f=c.next())if(f.type!=CKEDITOR.NODE_ELEMENT||!f.is(CKEDITOR.dtd.table)){var d=f.getAscendant("td",!0)||f.getAscendant("th",!0);d&&!d.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(o,d,"selected_cell",!0),n.push(d))}}}return CKEDITOR.dom.element.clearAllMarkers(o),n}function i(e){var t=0,n=e.length-1,r={},o=void 0,i=void 0,a=void 0;while(o=e[t++])CKEDITOR.dom.element.setMarker(r,o,"delete_cell",!0);t=0;while(o=e[t++])if((i=o.getPrevious())&&!i.getCustomData("delete_cell")||(i=o.getNext())&&!i.getCustomData("delete_cell"))return CKEDITOR.dom.element.clearAllMarkers(r),i;return CKEDITOR.dom.element.clearAllMarkers(r),a=e[0].getParent(),(a=a.getPrevious())?a.getLast():(a=e[n].getParent(),(a=a.getNext())?a.getChild(0):null)}function a(e,t){for(var n=e.getSelection(),r=o(n),i=r[0],a=i.getAscendant("table"),l=i.getDocument(),s=r[0].getParent(),u=s.$.rowIndex,c=r[r.length-1],d=c.getParent().$.rowIndex+c.$.rowSpan-1,p=new CKEDITOR.dom.element(a.$.rows[d]),h=t?u:d,m=t?s:p,y=CKEDITOR.tools.buildTableMap(a),g=y[h],b=t?y[h-1]:y[h+1],v=y[0].length,_=l.createElement("tr"),E=0;g[E]&&E<v;E++){var O=void 0;g[E].rowSpan>1&&b&&g[E]==b[E]?(O=g[E],O.rowSpan+=1):(O=new CKEDITOR.dom.element(g[E]).clone(),O.removeAttribute("rowSpan"),O.appendBogus(),_.append(O),O=O.$),E+=O.colSpan-1}t?_.insertBefore(m):_.insertAfter(m);var w=new CKEDITOR.dom.element(_.$).getChild(r[0]?r[0].$.cellIndex:0);f(e,w)}function l(e){if(e instanceof CKEDITOR.dom.selection){for(var t=o(e),n=t[0],r=n.getAscendant("table"),i=CKEDITOR.tools.buildTableMap(r),a=t[0].getParent(),s=a.$.rowIndex,u=t[t.length-1],c=u.getParent().$.rowIndex+u.$.rowSpan-1,f=[],d=s;d<=c;d++){for(var p=i[d],h=new CKEDITOR.dom.element(r.$.rows[d]),m=0;m<p.length;m++){var y=new CKEDITOR.dom.element(p[m]),g=y.getParent().$.rowIndex;if(1==y.$.rowSpan)y.remove();else if(y.$.rowSpan-=1,g==d){var b=i[d+1];b[m-1]?y.insertAfter(new CKEDITOR.dom.element(b[m-1])):new CKEDITOR.dom.element(r.$.rows[d+1]).append(y,1)}m+=y.$.colSpan-1}f.push(h)}for(var v=r.$.rows,_=new CKEDITOR.dom.element(v[c+1]||(s>0?v[s-1]:null)||r.$.parentNode),E=f.length;E>=0;E--)l(f[E]);return _}if(e instanceof CKEDITOR.dom.element){var O=e.getAscendant("table");1==O.$.rows.length?O.remove():e.remove()}return null}function s(e,t){for(var n=e.getParent(),r=n.$.cells,o=0,i=0;i<r.length;i++){var a=r[i];if(o+=t?1:a.colSpan,a==e.$)break}return o-1}function u(e,t){for(var n=t?1/0:0,r=0;r<e.length;r++){var o=s(e[r],t);(t?o<n:o>n)&&(n=o)}return n}function c(e,t){for(var n=e.getSelection(),r=o(n),i=r[0],a=i.getAscendant("table"),l=u(r,1),s=u(r),c=t?l:s,d=CKEDITOR.tools.buildTableMap(a),p=[],h=[],m=d.length,y=0;y<m;y++){p.push(d[y][c]);var g=t?d[y][c-1]:d[y][c+1];h.push(g)}for(var b=[],v=0;v<m;v++){var _=void 0;p[v]&&(p[v].colSpan>1&&h[v]==p[v]?(_=p[v],_.colSpan+=1):(_=new CKEDITOR.dom.element(p[v]).clone(),_.removeAttribute("colSpan"),_.appendBogus(),_[t?"insertBefore":"insertAfter"].call(_,new CKEDITOR.dom.element(p[v])),_=_.$),b[v]=_,v+=_.rowSpan-1)}var E=new CKEDITOR.dom.element(b[i.getParent().$.rowIndex]);f(e,E)}function f(e,t){var n=e.createRange();n.moveToPosition(t,CKEDITOR.POSITION_AFTER_START),e.getSelection().selectRanges([n])}function d(e){for(var t=o(e),n=t[0],r=t[t.length-1],i=n.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(i),l=void 0,s=void 0,u=[],c=void 0,f=0,d=a.length;f<d;f++)for(var p=0,h=a[f].length;p<h;p++)a[f][p]==n.$&&(l=p),a[f][p]==r.$&&(s=p);for(var m=l;m<=s;m++)for(var y=0;y<a.length;y++){var g=a[y],b=new CKEDITOR.dom.element(i.$.rows[y]),v=new CKEDITOR.dom.element(g[m]);v.$&&(1==v.$.colSpan?v.remove():v.$.colSpan-=1,y+=v.$.rowSpan-1,b.$.cells.length||u.push(b))}var _=i.$.rows[0]&&i.$.rows[0].cells,E=new CKEDITOR.dom.element(_[l]||(l?_[l-1]:i.$.parentNode));return u.length==c&&i.remove(),E}function p(e,t){var n=e.getStartElement(),r=n.getAscendant("td",1)||n.getAscendant("th",1);if(r){var o=r.clone();o.appendBogus(),t?o.insertBefore(r):o.insertAfter(r)}}function h(e){if(e instanceof CKEDITOR.dom.selection){for(var t=o(e),n=t[0]&&t[0].getAscendant("table"),r=i(t),a=t.length-1;a>=0;a--)h(t[a]);r?y(r,!0):n&&n.remove()}else if(e instanceof CKEDITOR.dom.element){var l=e.getParent();1==l.getChildCount()?l.remove():e.remove()}}function m(e){var t=e.getBogus();t&&t.remove(),e.trim()}function y(e,t){var n=e.getDocument(),r=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(r.focus(),n.focus());var o=new CKEDITOR.dom.range(n);o["moveToElementEdit"+(t?"End":"Start")](e)||(o.selectNodeContents(e),o.collapse(!t)),o.select(!0)}function g(e,t,n){var r=e[t];if("undefined"==typeof n)return r;for(var o=0;r&&o<r.length;o++){if(n.is&&r[o]==n.$)return o;if(o==n)return new CKEDITOR.dom.element(r[o])}return n.is?-1:null}function b(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(o[t]),o[t].rowSpan>1&&(r+=o[t].rowSpan-1)}return n}function v(e,t,n){var r=o(e),i=void 0;if((t?1!=r.length:r.length<2)||(i=e.getCommonAncestor())&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("table"))return!1;var a=void 0,l=r[0],s=l.getAscendant("table"),u=CKEDITOR.tools.buildTableMap(s),c=u.length,f=u[0].length,d=l.getParent().$.rowIndex,p=g(u,d,l);if(t){var h=void 0;try{var y=parseInt(l.getAttribute("rowspan"),10)||1,b=parseInt(l.getAttribute("colspan"),10)||1;h=u["up"==t?d-y:"down"==t?d+y:d]["left"==t?p-b:"right"==t?p+b:p]}catch(e){return!1}if(!h||l.$==h)return!1;r["up"==t||"left"==t?"unshift":"push"](new CKEDITOR.dom.element(h))}for(var v=l.getDocument(),_=d,E=0,O=0,w=!n&&new CKEDITOR.dom.documentFragment(v),C=0,k=0;k<r.length;k++){a=r[k];var T=a.getParent(),x=a.getFirst(),S=a.$.colSpan,P=a.$.rowSpan,I=T.$.rowIndex,D=g(u,I,a);if(C+=S*P,O=Math.max(O,D-p+S),E=Math.max(E,I-d+P),!n){if(m(a),a.getChildren().count()){if(I!=_&&x&&(!x.isBlockBoundary||!x.isBlockBoundary({br:1}))){var R=w.getLast(CKEDITOR.dom.walker.whitespaces(!0));!R||R.is&&R.is("br")||w.append("br")}a.moveChildren(w)}k?a.remove():a.setHtml("")}_=I}if(n)return E*O==C;w.moveChildren(l),l.appendBogus(),O>=f?l.removeAttribute("rowSpan"):l.$.rowSpan=E,E>=c?l.removeAttribute("colSpan"):l.$.colSpan=O;for(var j=new CKEDITOR.dom.nodeList(s.$.rows),A=j.count(),K=A-1;K>=0;K--){var M=j.getItem(K);M.$.cells.length||(M.remove(),A++)}return l}function _(e,t){var n=o(e);if(n.length>1)return!1;if(t)return!0;var r=n[0],i=r.getParent(),a=i.getAscendant("table"),l=CKEDITOR.tools.buildTableMap(a),s=i.$.rowIndex,u=g(l,s,r),c=r.$.rowSpan,f=void 0,d=void 0,p=void 0,h=void 0;if(c>1){d=Math.ceil(c/2),p=Math.floor(c/2),h=s+d;var m=new CKEDITOR.dom.element(a.$.rows[h]),y=g(l,h),b=void 0;f=r.clone();for(var v=0;v<y.length;v++){if(b=y[v],b.parentNode==m.$&&v>u){f.insertBefore(new CKEDITOR.dom.element(b));break}b=null}b||m.append(f)}else{p=d=1;var _=i.clone();_.insertAfter(i),_.append(f=r.clone());for(var E=g(l,s),O=0;O<E.length;O++)E[O].rowSpan++}return f.appendBogus(),r.$.rowSpan=d,f.$.rowSpan=p,1==d&&r.removeAttribute("rowSpan"),1==p&&f.removeAttribute("rowSpan"),f}function E(e,t){var n=o(e);if(n.length>1)return!1;if(t)return!0;var r=n[0],i=r.getParent(),a=i.getAscendant("table"),l=CKEDITOR.tools.buildTableMap(a),s=i.$.rowIndex,u=g(l,s,r),c=r.$.colSpan,f=void 0,d=void 0;if(c>1)f=Math.ceil(c/2),d=Math.floor(c/2);else{d=f=1;for(var p=b(l,u),h=0;h<p.length;h++)p[h].colSpan++}var m=r.clone();return m.insertAfter(r),m.appendBogus(),r.$.colSpan=f,m.$.colSpan=d,1==f&&r.removeAttribute("colSpan"),1==d&&m.removeAttribute("colSpan"),m}CKEDITOR.plugins.add("ae_tabletools",{init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function n(t,n){var r=e.getCommand(t);r||(r=e.addCommand(t,n),e.addFeature(r))}n("rowDelete",t({requiredContent:"table",exec:function(e){var t=e.getSelection();y(l(t))}})),n("rowInsertBefore",t({requiredContent:"table",exec:function(e){a(e,!0)}})),n("rowInsertAfter",t({requiredContent:"table",exec:function(e){a(e)}})),n("columnDelete",t({requiredContent:"table",exec:function(e){var t=e.getSelection(),n=d(t);n&&y(n,!0)}})),n("columnInsertBefore",t({requiredContent:"table",exec:function(e){c(e,!0)}})),n("columnInsertAfter",t({requiredContent:"table",exec:function(e){c(e)}})),n("cellDelete",t({requiredContent:"table",exec:function(e){var t=e.getSelection();h(t)}})),n("cellMerge",t({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e){y(v(e.getSelection()),!0)}})),n("cellMergeRight",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){y(v(e.getSelection(),"right"),!0)}})),n("cellMergeDown",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){y(v(e.getSelection(),"down"),!0)}})),n("cellVerticalSplit",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){y(_(e.getSelection()))}})),n("cellHorizontalSplit",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){y(E(e.getSelection()))}})),n("cellInsertBefore",t({requiredContent:"table",exec:function(e){var t=e.getSelection();p(t,!0)}})),n("cellInsertAfter",t({requiredContent:"table",exec:function(e){var t=e.getSelection();p(t)}}))},getSelectedCells:o})}CKEDITOR.tools.buildTableMap=function(e){for(var t=e.$.rows,n=-1,r=[],o=0;o<t.length;o++){n++,r[n]||(r[n]=[]);for(var i=-1,a=0;a<t[o].cells.length;a++){var l=t[o].cells[a];i++;while(r[n][i])i++;for(var s=isNaN(l.colSpan)?1:l.colSpan,u=isNaN(l.rowSpan)?1:l.rowSpan,c=0;c<u;c++){r[n+c]||(r[n+c]=[]);for(var f=0;f<s;f++)r[n+c][i+f]=t[o].cells[a]}i+=s-1}}return r}},function(e,t,n){"use strict";n(137),n(138),n(139),n(140),n(141),n(142)},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=s(o),a=n(2),l=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(!CKEDITOR.plugins.get("ae_buttonbridge")){var d={};function p(e,t,n){var o,a,s=AlloyEditor.Buttons[e];(d[n.name]=d[n.name]||{},d[n.name][e]=d[n.name][e]||t,s)||(a=o=function(t){function n(){var t,r,o,i;u(this,n);for(var a=arguments.length,l=Array(a),s=0;s<a;s++)l[s]=arguments[s];return o=c(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(l))),r=o,o._handleClick=function(){var t=o.context.editor.get("nativeEditor"),n=d[t.name][e].command,r=d[t.name][e].onClick;r?r.call(o):t.execCommand(n),t.fire("actionPerformed",o)},i=r,c(o,i)}return f(n,t),r(n,[{key:"toFeature",value:function(){}},{key:"render",value:function(){var t=this.context.editor.get("nativeEditor"),n="ae-button ae-button-bridge",r=d[t.name][e].name||d[t.name][e].command||e,o=d[t.name][e].label,a="button-"+r,l="ae-icon-"+r,s={},u=CKEDITOR.skin.getIconStyle(r);if(u){var c=u.split(";");s.backgroundImage=c[0].substring(c[0].indexOf(":")+1),s.backgroundPosition=c[1].substring(c[1].indexOf(":")+1),s.backgroundSize=c[2].substring(c[2].indexOf(":")+1)}return i.default.createElement("button",{"aria-label":o,className:n,"data-type":a,onClick:this._handleClick,tabIndex:this.props.tabIndex,title:o},i.default.createElement("span",{className:l,style:s}))}}]),n}(i.default.Component),o.contextType=l.default,o.displayName=e,o.key=e,s=a,AlloyEditor.Buttons[e]=s);return s}CKEDITOR.plugins.get("button")||(CKEDITOR.UI_BUTTON="button",CKEDITOR.plugins.add("button",{})),CKEDITOR.plugins.add("ae_buttonbridge",{requires:["ae_uibridge"],beforeInit:function(e){e.ui.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)},e.ui.addHandler(CKEDITOR.UI_BUTTON,{add:p,create:function(e){var t="buttonBridge"+(1e9*Math.random()>>>0),n=p(t,e);return new n}})}})}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(2),l=c(a),s=n(12),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(!CKEDITOR.plugins.get("ae_menubuttonbridge")){var h={};function m(e,t,n){var o,a,s=AlloyEditor.Buttons[e];(h[n.name]=h[n.name]||{},h[n.name][e]=h[n.name][e]||t,s)||(a=o=function(n){function o(){return f(this,o),d(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return p(o,n),r(o,[{key:"toFeature",value:function(){}},{key:"render",value:function(){var t=this.context.editor.get("nativeEditor"),n=h[t.name][e].name||h[t.name][e].command||e,r="ae-button ae-button-bridge",o="ae-icon-"+n,a={},l=CKEDITOR.skin.getIconStyle(n);if(l){var s=l.split(";");a.backgroundImage=s[0].substring(s[0].indexOf(":")+1),a.backgroundPosition=s[1].substring(s[1].indexOf(":")+1),a.backgroundSize=s[2].substring(s[2].indexOf(":")+1)}return i.default.createElement("div",{className:"ae-container ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":h[t.name][e].label,className:r,onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:h[t.name][e].label},i.default.createElement("span",{className:o,style:a})),this.props.expanded&&i.default.createElement(u.default,{onDismiss:this.props.toggleDropdown},this._getMenuItems()))}},{key:"_getMenuItems",value:function(){var e=this.context.editor.get("nativeEditor"),n=t.onMenu(),r=Object.keys(n).map(function(t){var r=e.getMenuItem(t);if(!r)return null;var o=r.definition||r,a=n[t],l="ae-toolbar-element "+(a===CKEDITOR.TRISTATE_ON?"active":""),s=a===CKEDITOR.TRISTATE_DISABLED,u=function(){o.command?e.execCommand(o.command):o.onClick&&o.onClick.apply(o)};return i.default.createElement("li",{key:r.name,role:"option"},i.default.createElement("button",{className:l,disabled:s,onClick:u},o.label))});return r}}]),o}(i.default.Component),o.contextType=l.default,o.displayName=e,o.key=e,s=a,AlloyEditor.Buttons[e]=s);return s}CKEDITOR.plugins.get("menubutton")||(CKEDITOR.UI_MENU_BUTTON="menubutton",CKEDITOR.plugins.add("menubutton",{})),CKEDITOR.plugins.add("ae_menubuttonbridge",{requires:["ae_uibridge","ae_menubridge"],beforeInit:function(e){e.ui.addMenuButton=function(e,t){this.add(e,CKEDITOR.UI_MENUBUTTON,t)},e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,{add:m,create:function(e){var t="buttonBridge"+(1e9*Math.random()>>>0),n=m(t,e);return new n}})}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_menubridge")||CKEDITOR.plugins.add("ae_menubridge",{beforeInit:function(e){if(!CKEDITOR.plugins.get("menu")){for(var t=[],n=e._.menuGroups={},r=e._.menuItems={},o=0;o<t.length;o++)n[t[o]]=o+1;e.addMenuGroup=function(e,t){n[e]=t||100},e.addMenuItem=function(e,t){n[t.group]&&(r[e]={name:e,definition:t})},e.addMenuItems=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return r[e]},e.removeMenuItem=function(e){delete r[e]}}}})},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=c(o),a=n(2),l=c(a),s=n(12),u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(!CKEDITOR.plugins.get("ae_panelmenubuttonbridge")){var h={},m=function(e,t,n){var o,a,s=AlloyEditor.Buttons[e];(h[n.name]=h[n.name]||{},h[n.name][e]=h[n.name][e]||t,s)||(a=o=function(t){function n(){return f(this,n),d(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return p(n,t),r(n,[{key:"createPanel",value:function(){}},{key:"render",value:function(){var t=this.context.editor.get("nativeEditor"),n=h[t.name][e].name||h[t.name][e].command||e,r="ae-button ae-button-bridge",o="ae-icon-"+n,a={},l=CKEDITOR.skin.getIconStyle(n);if(l){var s=l.split(";");a.backgroundImage=s[0].substring(s[0].indexOf(":")+1),a.backgroundPosition=s[1].substring(s[1].indexOf(":")+1),a.backgroundSize=s[2].substring(s[2].indexOf(":")+1)}var u=void 0;return this.props.expanded&&(u=this._getPanel()),i.default.createElement("div",{className:"ae-container ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":h[t.name][e].label,className:r,onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:h[t.name][e].label},i.default.createElement("span",{className:o,style:a})),u)}},{key:"_getPanel",value:function(){var t=this.context.editor.get("nativeEditor"),n=h[t.name][e].onBlock,r={hide:this.props.toggleDropdown,show:this.props.toggleDropdown},o=new CKEDITOR.dom.element("div"),a={element:o,keys:{}};return n&&n.call(this,r,a),i.default.createElement(u.default,{onDismiss:this.props.toggleDropdown},i.default.createElement("div",{className:o.getAttribute("class"),dangerouslySetInnerHTML:{__html:o.getHtml()}}))}}]),n}(i.default.Component),o.contextType=l.default,o.displayName=e,o.key=e,s=a,AlloyEditor.Buttons[e]=s);return s};CKEDITOR.plugins.get("panelmenubutton")||(CKEDITOR.UI_PANELBUTTON="panelmenubutton",CKEDITOR.plugins.add("panelmenubutton",{})),CKEDITOR.plugins.get("panelbutton")||(CKEDITOR.UI_PANELBUTTON="panelbutton",CKEDITOR.plugins.add("panelbutton",{})),CKEDITOR.plugins.add("ae_panelmenubuttonbridge",{requires:["ae_uibridge"],beforeInit:function(e){e.ui.addPanelMenuButton=function(e,t){this.add(e,CKEDITOR.UI_PANELBUTTON,t)},e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,{add:m,create:function(e){var t="panelMenuButtonBridge"+(1e9*Math.random()>>>0),n=m(t,e);return new n}})}})}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=d(o),a=n(2),l=d(a),s=n(12),u=d(s),c=n(1),f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(!CKEDITOR.plugins.get("ae_richcombobridge")){var y={},g=function(e,t,n){var o,a,s=AlloyEditor.Buttons[e];(y[n.name]=y[n.name]||{},y[n.name][e]=y[n.name][e]||t,y[n.name][e].currentValue=void 0,s)||(a=o=function(o){function a(t){p(this,a);var r=h(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return r._onClick=function(t){var n=r.context.editor.get("nativeEditor"),o=y[n.name][e];if(o.onClick){var i=t.currentTarget.getAttribute("data-value");o.onClick.call(r,i),y[n.name][e].currentValue=i,n.fire("actionPerformed",r)}},r.state={value:y[n.name][e].currentValue},r}return m(a,o),r(a,[{key:"commit",value:function(){}},{key:"createPanel",value:function(){}},{key:"disable",value:function(){}},{key:"enable",value:function(){}},{key:"getState",value:function(){}},{key:"hideGroup",value:function(){}},{key:"hideItem",value:function(){}},{key:"mark",value:function(){}},{key:"showAll",value:function(){}},{key:"startGroup",value:function(){}},{key:"unmarkAll",value:function(){}},{key:"add",value:function(e,t,n){this._items.push({preview:t,title:n,value:e})}},{key:"componentWillMount",value:function(){var t=this.context.editor.get("nativeEditor"),n=y[t.name][e];this._items=[],this.setValue=this._setValue,n.init&&n.init.call(this),n.onRender&&n.onRender.call(this)}},{key:"componentWillUnmount",value:function(){this._cacheValue(this.state.value),this.setValue=this._cacheValue}},{key:"getValue",value:function(){return this.state.value}},{key:"render",value:function(){var n=this.context.editor.get("nativeEditor"),r=y[n.name][e].currentValue||t.label;return i.default.createElement("div",{className:"ae-container-dropdown ae-has-dropdown"},i.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":r,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:r},i.default.createElement("div",{className:"ae-container"},i.default.createElement("span",{className:"ae-container-dropdown-selected-item"},r),i.default.createElement(f.default,{symbol:"caret-bottom"}))),this.props.expanded&&i.default.createElement(u.default,{onDismiss:this.props.toggleDropdown},this._getItems()))}},{key:"_cacheValue",value:function(t){var n=this.context.editor.get("nativeEditor");y[n.name][e].currentValue=t}},{key:"_getItems",value:function(){var e=this,t=this,n=this._items.map(function(n){var r="ae-toolbar-element "+(n.value===e.state.value?"active":"");return i.default.createElement("li",{key:n.title,role:"option"},i.default.createElement("button",{className:r,dangerouslySetInnerHTML:{__html:n.preview},"data-value":n.value,onClick:t._onClick}))});return n}},{key:"_setValue",value:function(e){this._cacheValue(e),this.setState({value:e})}}]),a}(i.default.Component),o.contextType=l.default,o.displayName=e,o.key=e,s=a,AlloyEditor.Buttons[e]=s);return s};CKEDITOR.plugins.get("richcombo")||(CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.plugins.add("richcombo",{})),CKEDITOR.plugins.add("ae_richcombobridge",{requires:["ae_uibridge"],beforeInit:function(e){e.ui.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)},e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,{add:g,create:function(e){var t="richComboBridge"+(1e9*Math.random()>>>0),n=g(t,e);return new n}})}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_uibridge")||CKEDITOR.plugins.add("ae_uibridge",{beforeInit:function(e){var t=e.ui.add;e.ui.add=function(n,r,o){t.call(this,n,r,o);var i=this._.handlers[r];i&&i.add&&(i.add(n,o,e),AlloyEditor.registerBridgeButton(n,e.__processingPlugin__.plugin.name))}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeImageCommand=void 0;var r=n(144),o=i(r);function i(e){return e&&e.__esModule?e:{default:e}}t.removeImageCommand=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={exec:function(e){var t=e.getSelection();if(t){var n=t.getRanges(),r=n[0].startContainer,o=new CKEDITOR.dom.range(r);o.setStart(r,0),o.setEnd(r,0);var i=t.getSelectedElement();if(i&&"img"===i.getName()){var a=t.getNative();a&&a.removeAllRanges(),t.selectRanges([o]),i.remove()}}}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),i=y(o),a=n(0),l=y(a),s=n(6),u=y(s),c=n(2),f=y(c),d=n(17),p=y(d),h=n(10),m=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(e){g(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onDismissToolbarFocus=function(){var e=n.context.editor.get("nativeEditor");e.focus()},n.state={hidden:!1},n}return v(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this,t=this.context.editor.get("nativeEditor");t.on("editorInteraction",this._onEditorInteraction,this),t.on("actionPerformed",this._onActionPerformed,this),t.on("key",this._onEditorKey,this),this._mousedownListener=function(t){e._setUIHidden(t.target)},this._keyDownListener=CKEDITOR.tools.debounce(function(t){e._setUIHidden(document.activeElement)},this.props.eventsDelay,this),document.addEventListener("mousedown",this._mousedownListener),document.addEventListener("keydown",this._keyDownListener)}},{key:"componentDidUpdate",value:function(e,t){var n=u.default.findDOMNode(this),r=this.context.editor.get("nativeEditor");n&&r.fire("ariaUpdate",{message:this._getAvailableToolbarsMessage(n)}),r.fire("editorUpdate",{prevProps:e,prevState:t,props:this.props,state:this.state})}},{key:"_getAriaUpdateTemplate",value:function(e){return this._ariaUpdateTemplates||(this._ariaUpdateTemplates={}),this._ariaUpdateTemplates[e]||(this._ariaUpdateTemplates[e]=new CKEDITOR.template(this._getAriaUpdates()[e])),this._ariaUpdateTemplates[e]}},{key:"_getAriaUpdates",value:function(){return this.props.ariaUpdates||{noToolbar:AlloyEditor.Strings.ariaUpdateNoToolbar,oneToolbar:AlloyEditor.Strings.ariaUpdateOneToolbar,manyToolbars:AlloyEditor.Strings.ariaUpdateManyToolbars}}},{key:"_getAvailableToolbarsMessage",value:function(e){var t=e.querySelectorAll('[role="toolbar"]');if(t.length){var n=Array.prototype.slice.call(t).map(function(e){return e.getAttribute("aria-label")}),r=1===n.length?"oneToolbar":"manyToolbars";return this._getAriaUpdateTemplate(r).output({toolbars:n.join(",").replace(/,([^,]*)$/," and $1")})}return this._getAriaUpdates().noToolbar}},{key:"componentWillUnmount",value:function(){this._mousedownListener&&document.removeEventListener("mousedown",this._mousedownListener),this._keyDownListener&&(this._keyDownListener.detach(),document.removeEventListener("keydown",this._keyDownListener))}},{key:"render",value:function(){var e=this;if(this.state.hidden)return null;var t=Object.keys(this.props.toolbars).map(function(e){return AlloyEditor.Toolbars[e]||window[e]});return t=this.filterExclusive(t).map(function(t){var n=e.mergeExclusiveProps({config:e.props.toolbars[t.key],editor:e.context.editor,editorEvent:e.state.editorEvent,key:t.key,onDismiss:e._onDismissToolbarFocus,selectionData:e.state.selectionData},t.key);return l.default.createElement(t,n)}),l.default.createElement("div",{className:"ae-toolbars",onKeyDown:this.handleKey},t)}},{key:"_onActionPerformed",value:function(e){var t=this.context.editor.get("nativeEditor");t.focus(),this.setState({itemExclusive:null,selectionData:t.getSelectionData()})}},{key:"_onEditorInteraction",value:function(e){this.setState({editorEvent:e,hidden:!1,itemExclusive:null,selectionData:e.data.selectionData})}},{key:"_onEditorKey",value:function(e){var t=e.data.domEvent.$;t.altKey&&121===t.keyCode&&this.focus()}},{key:"_setUIHidden",value:function(e){var t=u.default.findDOMNode(this);if(t){var n=this.context.editor.get("nativeEditor").editable(),r=e.parentNode,o=new CKEDITOR.dom.node(e);if(n){var i=n.$===e||n.contains(o)||new CKEDITOR.dom.element(t).contains(o);r&&(i=i||"ckimgrsz"===r.id),i||this.setState({hidden:!0})}else this.setState({hidden:!0})}}}]),t}(l.default.Component);_.contextType=f.default,_.defaultProps={circular:!0,descendants:"[class^=ae-toolbar-]",eventsDelay:0,keys:{next:9}},_.propTypes={ariaUpdates:i.default.object,eventsDelay:i.default.number,toolbars:i.default.object.isRequired},t.default=(0,p.default)((0,m.default)(_))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),o=u(r),i=n(5),a=u(i),l=n(21),s=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){c.superclass.constructor.call(this,e),this.init(e)}(0,s.default)(c,o.default,{init:function(e){this._callChain("initializer",e)},destroy:function(){this._callChain("destructor")},_callChain:function(e,t){var n=[],r=this.constructor;while(r)a.default.isFunction(r.prototype[e])&&n.push(r.prototype[e]),r=r.superclass?r.superclass.constructor:null;n=n.reverse(),t=a.default.isArray(t)?t:[t];for(var o=0;o<n.length;o++){var i=n[o];i.apply(this,t)}}}),t.default=c}]);
//# sourceMappingURL=alloy-editor-core-min.js.map