YUI.add("toolbar-image",function(t){"use strict";var o=t.Lang,i=t.Node,e=t.Base.create("toolbarimage",t.Widget,[t.WidgetPosition,t.WidgetPositionConstrain,t.WidgetAutohide,t.ToolbarBase],{renderUI:function(){var t,o,e=this;t=i.create(e.TPL_BUTTONS_CONTAINER),this.get("boundingBox").addClass("arrow-box arrow-box-bottom"),o=this.get("contentBox"),o.addClass("btn-toolbar"),o.appendChild(t),e._buttonsContainer=t},bindUI:function(){this.on("actionPerformed",this._onActionPerformed,this)},showAtPoint:function(t,o,i){var e,a;a=this.get("visible"),a||this.show(),e=this._getToolbarXYPoint(t,o,i),this._moveToPoint(this.getConstrainedXY(e),i,{visible:a})},_getToolbarXYPoint:function(t,o){var i,e;return i=this.get("boundingBox").getDOMNode(),t-=i.offsetWidth/2,e=this.get("gutter"),o=o-i.offsetHeight-e.top,[t,o]},_onActionPerformed:function(){var t,o;t=this.get("editor"),o=t.getSelection().getSelectedElement(),this._updateUI(o)},_onEditorInteraction:function(t){var o,i,e;e=t.data.selectionData,o=e.element,i=o?o.getName():null,"img"===i?this._updateUI(o):this.hide()},_updateUI:function(o){var i;o&&(i=t.DOM.region(o.$),this.showAtPoint(i.left+(i.right-i.left)/2,i.top))},BOUNDING_TEMPLATE:'<div class="alloy-editor-toolbar alloy-editor-toolbar-image alloy-editor-arrow-box alloy-editor-arrow-box-bottom"></div>',CONTENT_TEMPLATE:'<div class="alloy-editor-toolbar-content btn-toolbar"></div>',TPL_BUTTONS_CONTAINER:'<div class="alloy-editor-toolbar-buttons btn-group"></div>'},{ATTRS:{buttons:{validator:o.isArray,value:["left","right"]},constrain:{validator:o.isBoolean,value:!0},gutter:{validator:o.isObject,value:{left:0,top:10}}}});t.ToolbarImage=e},"",{requires:["dom-screen","widget-base","widget-position","widget-position-constrain","widget-autohide","toolbar-base"]});